{"version":3,"sources":["UnsafeCachePlugin.js"],"names":[],"mappings":"AAAA;;;;AAIA,SAAS,iBAAT,CAA2B,OAA3B,EAAoC,KAApC,EAA2C;AAC1C,MAAK,OAAL,GAAe,WAAW,CAAC,GAAD,CAA1B;AACA,KAAG,KAAK,OAAL,KAAiB,IAApB,EAA0B,KAAK,OAAL,GAAe,CAAC,GAAD,CAAf,CAA1B,KACK,IAAG,CAAC,MAAM,OAAN,CAAc,KAAK,OAAnB,CAAJ,EAAiC,KAAK,OAAL,GAAe,CAAC,KAAK,OAAN,CAAf;AACtC,MAAK,KAAL,GAAa,SAAS,EAAtB;AACA;AACD,OAAO,OAAP,GAAiB,iBAAjB;;AAEA,kBAAkB,SAAlB,CAA4B,KAA5B,GAAoC,UAAS,QAAT,EAAmB;AACtD,KAAI,aAAa,SAAS,OAA1B;AACA,KAAI,UAAU,KAAK,OAAnB;AACA,KAAI,QAAQ,KAAK,KAAjB;AACA,UAAS,OAAT,GAAmB,SAAS,OAAT,CAAiB,OAAjB,EAA0B,OAA1B,EAAmC,QAAnC,EAA6C;AAC/D,MAAI,KAAK,UAAU,IAAV,GAAiB,OAA1B;AACA,MAAG,MAAM,EAAN,CAAH,EAAc;AACb;AACA,UAAO,SAAS,IAAT,EAAe,MAAM,EAAN,CAAf,CAAP;AACA;AACD,aAAW,IAAX,CAAgB,QAAhB,EAA0B,OAA1B,EAAmC,OAAnC,EAA4C,UAAS,GAAT,EAAc,MAAd,EAAsB;AACjE,OAAG,GAAH,EAAQ,OAAO,SAAS,GAAT,CAAP;AACR,OAAI,UAAU,QAAQ,IAAR,CAAa,UAAS,MAAT,EAAiB;AAC3C,WAAO,OAAO,IAAP,CAAY,OAAO,IAAnB,CAAP;AACA,IAFa,CAAd;AAGA,OAAG,CAAC,OAAJ,EAAa,OAAO,SAAS,IAAT,EAAe,MAAf,CAAP;AACb,YAAS,IAAT,EAAe,MAAM,EAAN,IAAY,MAA3B;AACA,GAPD;AAQA,EAdD;AAeA,CAnBD","file":"UnsafeCachePlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction UnsafeCachePlugin(regExps, cache) {\r\n\tthis.regExps = regExps || [/./];\r\n\tif(this.regExps === true) this.regExps = [/./];\r\n\telse if(!Array.isArray(this.regExps)) this.regExps = [this.regExps];\r\n\tthis.cache = cache || {};\r\n}\r\nmodule.exports = UnsafeCachePlugin;\r\n\r\nUnsafeCachePlugin.prototype.apply = function(resolver) {\r\n\tvar oldResolve = resolver.resolve;\r\n\tvar regExps = this.regExps;\r\n\tvar cache = this.cache;\r\n\tresolver.resolve = function resolve(context, request, callback) {\r\n\t\tvar id = context + \"->\" + request;\r\n\t\tif(cache[id]) {\r\n\t\t\t// From cache\r\n\t\t\treturn callback(null, cache[id]);\r\n\t\t}\r\n\t\toldResolve.call(resolver, context, request, function(err, result) {\r\n\t\t\tif(err) return callback(err);\r\n\t\t\tvar doCache = regExps.some(function(regExp) {\r\n\t\t\t\treturn regExp.test(result.path);\r\n\t\t\t});\r\n\t\t\tif(!doCache) return callback(null, result);\r\n\t\t\tcallback(null, cache[id] = result);\r\n\t\t});\r\n\t};\r\n};\r\n"]}