{"version":3,"sources":["0.x.js"],"names":[],"mappings":"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","file":"0.x-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.10.0\n(function() {\n  var Adapter, Stylus, _, nodefn, sourcemaps,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  Adapter = require('../../adapter_base');\n\n  sourcemaps = require('../../sourcemaps');\n\n  nodefn = require('when/node/function');\n\n  _ = require('lodash');\n\n  Stylus = (function(superClass) {\n    extend(Stylus, superClass);\n\n    function Stylus() {\n      return Stylus.__super__.constructor.apply(this, arguments);\n    }\n\n    Stylus.prototype.name = 'stylus';\n\n    Stylus.prototype.extensions = ['styl'];\n\n    Stylus.prototype.output = 'css';\n\n    Stylus.prototype._render = function(str, options) {\n      var base, defines, i, imports, includes, j, k, l, len, len1, len2, m, obj, plugins, rawDefines, sets, v;\n      sets = {};\n      defines = {};\n      rawDefines = {};\n      includes = [];\n      imports = [];\n      plugins = [];\n      if (options.sourcemap === true) {\n        options.sourcemap = {\n          comment: false\n        };\n      }\n      for (k in options) {\n        v = options[k];\n        switch (k) {\n          case 'define':\n            _.extend(defines, v);\n            break;\n          case 'rawDefine':\n            _.extend(rawDefines, v);\n            break;\n          case 'include':\n            includes.push(v);\n            break;\n          case 'import':\n            imports.push(v);\n            break;\n          case 'use':\n            plugins.push(v);\n            break;\n          case 'url':\n            if (typeof v === 'string') {\n              obj = {};\n              obj[v] = this.engine.url();\n              _.extend(defines, obj);\n            } else {\n              obj = {};\n              obj[v.name] = this.engine.url({\n                limit: v.limit != null ? v.limit : 30000,\n                paths: v.paths || []\n              });\n              _.extend(defines, obj);\n            }\n            break;\n          default:\n            sets[k] = v;\n        }\n      }\n      includes = _.flatten(includes);\n      imports = _.flatten(imports);\n      plugins = _.flatten(plugins);\n      base = this.engine(str);\n      for (k in sets) {\n        v = sets[k];\n        base.set(k, v);\n      }\n      for (k in defines) {\n        v = defines[k];\n        base.define(k, v);\n      }\n      for (k in rawDefines) {\n        v = rawDefines[k];\n        base.define(k, v, true);\n      }\n      for (j = 0, len = includes.length; j < len; j++) {\n        i = includes[j];\n        base.include(i);\n      }\n      for (l = 0, len1 = imports.length; l < len1; l++) {\n        i = imports[l];\n        base[\"import\"](i);\n      }\n      for (m = 0, len2 = plugins.length; m < len2; m++) {\n        i = plugins[m];\n        base.use(i);\n      }\n      return nodefn.call(base.render.bind(base)).then(function(res) {\n        return obj = {\n          result: res\n        };\n      }).then(function(obj) {\n        if (base.sourcemap) {\n          return sourcemaps.inline_sources(base.sourcemap).then(function(map) {\n            obj.sourcemap = map;\n            return obj;\n          });\n        } else {\n          return obj;\n        }\n      });\n    };\n\n    return Stylus;\n\n  })(Adapter);\n\n  module.exports = Stylus;\n\n}).call(this);\n"]}