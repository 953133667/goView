{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA,IAAI,OAAO,OAAO,OAAlB;AACA,IAAI,eAAe,QAAQ,QAAR,EAAkB,YAArC;AACA,IAAI,UAAU,QAAQ,eAAR,CAAd;AACA,IAAI,MAAM,QAAQ,KAAR,CAAV;;AAEA,KAAK,OAAL,GAAe,UAAU,MAAV,EAAkB,EAAlB,EAAsB;AACjC,QAAI,OAAO,MAAP,KAAkB,QAAtB,EAAgC;AAC5B,iBAAS,IAAI,KAAJ,CAAU,MAAV,CAAT;AACH;AACD,QAAI,CAAC,MAAL,EAAa,SAAS,EAAT;AACb,QAAI,CAAC,OAAO,IAAR,IAAgB,CAAC,OAAO,IAA5B,EAAkC;AAC9B,eAAO,IAAP,GAAc,SAAS,OAAO,QAAP,CAAgB,IAAzB,EAA+B,EAA/B,CAAd;AACH;AACD,QAAI,CAAC,OAAO,IAAR,IAAgB,OAAO,QAA3B,EAAqC;AACjC,eAAO,IAAP,GAAc,OAAO,QAArB;AACH;;AAED,QAAI,CAAC,OAAO,QAAZ,EAAsB;AAClB,YAAI,OAAO,MAAX,EAAmB;AACf,mBAAO,QAAP,GAAkB,OAAO,MAAP,GAAgB,GAAlC;AACH,SAFD,MAEO;AACH,mBAAO,QAAP,GAAkB,OAAO,QAAP,CAAgB,QAAlC;AACH;AACJ;;AAED,QAAI,CAAC,OAAO,IAAZ,EAAkB;AACd,eAAO,IAAP,GAAc,OAAO,QAAP,CAAgB,QAAhB,IAA4B,OAAO,QAAP,CAAgB,IAA1D;AACH;AACD,QAAI,IAAI,IAAJ,CAAS,OAAO,IAAhB,CAAJ,EAA2B;AACvB,YAAI,CAAC,OAAO,IAAZ,EAAkB;AACd,mBAAO,IAAP,GAAc,OAAO,IAAP,CAAY,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAd;AACH;AACD,eAAO,IAAP,GAAc,OAAO,IAAP,CAAY,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAd;AACH;AACD,QAAI,CAAC,OAAO,IAAZ,EAAkB,OAAO,IAAP,GAAc,OAAO,QAAP,IAAmB,QAAnB,GAA8B,GAA9B,GAAoC,EAAlD;;AAElB,QAAI,MAAM,IAAI,OAAJ,CAAY,IAAI,OAAJ,EAAZ,EAAyB,MAAzB,CAAV;AACA,QAAI,EAAJ,EAAQ,IAAI,EAAJ,CAAO,UAAP,EAAmB,EAAnB;AACR,WAAO,GAAP;AACH,CAlCD;;AAoCA,KAAK,GAAL,GAAW,UAAU,MAAV,EAAkB,EAAlB,EAAsB;AAC7B,WAAO,MAAP,GAAgB,KAAhB;AACA,QAAI,MAAM,KAAK,OAAL,CAAa,MAAb,EAAqB,EAArB,CAAV;AACA,QAAI,GAAJ;AACA,WAAO,GAAP;AACH,CALD;;AAOA,KAAK,KAAL,GAAa,YAAY,CAAE,CAA3B;AACA,KAAK,KAAL,CAAW,iBAAX,GAA+B,CAA/B;;AAEA,IAAI,UAAW,YAAY;AACvB,QAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAAV,CAAN;AACH,KAFD,MAGK,IAAI,OAAO,cAAX,EAA2B;AAC5B,eAAO,OAAO,cAAd;AACH,KAFI,MAGA,IAAI,OAAO,aAAX,EAA0B;AAC3B,YAAI,MAAM,CACN,oBADM,EAEN,oBAFM,EAGN,mBAHM,CAAV;AAKA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACjC,gBAAI;AACA,oBAAI,KAAK,IAAI,OAAO,aAAX,CAA0B,IAAI,CAAJ,CAA1B,CAAT;AACA,uBAAO,YAAY;AACf,wBAAI,EAAJ,EAAQ;AACJ,4BAAI,MAAM,EAAV;AACA,6BAAK,IAAL;AACA,+BAAO,GAAP;AACH,qBAJD,MAKK;AACD,+BAAO,IAAI,OAAO,aAAX,CAA0B,IAAI,CAAJ,CAA1B,CAAP;AACH;AACJ,iBATD;AAUH,aAZD,CAaA,OAAO,CAAP,EAAU,CAAE;AACf;AACD,cAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH,KAvBI,MAwBA;AACD,cAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH;AACJ,CAlCa,EAAd;;AAoCA,KAAK,YAAL,GAAoB;AAChB,SAAM,UADU;AAEhB,SAAM,qBAFU;AAGhB,SAAM,YAHU,EAGoB;AACpC,SAAM,IAJU;AAKhB,SAAM,SALU;AAMhB,SAAM,UANU;AAOhB,SAAM,+BAPU;AAQhB,SAAM,YARU;AAShB,SAAM,eATU;AAUhB,SAAM,iBAVU;AAWhB,SAAM,cAXU,EAWoB;AACpC,SAAM,kBAZU;AAahB,SAAM,mBAbU;AAchB,SAAM,mBAdU;AAehB,SAAM,WAfU;AAgBhB,SAAM,cAhBU;AAiBhB,SAAM,WAjBU;AAkBhB,SAAM,oBAlBU;AAmBhB,SAAM,aAnBU;AAoBhB,SAAM,cApBU;AAqBhB,SAAM,kBArBU;AAsBhB,SAAM,WAtBU;AAuBhB,SAAM,WAvBU;AAwBhB,SAAM,oBAxBU;AAyBhB,SAAM,gBAzBU;AA0BhB,SAAM,+BA1BU;AA2BhB,SAAM,kBA3BU;AA4BhB,SAAM,UA5BU;AA6BhB,SAAM,MA7BU;AA8BhB,SAAM,iBA9BU;AA+BhB,SAAM,qBA/BU;AAgChB,SAAM,0BAhCU;AAiChB,SAAM,uBAjCU;AAkChB,SAAM,wBAlCU;AAmChB,SAAM,iCAnCU;AAoChB,SAAM,oBApCU;AAqChB,SAAM,eArCU,EAqCoB;AACpC,SAAM,sBAtCU,EAsCoB;AACpC,SAAM,QAvCU,EAuCoB;AACpC,SAAM,mBAxCU,EAwCoB;AACpC,SAAM,sBAzCU,EAyCoB;AACpC,SAAM,kBA1CU,EA0CoB;AACpC,SAAM,uBA3CU,EA2CoB;AACpC,SAAM,mBA5CU,EA4CoB;AACpC,SAAM,iCA7CU,EA6CwB;AACxC,SAAM,uBA9CU;AA+ChB,SAAM,iBA/CU;AAgDhB,SAAM,aAhDU;AAiDhB,SAAM,qBAjDU;AAkDhB,SAAM,kBAlDU;AAmDhB,SAAM,4BAnDU;AAoDhB,SAAM,yBApDU,EAoDoB;AACpC,SAAM,sBArDU,EAqDoB;AACpC,SAAM,0BAtDU;AAuDhB,SAAM,cAvDU,EAuDoB;AACpC,SAAM,iCAxDU,CAwDwB;AAxDxB,CAApB","file":"index-compiled.js","sourcesContent":["var http = module.exports;\nvar EventEmitter = require('events').EventEmitter;\nvar Request = require('./lib/request');\nvar url = require('url')\n\nhttp.request = function (params, cb) {\n    if (typeof params === 'string') {\n        params = url.parse(params)\n    }\n    if (!params) params = {};\n    if (!params.host && !params.port) {\n        params.port = parseInt(window.location.port, 10);\n    }\n    if (!params.host && params.hostname) {\n        params.host = params.hostname;\n    }\n\n    if (!params.protocol) {\n        if (params.scheme) {\n            params.protocol = params.scheme + ':';\n        } else {\n            params.protocol = window.location.protocol;\n        }\n    }\n\n    if (!params.host) {\n        params.host = window.location.hostname || window.location.host;\n    }\n    if (/:/.test(params.host)) {\n        if (!params.port) {\n            params.port = params.host.split(':')[1];\n        }\n        params.host = params.host.split(':')[0];\n    }\n    if (!params.port) params.port = params.protocol == 'https:' ? 443 : 80;\n    \n    var req = new Request(new xhrHttp, params);\n    if (cb) req.on('response', cb);\n    return req;\n};\n\nhttp.get = function (params, cb) {\n    params.method = 'GET';\n    var req = http.request(params, cb);\n    req.end();\n    return req;\n};\n\nhttp.Agent = function () {};\nhttp.Agent.defaultMaxSockets = 4;\n\nvar xhrHttp = (function () {\n    if (typeof window === 'undefined') {\n        throw new Error('no window object present');\n    }\n    else if (window.XMLHttpRequest) {\n        return window.XMLHttpRequest;\n    }\n    else if (window.ActiveXObject) {\n        var axs = [\n            'Msxml2.XMLHTTP.6.0',\n            'Msxml2.XMLHTTP.3.0',\n            'Microsoft.XMLHTTP'\n        ];\n        for (var i = 0; i < axs.length; i++) {\n            try {\n                var ax = new(window.ActiveXObject)(axs[i]);\n                return function () {\n                    if (ax) {\n                        var ax_ = ax;\n                        ax = null;\n                        return ax_;\n                    }\n                    else {\n                        return new(window.ActiveXObject)(axs[i]);\n                    }\n                };\n            }\n            catch (e) {}\n        }\n        throw new Error('ajax not supported in this browser')\n    }\n    else {\n        throw new Error('ajax not supported in this browser');\n    }\n})();\n\nhttp.STATUS_CODES = {\n    100 : 'Continue',\n    101 : 'Switching Protocols',\n    102 : 'Processing',                 // RFC 2518, obsoleted by RFC 4918\n    200 : 'OK',\n    201 : 'Created',\n    202 : 'Accepted',\n    203 : 'Non-Authoritative Information',\n    204 : 'No Content',\n    205 : 'Reset Content',\n    206 : 'Partial Content',\n    207 : 'Multi-Status',               // RFC 4918\n    300 : 'Multiple Choices',\n    301 : 'Moved Permanently',\n    302 : 'Moved Temporarily',\n    303 : 'See Other',\n    304 : 'Not Modified',\n    305 : 'Use Proxy',\n    307 : 'Temporary Redirect',\n    400 : 'Bad Request',\n    401 : 'Unauthorized',\n    402 : 'Payment Required',\n    403 : 'Forbidden',\n    404 : 'Not Found',\n    405 : 'Method Not Allowed',\n    406 : 'Not Acceptable',\n    407 : 'Proxy Authentication Required',\n    408 : 'Request Time-out',\n    409 : 'Conflict',\n    410 : 'Gone',\n    411 : 'Length Required',\n    412 : 'Precondition Failed',\n    413 : 'Request Entity Too Large',\n    414 : 'Request-URI Too Large',\n    415 : 'Unsupported Media Type',\n    416 : 'Requested Range Not Satisfiable',\n    417 : 'Expectation Failed',\n    418 : 'I\\'m a teapot',              // RFC 2324\n    422 : 'Unprocessable Entity',       // RFC 4918\n    423 : 'Locked',                     // RFC 4918\n    424 : 'Failed Dependency',          // RFC 4918\n    425 : 'Unordered Collection',       // RFC 4918\n    426 : 'Upgrade Required',           // RFC 2817\n    428 : 'Precondition Required',      // RFC 6585\n    429 : 'Too Many Requests',          // RFC 6585\n    431 : 'Request Header Fields Too Large',// RFC 6585\n    500 : 'Internal Server Error',\n    501 : 'Not Implemented',\n    502 : 'Bad Gateway',\n    503 : 'Service Unavailable',\n    504 : 'Gateway Time-out',\n    505 : 'HTTP Version Not Supported',\n    506 : 'Variant Also Negotiates',    // RFC 2295\n    507 : 'Insufficient Storage',       // RFC 4918\n    509 : 'Bandwidth Limit Exceeded',\n    510 : 'Not Extended',               // RFC 2774\n    511 : 'Network Authentication Required' // RFC 6585\n};"]}