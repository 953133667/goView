{"version":3,"sources":["request_url.js"],"names":[],"mappings":"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","file":"request_url-compiled.js","sourcesContent":["global.window = global;\nglobal.location = {\n    host: 'localhost:8081',\n    port: 8081,\n    protocol: 'http:'\n};\n\nvar noop = function() {};\nglobal.XMLHttpRequest = function() {\n  this.open = noop;\n  this.send = noop;\n};\n\nglobal.FormData = function () {};\nglobal.Blob = function () {};\nglobal.ArrayBuffer = function () {};\n\nvar test = require('tape').test;\nvar http = require('../index.js');\n\n\ntest('Test simple url string', function(t) {\n  var url = { path: '/api/foo' };\n  var request = http.get(url, noop);\n\n  t.equal( request.uri, 'http://localhost:8081/api/foo', 'Url should be correct');\n  t.end();\n\n});\n\n\ntest('Test full url object', function(t) {\n  var url = {\n    host: \"localhost:8081\",\n    hostname: \"localhost\",\n    href: \"http://localhost:8081/api/foo?bar=baz\",\n    method: \"GET\",\n    path: \"/api/foo?bar=baz\",\n    pathname: \"/api/foo\",\n    port: \"8081\",\n    protocol: \"http:\",\n    query: \"bar=baz\",\n    search: \"?bar=baz\",\n    slashes: true\n  };\n\n  var request = http.get(url, noop);\n\n  t.equal( request.uri, 'http://localhost:8081/api/foo?bar=baz', 'Url should be correct');\n  t.end();\n\n});\n\ntest('Test alt protocol', function(t) {\n  var params = {\n    protocol: \"foo:\",\n    hostname: \"localhost\",\n    port: \"3000\",\n    path: \"/bar\"\n  };\n\n  var request = http.get(params, noop);\n\n  t.equal( request.uri, 'foo://localhost:3000/bar', 'Url should be correct');\n  t.end();\n\n});\n\ntest('Test string as parameters', function(t) {\n  var url = '/api/foo';\n  var request = http.get(url, noop);\n\n  t.equal( request.uri, 'http://localhost:8081/api/foo', 'Url should be correct');\n  t.end();\n\n});\n\ntest('Test withCredentials param', function(t) {\n  var url = '/api/foo';\n\n  var request = http.request({ url: url, withCredentials: false }, noop);\n  t.equal( request.xhr.withCredentials, false, 'xhr.withCredentials should be false');\n\n  var request = http.request({ url: url, withCredentials: true }, noop);\n  t.equal( request.xhr.withCredentials, true, 'xhr.withCredentials should be true');\n\n  var request = http.request({ url: url }, noop);\n  t.equal( request.xhr.withCredentials, true, 'xhr.withCredentials should be true');\n\n  t.end();\n});\n\ntest('Test POST XHR2 types', function(t) {\n  t.plan(3);\n  var url = '/api/foo';\n\n  var request = http.request({ url: url, method: 'POST' }, noop);\n  request.xhr.send = function (data) {\n    t.ok(data instanceof global.ArrayBuffer, 'data should be instanceof ArrayBuffer');\n  };\n  request.end(new global.ArrayBuffer());\n\n  request = http.request({ url: url, method: 'POST' }, noop);\n  request.xhr.send = function (data) {\n    t.ok(data instanceof global.Blob, 'data should be instanceof Blob');\n  };\n  request.end(new global.Blob());\n\n  request = http.request({ url: url, method: 'POST' }, noop);\n  request.xhr.send = function (data) {\n    t.ok(data instanceof global.FormData, 'data should be instanceof FormData');\n  };\n  request.end(new global.FormData());\n});\n"]}