{"version":3,"sources":["build-acorn.js"],"names":[],"mappings":"AAAA,IAAI,KAAK,QAAQ,IAAR,CAAT;AAAA,IAAwB,OAAO,QAAQ,MAAR,CAA/B;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;;AAEA,IAAI,aAAa,QAAQ,YAAR,CAAjB;AACA,IAAI,QAAQ,QAAQ,YAAR,CAAZ;AACA,IAAI,WAAW,QAAQ,UAAR,EAAoB,SAApB,CAA8B,EAAC,OAAO,KAAR,EAA9B,CAAf;;AAEA,QAAQ,KAAR,CAAc,KAAK,OAAL,CAAa,SAAb,EAAwB,IAAxB,CAAd;;AAEA,WAAW,EAAC,YAAY,OAAb,EAAX,EACG,MADH,CACU,QAAQ,sBAAR,CADV,EAEG,SAFH,CAEa,QAFb,EAGG,OAHH,CAGW,gBAHX,EAG6B,EAAC,OAAO,IAAR,EAH7B,EAIG,MAJH,GAKG,EALH,CAKM,OALN,EAKe,UAAU,GAAV,EAAe;AAAE,UAAQ,GAAR,CAAY,YAAY,IAAI,OAA5B;AAAsC,CALtE,EAMG,IANH,CAMQ,GAAG,iBAAH,CAAqB,eAArB,CANR;;AAQA,IAAI,oBAAoB,mEAAxB;AACA,SAAS,gBAAT,CAA0B,IAA1B,EAAgC;AAC9B,MAAI,KAAK,IAAI,OAAO,SAAX,EAAT;AACA,MAAI,QAAQ,KAAK,OAAL,CAAa,SAAb,EAAwB,iBAAxB,CAAZ,EAAwD;AACtD,QAAI,OAAO,KAAX;AACA,OAAG,UAAH,GAAgB,UAAS,KAAT,EAAgB,CAAhB,EAAmB,QAAnB,EAA6B;AAC3C,UAAI,CAAC,IAAL,EAAW;AACT,eAAO,IAAP;AACA,iBAAS,IAAT,EAAe,iBAAf;AACD,OAHD,MAGO;AACL;AACD;AACF,KAPD;AAQD,GAVD,MAUO;AACL,OAAG,UAAH,GAAgB,UAAS,KAAT,EAAgB,CAAhB,EAAmB,QAAnB,EAA6B;AAAE,eAAS,IAAT,EAAe,KAAf;AAAuB,KAAtE;AACD;AACD,SAAO,EAAP;AACD;AACD,SAAS,iBAAT,GAA6B;AAC3B,MAAI,KAAK,IAAI,OAAO,SAAX,EAAT;AACA,MAAI,SAAS,EAAb;AACA,KAAG,UAAH,GAAgB,UAAS,KAAT,EAAgB,CAAhB,EAAmB,QAAnB,EAA6B;AAC3C,cAAU,MAAM,QAAN,CAAe,MAAf,CAAV;AACA;AACD,GAHD;AAIA,KAAG,MAAH,GAAY,UAAU,QAAV,EAAoB;AAC9B,OAAG,IAAH,CAAQ,OAAO,OAAP,CAAe,iBAAf,EAAkC,6EAAlC,CAAR;AACA,aAAS,IAAT;AACD,GAHD;AAIA,SAAO,EAAP;AACD;;AAED,WAAW,EAAC,YAAY,aAAb,EAAX,EACG,MADH,CACU,QAAQ,sBAAR,CADV,EAEG,SAFH,CAEa,gBAFb,EAGG,SAHH,CAGa,QAHb,EAIG,OAJH,CAIW,sBAJX,EAImC,EAAC,OAAO,IAAR,EAJnC,EAKG,MALH,GAMG,EANH,CAMM,OANN,EAMe,UAAU,GAAV,EAAe;AAAE,UAAQ,GAAR,CAAY,YAAY,IAAI,OAA5B;AAAsC,CANtE,EAOG,IAPH,CAOQ,mBAPR,EAQG,IARH,CAQQ,GAAG,iBAAH,CAAqB,qBAArB,CARR;;AAUA,WAAW,EAAC,YAAY,YAAb,EAAX,EACG,MADH,CACU,QAAQ,sBAAR,CADV,EAEG,SAFH,CAEa,gBAFb,EAGG,SAHH,CAGa,QAHb,EAIG,OAJH,CAIW,qBAJX,EAIkC,EAAC,OAAO,IAAR,EAJlC,EAKG,MALH,GAMG,EANH,CAMM,OANN,EAMe,UAAU,GAAV,EAAe;AAAE,UAAQ,GAAR,CAAY,YAAY,IAAI,OAA5B;AAAsC,CANtE,EAOG,IAPH,CAOQ,mBAPR,EAQG,IARH,CAQQ,GAAG,iBAAH,CAAqB,cAArB,CARR;;AAUA,MAAM,aAAN,CAAoB,oBAApB,EAA0C,UAAU,GAAV,EAAe,MAAf,EAAuB;AAC/D,MAAI,GAAJ,EAAS,OAAO,QAAQ,GAAR,CAAY,YAAY,IAAI,OAA5B,CAAP;AACT,KAAG,SAAH,CAAa,WAAb,EAA0B,OAAO,IAAjC,EAAuC,UAAU,GAAV,EAAe;AACpD,QAAI,GAAJ,EAAS,OAAO,QAAQ,GAAR,CAAY,YAAY,IAAI,OAA5B,CAAP;;AAET;AACA,QAAI,QAAQ,QAAR,KAAqB,OAAzB,EACE;AACF,QAAI,OAAO,GAAG,QAAH,CAAY,WAAZ,CAAX;AACA,QAAI,UAAU,KAAK,IAAL,GAAY,SAAS,KAAT,EAAgB,CAAhB,CAA1B;AACA,OAAG,SAAH,CAAa,WAAb,EAA0B,OAA1B;AACD,GATD;AAUD,CAZD","file":"build-acorn-compiled.js","sourcesContent":["var fs = require(\"fs\"), path = require(\"path\")\nvar stream = require(\"stream\")\n\nvar browserify = require(\"browserify\")\nvar babel = require('babel-core')\nvar babelify = require(\"babelify\").configure({loose: \"all\"})\n\nprocess.chdir(path.resolve(__dirname, \"..\"))\n\nbrowserify({standalone: \"acorn\"})\n  .plugin(require('browserify-derequire'))\n  .transform(babelify)\n  .require(\"./src/index.js\", {entry: true})\n  .bundle()\n  .on(\"error\", function (err) { console.log(\"Error: \" + err.message) })\n  .pipe(fs.createWriteStream(\"dist/acorn.js\"))\n\nvar ACORN_PLACEHOLDER = \"this_function_call_should_be_replaced_with_a_call_to_load_acorn()\";\nfunction acornShimPrepare(file) {\n  var tr = new stream.Transform\n  if (file == path.resolve(__dirname, \"../src/index.js\")) {\n    var sent = false\n    tr._transform = function(chunk, _, callback) {\n      if (!sent) {\n        sent = true\n        callback(null, ACORN_PLACEHOLDER);\n      } else {\n        callback()\n      }\n    }\n  } else {\n    tr._transform = function(chunk, _, callback) { callback(null, chunk) }\n  }\n  return tr\n}\nfunction acornShimComplete() {\n  var tr = new stream.Transform\n  var buffer = \"\";\n  tr._transform = function(chunk, _, callback) {\n    buffer += chunk.toString(\"utf8\");\n    callback();\n  };\n  tr._flush = function (callback) {\n    tr.push(buffer.replace(ACORN_PLACEHOLDER, \"module.exports = typeof acorn != 'undefined' ? acorn : require(\\\"./acorn\\\")\"));\n    callback(null);\n  };\n  return tr;\n}\n\nbrowserify({standalone: \"acorn.loose\"})\n  .plugin(require('browserify-derequire'))\n  .transform(acornShimPrepare)\n  .transform(babelify)\n  .require(\"./src/loose/index.js\", {entry: true})\n  .bundle()\n  .on(\"error\", function (err) { console.log(\"Error: \" + err.message) })\n  .pipe(acornShimComplete())\n  .pipe(fs.createWriteStream(\"dist/acorn_loose.js\"))\n\nbrowserify({standalone: \"acorn.walk\"})\n  .plugin(require('browserify-derequire'))\n  .transform(acornShimPrepare)\n  .transform(babelify)\n  .require(\"./src/walk/index.js\", {entry: true})\n  .bundle()\n  .on(\"error\", function (err) { console.log(\"Error: \" + err.message) })\n  .pipe(acornShimComplete())\n  .pipe(fs.createWriteStream(\"dist/walk.js\"))\n\nbabel.transformFile(\"./src/bin/acorn.js\", function (err, result) {\n  if (err) return console.log(\"Error: \" + err.message)\n  fs.writeFile(\"bin/acorn\", result.code, function (err) {\n    if (err) return console.log(\"Error: \" + err.message)\n\n    // Make bin/acorn executable\n    if (process.platform === 'win32')\n      return\n    var stat = fs.statSync(\"bin/acorn\")\n    var newPerm = stat.mode | parseInt('111', 8)\n    fs.chmodSync(\"bin/acorn\", newPerm)\n  })\n})\n"]}