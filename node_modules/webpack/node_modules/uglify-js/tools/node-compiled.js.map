{"version":3,"sources":["node.js"],"names":[],"mappings":"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","file":"node-compiled.js","sourcesContent":["// workaround for tty output truncation upon process.exit()\n[process.stdout, process.stderr].forEach(function(stream){\n    if (stream._handle && stream._handle.setBlocking)\n        stream._handle.setBlocking(true);\n});\n\nvar path = require(\"path\");\nvar fs = require(\"fs\");\n\nvar FILES = exports.FILES = [\n    \"../lib/utils.js\",\n    \"../lib/ast.js\",\n    \"../lib/parse.js\",\n    \"../lib/transform.js\",\n    \"../lib/scope.js\",\n    \"../lib/output.js\",\n    \"../lib/compress.js\",\n    \"../lib/sourcemap.js\",\n    \"../lib/mozilla-ast.js\",\n    \"../lib/propmangle.js\",\n    \"./exports.js\",\n].map(function(file){\n    return fs.realpathSync(path.join(path.dirname(__filename), file));\n});\n\nvar UglifyJS = exports;\n\nnew Function(\"MOZ_SourceMap\", \"exports\", \"DEBUG\", FILES.map(function(file){\n    return fs.readFileSync(file, \"utf8\");\n}).join(\"\\n\\n\"))(\n    require(\"source-map\"),\n    UglifyJS,\n    !!global.UGLIFY_DEBUG\n);\n\nUglifyJS.AST_Node.warn_function = function(txt) {\n    console.error(\"WARN: %s\", txt);\n};\n\nexports.minify = function(files, options) {\n    options = UglifyJS.defaults(options, {\n        spidermonkey     : false,\n        outSourceMap     : null,\n        sourceRoot       : null,\n        inSourceMap      : null,\n        fromString       : false,\n        warnings         : false,\n        mangle           : {},\n        mangleProperties : false,\n        nameCache        : null,\n        output           : null,\n        compress         : {},\n        parse            : {}\n    });\n    UglifyJS.base54.reset();\n\n    // 1. parse\n    var toplevel = null,\n        sourcesContent = {};\n\n    if (options.spidermonkey) {\n        toplevel = UglifyJS.AST_Node.from_mozilla_ast(files);\n    } else {\n        if (typeof files == \"string\")\n            files = [ files ];\n        files.forEach(function(file, i){\n            var code = options.fromString\n                ? file\n                : fs.readFileSync(file, \"utf8\");\n            sourcesContent[file] = code;\n            toplevel = UglifyJS.parse(code, {\n                filename: options.fromString ? i : file,\n                toplevel: toplevel,\n                bare_returns: options.parse ? options.parse.bare_returns : undefined\n            });\n        });\n    }\n    if (options.wrap) {\n      toplevel = toplevel.wrap_commonjs(options.wrap, options.exportAll);\n    }\n\n    // 2. compress\n    if (options.compress) {\n        var compress = { warnings: options.warnings };\n        UglifyJS.merge(compress, options.compress);\n        toplevel.figure_out_scope();\n        var sq = UglifyJS.Compressor(compress);\n        toplevel = sq.compress(toplevel);\n    }\n\n    // 3. mangle properties\n    if (options.mangleProperties || options.nameCache) {\n        options.mangleProperties.cache = UglifyJS.readNameCache(options.nameCache, \"props\");\n        toplevel = UglifyJS.mangle_properties(toplevel, options.mangleProperties);\n        UglifyJS.writeNameCache(options.nameCache, \"props\", options.mangleProperties.cache);\n    }\n\n    // 4. mangle\n    if (options.mangle) {\n        toplevel.figure_out_scope(options.mangle);\n        toplevel.compute_char_frequency(options.mangle);\n        toplevel.mangle_names(options.mangle);\n    }\n\n    // 5. output\n    var inMap = options.inSourceMap;\n    var output = {};\n    if (typeof options.inSourceMap == \"string\") {\n        inMap = fs.readFileSync(options.inSourceMap, \"utf8\");\n    }\n    if (options.outSourceMap) {\n        output.source_map = UglifyJS.SourceMap({\n            file: options.outSourceMap,\n            orig: inMap,\n            root: options.sourceRoot\n        });\n        if (options.sourceMapIncludeSources) {\n            for (var file in sourcesContent) {\n                if (sourcesContent.hasOwnProperty(file)) {\n                    output.source_map.get().setSourceContent(file, sourcesContent[file]);\n                }\n            }\n        }\n\n    }\n    if (options.output) {\n        UglifyJS.merge(output, options.output);\n    }\n    var stream = UglifyJS.OutputStream(output);\n    toplevel.print(stream);\n\n    if (options.outSourceMap && \"string\" === typeof options.outSourceMap) {\n        stream += \"\\n//# sourceMappingURL=\" + options.outSourceMap;\n    }\n\n    var source_map = output.source_map;\n    if (source_map) {\n        source_map = source_map + \"\";\n    }\n\n    return {\n        code : stream + \"\",\n        map  : source_map\n    };\n};\n\n// exports.describe_ast = function() {\n//     function doitem(ctor) {\n//         var sub = {};\n//         ctor.SUBCLASSES.forEach(function(ctor){\n//             sub[ctor.TYPE] = doitem(ctor);\n//         });\n//         var ret = {};\n//         if (ctor.SELF_PROPS.length > 0) ret.props = ctor.SELF_PROPS;\n//         if (ctor.SUBCLASSES.length > 0) ret.sub = sub;\n//         return ret;\n//     }\n//     return doitem(UglifyJS.AST_Node).sub;\n// }\n\nexports.describe_ast = function() {\n    var out = UglifyJS.OutputStream({ beautify: true });\n    function doitem(ctor) {\n        out.print(\"AST_\" + ctor.TYPE);\n        var props = ctor.SELF_PROPS.filter(function(prop){\n            return !/^\\$/.test(prop);\n        });\n        if (props.length > 0) {\n            out.space();\n            out.with_parens(function(){\n                props.forEach(function(prop, i){\n                    if (i) out.space();\n                    out.print(prop);\n                });\n            });\n        }\n        if (ctor.documentation) {\n            out.space();\n            out.print_string(ctor.documentation);\n        }\n        if (ctor.SUBCLASSES.length > 0) {\n            out.space();\n            out.with_block(function(){\n                ctor.SUBCLASSES.forEach(function(ctor, i){\n                    out.indent();\n                    doitem(ctor);\n                    out.newline();\n                });\n            });\n        }\n    };\n    doitem(UglifyJS.AST_Node);\n    return out + \"\";\n};\n\nfunction readReservedFile(filename, reserved) {\n    if (!reserved) {\n        reserved = { vars: [], props: [] };\n    }\n    var data = fs.readFileSync(filename, \"utf8\");\n    data = JSON.parse(data);\n    if (data.vars) {\n        data.vars.forEach(function(name){\n            UglifyJS.push_uniq(reserved.vars, name);\n        });\n    }\n    if (data.props) {\n        data.props.forEach(function(name){\n            UglifyJS.push_uniq(reserved.props, name);\n        });\n    }\n    return reserved;\n}\n\nexports.readReservedFile = readReservedFile;\n\nexports.readDefaultReservedFile = function(reserved) {\n    return readReservedFile(path.join(__dirname, \"domprops.json\"), reserved);\n};\n\nexports.readNameCache = function(filename, key) {\n    var cache = null;\n    if (filename) {\n        try {\n            var cache = fs.readFileSync(filename, \"utf8\");\n            cache = JSON.parse(cache)[key];\n            if (!cache) throw \"init\";\n            cache.props = UglifyJS.Dictionary.fromObject(cache.props);\n        } catch(ex) {\n            cache = {\n                cname: -1,\n                props: new UglifyJS.Dictionary()\n            };\n        }\n    }\n    return cache;\n};\n\nexports.writeNameCache = function(filename, key, cache) {\n    if (filename) {\n        var data;\n        try {\n            data = fs.readFileSync(filename, \"utf8\");\n            data = JSON.parse(data);\n        } catch(ex) {\n            data = {};\n        }\n        data[key] = {\n            cname: cache.cname,\n            props: cache.props.toObject()\n        };\n        fs.writeFileSync(filename, JSON.stringify(data, null, 2), \"utf8\");\n    }\n};\n"]}