{"version":3,"sources":["DependenciesBlock.js"],"names":[],"mappings":"AAAA;;;;AAIA,IAAI,4BAA4B,QAAQ,6BAAR,CAAhC;;AAEA,SAAS,iBAAT,GAA6B;AAC5B,MAAK,YAAL,GAAoB,EAApB;AACA,MAAK,MAAL,GAAc,EAAd;AACA,MAAK,SAAL,GAAiB,EAAjB;AACA;AACD,OAAO,OAAP,GAAiB,iBAAjB;;AAEA,kBAAkB,SAAlB,CAA4B,QAA5B,GAAuC,UAAS,KAAT,EAAgB;AACtD,MAAK,MAAL,CAAY,IAAZ,CAAiB,KAAjB;AACA,OAAM,MAAN,GAAe,IAAf;AACA,CAHD;;AAKA,kBAAkB,SAAlB,CAA4B,WAA5B,GAA0C,UAAS,IAAT,EAAe,UAAf,EAA2B,YAA3B,EAAyC;AAClF,MAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,KAAK,SAAL,CAAe,MAAlC,EAA0C,GAA1C,EAA+C;AAC9C,MAAI,IAAI,KAAK,SAAL,CAAe,CAAf,CAAR;AACA,MAAG,EAAE,IAAF,KAAW,IAAX,IAAmB,EAAE,UAAF,KAAiB,UAAvC,EAAmD;AACnD;AACD,MAAK,SAAL,CAAe,IAAf,CAAoB,IAAI,yBAAJ,CAA8B,IAA9B,EAAoC,UAApC,EAAgD,YAAhD,CAApB;AACA,CAND;;AAQA,kBAAkB,SAAlB,CAA4B,aAA5B,GAA4C,UAAS,UAAT,EAAqB;AAChE,MAAK,YAAL,CAAkB,IAAlB,CAAuB,UAAvB;AACA,CAFD;;AAIA,kBAAkB,SAAlB,CAA4B,UAA5B,GAAyC,UAAS,IAAT,EAAe;AACvD,MAAK,YAAL,CAAkB,OAAlB,CAA0B,UAAS,CAAT,EAAY;AACrC,IAAE,UAAF,CAAa,IAAb;AACA,EAFD;AAGA,MAAK,MAAL,CAAY,OAAZ,CAAoB,UAAS,CAAT,EAAY;AAC/B,IAAE,UAAF,CAAa,IAAb;AACA,EAFD;AAGA,MAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,CAAT,EAAY;AAClC,IAAE,UAAF,CAAa,IAAb;AACA,EAFD;AAGA,CAVD;;AAYA,kBAAkB,SAAlB,CAA4B,UAA5B,GAAyC,YAAW;AACnD,UAAS,UAAT,CAAoB,CAApB,EAAuB;AACtB,IAAE,UAAF;AACA;AACD,MAAK,YAAL,CAAkB,OAAlB,CAA0B,UAA1B;AACA,MAAK,MAAL,CAAY,OAAZ,CAAoB,UAApB;AACA,MAAK,SAAL,CAAe,OAAf,CAAuB,UAAvB;AACA,CAPD;;AASA,kBAAkB,SAAlB,CAA4B,eAA5B,GAA8C,YAAW;AACxD,QAAO,KAAK,YAAL,CAAkB,MAAlB,GAA2B,CAA3B,IACN,KAAK,MAAL,CAAY,MAAZ,CAAmB,KAAK,SAAxB,EAAmC,IAAnC,CAAwC,UAAS,IAAT,EAAe;AACtD,SAAO,KAAK,eAAL,EAAP;AACA,EAFD,CADD;AAIA,CALD","file":"DependenciesBlock-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar DependenciesBlockVariable = require(\"./DependenciesBlockVariable\");\r\n\r\nfunction DependenciesBlock() {\r\n\tthis.dependencies = [];\r\n\tthis.blocks = [];\r\n\tthis.variables = [];\r\n}\r\nmodule.exports = DependenciesBlock;\r\n\r\nDependenciesBlock.prototype.addBlock = function(block) {\r\n\tthis.blocks.push(block);\r\n\tblock.parent = this;\r\n};\r\n\r\nDependenciesBlock.prototype.addVariable = function(name, expression, dependencies) {\r\n\tfor(var i = 0; i < this.variables.length; i++) {\r\n\t\tvar v = this.variables[i];\r\n\t\tif(v.name === name && v.expression === expression) return;\r\n\t}\r\n\tthis.variables.push(new DependenciesBlockVariable(name, expression, dependencies));\r\n};\r\n\r\nDependenciesBlock.prototype.addDependency = function(dependency) {\r\n\tthis.dependencies.push(dependency);\r\n};\r\n\r\nDependenciesBlock.prototype.updateHash = function(hash) {\r\n\tthis.dependencies.forEach(function(d) {\r\n\t\td.updateHash(hash);\r\n\t});\r\n\tthis.blocks.forEach(function(b) {\r\n\t\tb.updateHash(hash);\r\n\t});\r\n\tthis.variables.forEach(function(v) {\r\n\t\tv.updateHash(hash);\r\n\t});\r\n};\r\n\r\nDependenciesBlock.prototype.disconnect = function() {\r\n\tfunction disconnect(i) {\r\n\t\ti.disconnect();\r\n\t}\r\n\tthis.dependencies.forEach(disconnect);\r\n\tthis.blocks.forEach(disconnect);\r\n\tthis.variables.forEach(disconnect);\r\n};\r\n\r\nDependenciesBlock.prototype.hasDependencies = function() {\r\n\treturn this.dependencies.length > 0 ||\r\n\t\tthis.blocks.concat(this.variables).some(function(item) {\r\n\t\t\treturn item.hasDependencies();\r\n\t\t});\r\n};\r\n"]}