{"version":3,"sources":["NormalModuleReplacementPlugin.js"],"names":[],"mappings":"AAAA;;;;;AAKA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA,SAAS,6BAAT,CAAuC,cAAvC,EAAuD,WAAvD,EAAoE;AACnE,MAAK,cAAL,GAAsB,cAAtB;AACA,MAAK,WAAL,GAAmB,WAAnB;AACA;AACD,OAAO,OAAP,GAAiB,6BAAjB;AACA,8BAA8B,SAA9B,CAAwC,KAAxC,GAAgD,UAAS,QAAT,EAAmB;AAClE,KAAI,iBAAiB,KAAK,cAA1B;AACA,KAAI,cAAc,KAAK,WAAvB;AACA,UAAS,MAAT,CAAgB,uBAAhB,EAAyC,UAAS,GAAT,EAAc;AACtD,MAAI,MAAJ,CAAW,gBAAX,EAA6B,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AACvD,OAAG,CAAC,MAAJ,EAAY,OAAO,UAAP;AACZ,OAAG,eAAe,IAAf,CAAoB,OAAO,OAA3B,CAAH,EAAwC;AACvC,QAAG,OAAO,WAAP,KAAuB,UAA1B,EAAsC;AACrC,iBAAY,MAAZ;AACA,KAFD,MAEO;AACN,YAAO,OAAP,GAAiB,WAAjB;AACA;AACD;AACD,UAAO,SAAS,IAAT,EAAe,MAAf,CAAP;AACA,GAVD;AAWA,MAAI,MAAJ,CAAW,eAAX,EAA4B,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AACtD,OAAG,CAAC,MAAJ,EAAY,OAAO,UAAP;AACZ,OAAG,eAAe,IAAf,CAAoB,OAAO,QAA3B,CAAH,EAAyC;AACxC,QAAG,OAAO,WAAP,KAAuB,UAA1B,EAAsC;AACrC,iBAAY,MAAZ;AACA,KAFD,MAEO;AACN,YAAO,QAAP,GAAkB,KAAK,OAAL,CAAa,KAAK,OAAL,CAAa,OAAO,QAApB,CAAb,EAA4C,WAA5C,CAAlB;AACA;AACD;AACD,UAAO,SAAS,IAAT,EAAe,MAAf,CAAP;AACA,GAVD;AAWA,EAvBD;AAwBA,CA3BD","file":"NormalModuleReplacementPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n\r\nvar path = require(\"path\");\r\n\r\nfunction NormalModuleReplacementPlugin(resourceRegExp, newResource) {\r\n\tthis.resourceRegExp = resourceRegExp;\r\n\tthis.newResource = newResource;\r\n}\r\nmodule.exports = NormalModuleReplacementPlugin;\r\nNormalModuleReplacementPlugin.prototype.apply = function(compiler) {\r\n\tvar resourceRegExp = this.resourceRegExp;\r\n\tvar newResource = this.newResource;\r\n\tcompiler.plugin(\"normal-module-factory\", function(nmf) {\r\n\t\tnmf.plugin(\"before-resolve\", function(result, callback) {\r\n\t\t\tif(!result) return callback();\r\n\t\t\tif(resourceRegExp.test(result.request)) {\r\n\t\t\t\tif(typeof newResource === \"function\") {\r\n\t\t\t\t\tnewResource(result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.request = newResource;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn callback(null, result);\r\n\t\t});\r\n\t\tnmf.plugin(\"after-resolve\", function(result, callback) {\r\n\t\t\tif(!result) return callback();\r\n\t\t\tif(resourceRegExp.test(result.resource)) {\r\n\t\t\t\tif(typeof newResource === \"function\") {\r\n\t\t\t\t\tnewResource(result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.resource = path.resolve(path.dirname(result.resource), newResource);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn callback(null, result);\r\n\t\t});\r\n\t});\r\n};\r\n"]}