{"version":3,"sources":["AMDRequireDependenciesBlockParserPlugin.js"],"names":[],"mappings":"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","file":"AMDRequireDependenciesBlockParserPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar AMDRequireItemDependency = require(\"./AMDRequireItemDependency\");\r\nvar AMDRequireArrayDependency = require(\"./AMDRequireArrayDependency\");\r\nvar AMDRequireContextDependency = require(\"./AMDRequireContextDependency\");\r\nvar AMDRequireDependenciesBlock = require(\"./AMDRequireDependenciesBlock\");\r\nvar LocalModuleDependency = require(\"./LocalModuleDependency\");\r\nvar ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\r\nvar LocalModulesHelpers = require(\"./LocalModulesHelpers\");\r\nvar ConstDependency = require(\"./ConstDependency\");\r\nvar getFunctionExpression = require(\"./getFunctionExpression\");\r\n\r\nfunction AMDRequireDependenciesBlockParserPlugin(options) {\r\n\tthis.options = options;\r\n}\r\n\r\nmodule.exports = AMDRequireDependenciesBlockParserPlugin;\r\n\r\nAMDRequireDependenciesBlockParserPlugin.prototype.apply = function(parser) {\r\n\tvar options = this.options;\r\n\tparser.plugin(\"call require\", function(expr) {\r\n\t\tswitch(expr.arguments.length) {\r\n\t\t\tcase 1:\r\n\t\t\t\tvar param = this.evaluateExpression(expr.arguments[0]);\r\n\t\t\t\tvar result;\r\n\t\t\t\tvar dep = new AMDRequireDependenciesBlock(expr, param.range, null, this.state.module, expr.loc);\r\n\t\t\t\tvar old = this.state.current;\r\n\t\t\t\tthis.state.current = dep;\r\n\t\t\t\tthis.inScope([], function() {\r\n\t\t\t\t\tresult = this.applyPluginsBailResult(\"call require:amd:array\", expr, param);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t\tthis.state.current = old;\r\n\t\t\t\tif(!result) return;\r\n\t\t\t\tthis.state.current.addBlock(dep);\r\n\t\t\t\treturn true;\r\n\t\t\tcase 2:\r\n\t\t\t\tvar param = this.evaluateExpression(expr.arguments[0]);\r\n\t\t\t\tvar dep = new AMDRequireDependenciesBlock(expr, param.range, expr.arguments[1].range, this.state.module, expr.loc);\r\n\t\t\t\tdep.loc = expr.loc;\r\n\t\t\t\tvar old = this.state.current;\r\n\t\t\t\tthis.state.current = dep;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar result;\r\n\t\t\t\t\tthis.inScope([], function() {\r\n\t\t\t\t\t\tresult = this.applyPluginsBailResult(\"call require:amd:array\", expr, param);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\tif(!result) return;\r\n\t\t\t\t\tvar fnData = getFunctionExpression(expr.arguments[1]);\r\n\t\t\t\t\tif(fnData) {\r\n\t\t\t\t\t\tthis.inScope(fnData.fn.params.filter(function(i) {\r\n\t\t\t\t\t\t\treturn [\"require\", \"module\", \"exports\"].indexOf(i.name) < 0;\r\n\t\t\t\t\t\t}), function() {\r\n\t\t\t\t\t\t\tif(fnData.fn.body.type === \"BlockStatement\")\r\n\t\t\t\t\t\t\t\tthis.walkStatement(fnData.fn.body);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.walkExpression(fnData.fn.body);\r\n\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\tthis.walkExpressions(fnData.expressions);\r\n\t\t\t\t\t\tif(fnData.needThis === false) {\r\n\t\t\t\t\t\t\t// smaller bundles for simple function expression\r\n\t\t\t\t\t\t\tdep.bindThis = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.walkExpression(expr.arguments[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.state.current = old;\r\n\t\t\t\t\tthis.state.current.addBlock(dep);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require:amd:array\", function(expr, param) {\r\n\t\tif(param.isArray()) {\r\n\t\t\tparam.items.forEach(function(param) {\r\n\t\t\t\tvar result = this.applyPluginsBailResult(\"call require:amd:item\", expr, param);\r\n\t\t\t\tif(result === undefined) {\r\n\t\t\t\t\tthis.applyPluginsBailResult(\"call require:amd:context\", expr, param);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\treturn true;\r\n\t\t} else if(param.isConstArray()) {\r\n\t\t\tvar deps = [];\r\n\t\t\tparam.array.forEach(function(request) {\r\n\t\t\t\tvar dep, localModule;\r\n\t\t\t\tif(request === \"require\") {\r\n\t\t\t\t\tdep = \"__webpack_require__\";\r\n\t\t\t\t} else if([\"exports\", \"module\"].indexOf(request) >= 0) {\r\n\t\t\t\t\tdep = request;\r\n\t\t\t\t} else if(localModule = LocalModulesHelpers.getLocalModule(this.state, request)) { // eslint-disable-line no-cond-assign\r\n\t\t\t\t\tdep = new LocalModuleDependency(localModule);\r\n\t\t\t\t\tdep.loc = expr.loc;\r\n\t\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdep = new AMDRequireItemDependency(request);\r\n\t\t\t\t\tdep.loc = expr.loc;\r\n\t\t\t\t\tdep.optional = !!this.scope.inTry;\r\n\t\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t\t}\r\n\t\t\t\tdeps.push(dep);\r\n\t\t\t}, this);\r\n\t\t\tvar dep = new AMDRequireArrayDependency(deps, param.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tdep.optional = !!this.scope.inTry;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require:amd:item\", function(expr, param) {\r\n\t\tif(param.isConditional()) {\r\n\t\t\tparam.options.forEach(function(param) {\r\n\t\t\t\tvar result = this.applyPluginsBailResult(\"call require:amd:item\", expr, param);\r\n\t\t\t\tif(result === undefined) {\r\n\t\t\t\t\tthis.applyPluginsBailResult(\"call require:amd:context\", expr, param);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\treturn true;\r\n\t\t} else if(param.isString()) {\r\n\t\t\tvar dep, localModule;\r\n\t\t\tif(param.string === \"require\") {\r\n\t\t\t\tdep = new ConstDependency(\"__webpack_require__\", param.string);\r\n\t\t\t} else if([\"exports\", \"module\"].indexOf(param.string) >= 0) {\r\n\t\t\t\tdep = new ConstDependency(param.string, param.range);\r\n\t\t\t} else if(localModule = LocalModulesHelpers.getLocalModule(this.state, param.string)) { // eslint-disable-line no-cond-assign\r\n\t\t\t\tdep = new LocalModuleDependency(localModule, param.range);\r\n\t\t\t} else {\r\n\t\t\t\tdep = new AMDRequireItemDependency(param.string, param.range);\r\n\t\t\t}\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tdep.optional = !!this.scope.inTry;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require:amd:context\", function(expr, param) {\r\n\t\tvar dep = ContextDependencyHelpers.create(AMDRequireContextDependency, param.range, param, expr, options);\r\n\t\tif(!dep) return;\r\n\t\tdep.loc = expr.loc;\r\n\t\tdep.optional = !!this.scope.inTry;\r\n\t\tthis.state.current.addDependency(dep);\r\n\t\treturn true;\r\n\t});\r\n};\r\n"]}