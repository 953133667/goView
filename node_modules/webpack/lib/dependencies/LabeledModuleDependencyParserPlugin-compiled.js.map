{"version":3,"sources":["LabeledModuleDependencyParserPlugin.js"],"names":[],"mappings":"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","file":"LabeledModuleDependencyParserPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar AbstractPlugin = require(\"../AbstractPlugin\");\r\nvar LabeledModuleDependency = require(\"./LabeledModuleDependency\");\r\nvar LabeledExportsDependency = require(\"./LabeledExportsDependency\");\r\n\r\nmodule.exports = AbstractPlugin.create({\r\n\t\"label require\": function(stmt) {\r\n\t\tif(stmt.body.type !== \"ExpressionStatement\") return;\r\n\t\tswitch(stmt.body.expression.type) {\r\n\t\t\tcase \"Literal\":\r\n\t\t\t\tvar param = this.evaluateExpression(stmt.body.expression);\r\n\t\t\t\treturn this.applyPluginsBailResult(\"label require:item\", stmt, param);\r\n\t\t\tcase \"SequenceExpression\":\r\n\t\t\t\tstmt.body.expression.expressions.forEach(function(expression) {\r\n\t\t\t\t\tvar param = this.evaluateExpression(expression);\r\n\t\t\t\t\treturn this.applyPluginsBailResult(\"label require:item\", stmt, param);\r\n\t\t\t\t}, this);\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t\"label require:item\": function(stmt, param) {\r\n\t\tif(param.isString()) {\r\n\t\t\tvar dep = new LabeledModuleDependency(param.string, stmt.range);\r\n\t\t\tdep.loc = stmt.loc;\r\n\t\t\tdep.optional = !!this.scope.inTry;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t\"label exports\": function(stmt) {\r\n\t\tswitch(stmt.body.type) {\r\n\t\t\tcase \"VariableDeclaration\":\r\n\t\t\t\tstmt.body.declarations.forEach(function(decl) {\r\n\t\t\t\t\tif(!decl.init) return;\r\n\t\t\t\t\tvar dep = new LabeledExportsDependency(decl.id.name, decl.init.range[0]);\r\n\t\t\t\t\tdep.loc = stmt.loc;\r\n\t\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t\t\tif(!this.state.module.meta.exports) this.state.module.meta.exports = [];\r\n\t\t\t\t\tthis.state.module.meta.exports.push(decl.id.name);\r\n\t\t\t\t}, this);\r\n\t\t\t\treturn true;\r\n\t\t\tcase \"FunctionDeclaration\":\r\n\t\t\t\tvar name = stmt.body.id.name;\r\n\t\t\t\tvar dep = new LabeledExportsDependency(name, stmt.body.range[0]);\r\n\t\t\t\tdep.loc = stmt.loc;\r\n\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t\tif(!this.state.module.meta.exports) this.state.module.meta.exports = [];\r\n\t\t\t\tthis.state.module.meta.exports.push(name);\r\n\t\t\t\treturn true;\r\n\t\t\tcase \"ExpressionStatement\":\r\n\t\t\t\tif(stmt.body.expression.type === \"Identifier\") {\r\n\t\t\t\t\tvar name = stmt.body.expression.name;\r\n\t\t\t\t\tvar dep = new LabeledExportsDependency(name, stmt.body.expression.range[0]);\r\n\t\t\t\t\tdep.loc = stmt.loc;\r\n\t\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t\t\tif(!this.state.module.meta.exports) this.state.module.meta.exports = [];\r\n\t\t\t\t\tthis.state.module.meta.exports.push(name);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if(stmt.body.expression.type === \"SequenceExpression\") {\r\n\t\t\t\t\tstmt.body.expression.expressions.forEach(function(e) {\r\n\t\t\t\t\t\tif(e.type !== \"Identifier\") return;\r\n\t\t\t\t\t\tvar name = e.name;\r\n\t\t\t\t\t\tvar dep = new LabeledExportsDependency(name, e.range[0]);\r\n\t\t\t\t\t\tdep.loc = stmt.loc;\r\n\t\t\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t\t\t\tif(!this.state.module.meta.exports) this.state.module.meta.exports = [];\r\n\t\t\t\t\t\tthis.state.module.meta.exports.push(name);\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n"]}