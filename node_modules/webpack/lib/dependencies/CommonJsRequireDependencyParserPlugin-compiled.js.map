{"version":3,"sources":["CommonJsRequireDependencyParserPlugin.js"],"names":[],"mappings":"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","file":"CommonJsRequireDependencyParserPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar ConstDependency = require(\"./ConstDependency\");\r\nvar CommonJsRequireDependency = require(\"./CommonJsRequireDependency\");\r\nvar CommonJsRequireContextDependency = require(\"./CommonJsRequireContextDependency\");\r\nvar RequireHeaderDependency = require(\"./RequireHeaderDependency\");\r\nvar LocalModuleDependency = require(\"./LocalModuleDependency\");\r\nvar ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\r\nvar LocalModulesHelpers = require(\"./LocalModulesHelpers\");\r\n\r\nfunction CommonJsRequireDependencyParserPlugin(options) {\r\n\tthis.options = options;\r\n}\r\n\r\nmodule.exports = CommonJsRequireDependencyParserPlugin;\r\n\r\nCommonJsRequireDependencyParserPlugin.prototype.apply = function(parser) {\r\n\tvar options = this.options;\r\n\tparser.plugin(\"expression require.cache\", function(expr) {\r\n\t\tvar dep = new ConstDependency(\"__webpack_require__.c\", expr.range);\r\n\t\tdep.loc = expr.loc;\r\n\t\tthis.state.current.addDependency(dep);\r\n\t\treturn true;\r\n\t});\r\n\tparser.plugin(\"expression require\", function(expr) {\r\n\t\tvar dep = new CommonJsRequireContextDependency(options.unknownContextRequest, options.unknownContextRecursive, options.unknownContextRegExp, expr.range);\r\n\t\tdep.critical = options.unknownContextCritical && \"require function is used in a way in which dependencies cannot be statically extracted\";\r\n\t\tdep.loc = expr.loc;\r\n\t\tdep.optional = !!this.scope.inTry;\r\n\t\tthis.state.current.addDependency(dep);\r\n\t\treturn true;\r\n\t});\r\n\tparser.plugin(\"call require\", function(expr) {\r\n\t\tif(expr.arguments.length !== 1) return;\r\n\t\tvar localModule, dep;\r\n\t\tvar param = this.evaluateExpression(expr.arguments[0]);\r\n\t\tif(param.isConditional()) {\r\n\t\t\tvar isExpression = false;\r\n\t\t\tvar prevLength = this.state.current.dependencies.length;\r\n\t\t\tdep = new RequireHeaderDependency(expr.callee.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\tparam.options.forEach(function(param) {\r\n\t\t\t\tvar result = this.applyPluginsBailResult(\"call require:commonjs:item\", expr, param);\r\n\t\t\t\tif(result === undefined) {\r\n\t\t\t\t\tisExpression = true;\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tif(isExpression) {\r\n\t\t\t\tthis.state.current.dependencies.length = prevLength;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(param.isString() && (localModule = LocalModulesHelpers.getLocalModule(this.state, param.string))) {\r\n\t\t\tdep = new LocalModuleDependency(localModule, expr.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tvar result = this.applyPluginsBailResult(\"call require:commonjs:item\", expr, param);\r\n\t\t\tif(result === undefined) {\r\n\t\t\t\tthis.applyPluginsBailResult(\"call require:commonjs:context\", expr, param);\r\n\t\t\t} else {\r\n\t\t\t\tdep = new RequireHeaderDependency(expr.callee.range);\r\n\t\t\t\tdep.loc = expr.loc;\r\n\t\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require:commonjs:item\", function(expr, param) {\r\n\t\tif(param.isString()) {\r\n\t\t\tvar dep = new CommonJsRequireDependency(param.string, param.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tdep.optional = !!this.scope.inTry;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require:commonjs:context\", function(expr, param) {\r\n\t\tvar dep = ContextDependencyHelpers.create(CommonJsRequireContextDependency, expr.range, param, expr, options);\r\n\t\tif(!dep) return;\r\n\t\tdep.loc = expr.loc;\r\n\t\tdep.optional = !!this.scope.inTry;\r\n\t\tthis.state.current.addDependency(dep);\r\n\t\treturn true;\r\n\t});\r\n};\r\n"]}