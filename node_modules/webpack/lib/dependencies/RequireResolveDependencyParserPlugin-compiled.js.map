{"version":3,"sources":["RequireResolveDependencyParserPlugin.js"],"names":[],"mappings":"AAAA;;;;AAIA,IAAI,2BAA2B,QAAQ,4BAAR,CAA/B;AACA,IAAI,kCAAkC,QAAQ,mCAAR,CAAtC;AACA,IAAI,iCAAiC,QAAQ,kCAAR,CAArC;AACA,IAAI,2BAA2B,QAAQ,4BAAR,CAA/B;;AAEA,SAAS,oCAAT,CAA8C,OAA9C,EAAuD;AACtD,MAAK,OAAL,GAAe,OAAf;AACA;;AAED,OAAO,OAAP,GAAiB,oCAAjB;;AAEA,qCAAqC,SAArC,CAA+C,KAA/C,GAAuD,UAAS,MAAT,EAAiB;AACvE,KAAI,UAAU,KAAK,OAAnB;AACA,QAAO,MAAP,CAAc,sBAAd,EAAsC,UAAS,IAAT,EAAe;AACpD,SAAO,KAAK,sBAAL,CAA4B,4BAA5B,EAA0D,IAA1D,EAAgE,KAAhE,CAAP;AACA,EAFD;AAGA,QAAO,MAAP,CAAc,0BAAd,EAA0C,UAAS,IAAT,EAAe;AACxD,SAAO,KAAK,sBAAL,CAA4B,4BAA5B,EAA0D,IAA1D,EAAgE,IAAhE,CAAP;AACA,EAFD;AAGA,QAAO,MAAP,CAAc,4BAAd,EAA4C,UAAS,IAAT,EAAe,IAAf,EAAqB;AAChE,MAAG,KAAK,SAAL,CAAe,MAAf,KAA0B,CAA7B,EAAgC;AAChC,MAAI,QAAQ,KAAK,kBAAL,CAAwB,KAAK,SAAL,CAAe,CAAf,CAAxB,CAAZ;AACA,MAAI,GAAJ;AACA,MAAG,MAAM,aAAN,EAAH,EAA0B;AACzB,SAAM,OAAN,CAAc,OAAd,CAAsB,UAAS,MAAT,EAAiB;AACtC,QAAI,SAAS,KAAK,sBAAL,CAA4B,iCAA5B,EAA+D,IAA/D,EAAqE,MAArE,EAA6E,IAA7E,CAAb;AACA,QAAG,WAAW,SAAd,EAAyB;AACxB,UAAK,sBAAL,CAA4B,oCAA5B,EAAkE,IAAlE,EAAwE,MAAxE,EAAgF,IAAhF;AACA;AACD,IALD,EAKG,IALH;AAMA,SAAM,IAAI,8BAAJ,CAAmC,KAAK,MAAL,CAAY,KAA/C,CAAN;AACA,OAAI,GAAJ,GAAU,KAAK,GAAf;AACA,QAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,GAAjC;AACA,UAAO,IAAP;AACA,GAXD,MAWO;AACN,OAAI,SAAS,KAAK,sBAAL,CAA4B,iCAA5B,EAA+D,IAA/D,EAAqE,KAArE,EAA4E,IAA5E,CAAb;AACA,OAAG,WAAW,SAAd,EAAyB;AACxB,SAAK,sBAAL,CAA4B,oCAA5B,EAAkE,IAAlE,EAAwE,KAAxE,EAA+E,IAA/E;AACA;AACD,SAAM,IAAI,8BAAJ,CAAmC,KAAK,MAAL,CAAY,KAA/C,CAAN;AACA,OAAI,GAAJ,GAAU,KAAK,GAAf;AACA,QAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,GAAjC;AACA,UAAO,IAAP;AACA;AACD,EAzBD;AA0BA,QAAO,MAAP,CAAc,iCAAd,EAAiD,UAAS,IAAT,EAAe,KAAf,EAAsB,IAAtB,EAA4B;AAC5E,MAAG,MAAM,QAAN,EAAH,EAAqB;AACpB,OAAI,MAAM,IAAI,wBAAJ,CAA6B,MAAM,MAAnC,EAA2C,MAAM,KAAjD,CAAV;AACA,OAAI,GAAJ,GAAU,KAAK,GAAf;AACA,OAAI,QAAJ,GAAe,CAAC,CAAC,KAAK,KAAL,CAAW,KAA5B;AACA,OAAI,IAAJ,GAAW,IAAX;AACA,QAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,GAAjC;AACA,UAAO,IAAP;AACA;AACD,EATD;AAUA,QAAO,MAAP,CAAc,oCAAd,EAAoD,UAAS,IAAT,EAAe,KAAf,EAAsB,IAAtB,EAA4B;AAC/E,MAAI,MAAM,yBAAyB,MAAzB,CAAgC,+BAAhC,EAAiE,MAAM,KAAvE,EAA8E,KAA9E,EAAqF,IAArF,EAA2F,OAA3F,CAAV;AACA,MAAG,CAAC,GAAJ,EAAS;AACT,MAAI,GAAJ,GAAU,KAAK,GAAf;AACA,MAAI,QAAJ,GAAe,CAAC,CAAC,KAAK,KAAL,CAAW,KAA5B;AACA,MAAI,IAAJ,GAAW,IAAX;AACA,OAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,GAAjC;AACA,SAAO,IAAP;AACA,EARD;AASA,CArDD","file":"RequireResolveDependencyParserPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar RequireResolveDependency = require(\"./RequireResolveDependency\");\r\nvar RequireResolveContextDependency = require(\"./RequireResolveContextDependency\");\r\nvar RequireResolveHeaderDependency = require(\"./RequireResolveHeaderDependency\");\r\nvar ContextDependencyHelpers = require(\"./ContextDependencyHelpers\");\r\n\r\nfunction RequireResolveDependencyParserPlugin(options) {\r\n\tthis.options = options;\r\n}\r\n\r\nmodule.exports = RequireResolveDependencyParserPlugin;\r\n\r\nRequireResolveDependencyParserPlugin.prototype.apply = function(parser) {\r\n\tvar options = this.options;\r\n\tparser.plugin(\"call require.resolve\", function(expr) {\r\n\t\treturn this.applyPluginsBailResult(\"call require.resolve(Weak)\", expr, false);\r\n\t});\r\n\tparser.plugin(\"call require.resolveWeak\", function(expr) {\r\n\t\treturn this.applyPluginsBailResult(\"call require.resolve(Weak)\", expr, true);\r\n\t});\r\n\tparser.plugin(\"call require.resolve(Weak)\", function(expr, weak) {\r\n\t\tif(expr.arguments.length !== 1) return;\r\n\t\tvar param = this.evaluateExpression(expr.arguments[0]);\r\n\t\tvar dep;\r\n\t\tif(param.isConditional()) {\r\n\t\t\tparam.options.forEach(function(option) {\r\n\t\t\t\tvar result = this.applyPluginsBailResult(\"call require.resolve(Weak):item\", expr, option, weak);\r\n\t\t\t\tif(result === undefined) {\r\n\t\t\t\t\tthis.applyPluginsBailResult(\"call require.resolve(Weak):context\", expr, option, weak);\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tdep = new RequireResolveHeaderDependency(expr.callee.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tvar result = this.applyPluginsBailResult(\"call require.resolve(Weak):item\", expr, param, weak);\r\n\t\t\tif(result === undefined) {\r\n\t\t\t\tthis.applyPluginsBailResult(\"call require.resolve(Weak):context\", expr, param, weak);\r\n\t\t\t}\r\n\t\t\tdep = new RequireResolveHeaderDependency(expr.callee.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require.resolve(Weak):item\", function(expr, param, weak) {\r\n\t\tif(param.isString()) {\r\n\t\t\tvar dep = new RequireResolveDependency(param.string, param.range);\r\n\t\t\tdep.loc = expr.loc;\r\n\t\t\tdep.optional = !!this.scope.inTry;\r\n\t\t\tdep.weak = weak;\r\n\t\t\tthis.state.current.addDependency(dep);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tparser.plugin(\"call require.resolve(Weak):context\", function(expr, param, weak) {\r\n\t\tvar dep = ContextDependencyHelpers.create(RequireResolveContextDependency, param.range, param, expr, options);\r\n\t\tif(!dep) return;\r\n\t\tdep.loc = expr.loc;\r\n\t\tdep.optional = !!this.scope.inTry;\r\n\t\tdep.weak = weak;\r\n\t\tthis.state.current.addDependency(dep);\r\n\t\treturn true;\r\n\t});\r\n};\r\n"]}