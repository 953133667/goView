{"version":3,"sources":["RemoveParentModulesPlugin.js"],"names":[],"mappings":"AAAA;;;;AAIA,SAAS,SAAT,CAAmB,KAAnB,EAA0B,MAA1B,EAAkC,aAAlC,EAAiD;AAChD,KAAG,MAAM,OAAN,CAAc,OAAd,CAAsB,MAAtB,KAAiC,CAApC,EAAuC,OAAO,CAAC,KAAD,CAAP;AACvC,KAAG,MAAM,KAAT,EAAgB,OAAO,KAAP;AAChB,QAAO,cAAc,MAAM,OAAN,CAAc,MAAd,CAAqB,UAAS,CAAT,EAAY;AACrD,SAAO,cAAc,OAAd,CAAsB,CAAtB,IAA2B,CAAlC;AACA,EAFoB,CAAd,EAEH,MAFG,EAEK,aAFL,CAAP;AAGA;;AAED,SAAS,aAAT,CAAuB,UAAvB,EAAmC,MAAnC,EAA2C,aAA3C,EAA0D;AACzD,KAAG,CAAC,aAAJ,EAAmB,gBAAgB,EAAhB;AACnB,KAAI,SAAS,EAAb;AACA,MAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,WAAW,MAA9B,EAAsC,GAAtC,EAA2C;AAC1C,gBAAc,IAAd,CAAmB,WAAW,CAAX,CAAnB;AACA,MAAI,YAAY,UAAU,WAAW,CAAX,CAAV,EAAyB,MAAzB,EAAiC,aAAjC,CAAhB;AACA,MAAG,CAAC,SAAJ,EAAe,OAAO,KAAP;AACf,WAAS,MAAT,EAAiB,SAAjB;AACA;AACD,QAAO,MAAP;AACA;;AAED,SAAS,QAAT,CAAkB,GAAlB,EAAuB,KAAvB,EAA8B;AAC7B,OAAM,OAAN,CAAc,UAAS,IAAT,EAAe;AAC5B,MAAG,IAAI,OAAJ,CAAY,IAAZ,IAAoB,CAAvB,EACC,IAAI,IAAJ,CAAS,IAAT;AACD,EAHD;AAIA;;AAED,SAAS,yBAAT,GAAqC,CAAE;AACvC,OAAO,OAAP,GAAiB,yBAAjB;;AAEA,0BAA0B,SAA1B,CAAoC,KAApC,GAA4C,UAAS,QAAT,EAAmB;AAC9D,UAAS,MAAT,CAAgB,aAAhB,EAA+B,UAAS,WAAT,EAAsB;AACpD,cAAY,MAAZ,CAAmB,CAAC,iBAAD,EAAoB,2BAApB,CAAnB,EAAqE,UAAS,MAAT,EAAiB;AACrF,UAAO,OAAP,CAAe,UAAS,KAAT,EAAgB;AAC9B,UAAM,OAAN,CAAc,KAAd,GAAsB,OAAtB,CAA8B,UAAS,MAAT,EAAiB;AAC9C,SAAG,MAAM,KAAT,EAAgB;AAChB,SAAI,yBAAyB,cAAc,MAAM,OAApB,EAA6B,MAA7B,CAA7B;AACA,SAAG,sBAAH,EAA2B;AAC1B,aAAO,qBAAP,CAA6B,KAA7B,EAAoC,sBAApC;AACA,YAAM,YAAN,CAAmB,MAAnB;AACA;AACD,KAPD;AAQA,IATD;AAUA,GAXD;AAYA,EAbD;AAcA,CAfD","file":"RemoveParentModulesPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction hasModule(chunk, module, checkedChunks) {\r\n\tif(chunk.modules.indexOf(module) >= 0) return [chunk];\r\n\tif(chunk.entry) return false;\r\n\treturn allHaveModule(chunk.parents.filter(function(c) {\r\n\t\treturn checkedChunks.indexOf(c) < 0;\r\n\t}), module, checkedChunks);\r\n}\r\n\r\nfunction allHaveModule(someChunks, module, checkedChunks) {\r\n\tif(!checkedChunks) checkedChunks = [];\r\n\tvar chunks = [];\r\n\tfor(var i = 0; i < someChunks.length; i++) {\r\n\t\tcheckedChunks.push(someChunks[i]);\r\n\t\tvar subChunks = hasModule(someChunks[i], module, checkedChunks);\r\n\t\tif(!subChunks) return false;\r\n\t\taddToSet(chunks, subChunks);\r\n\t}\r\n\treturn chunks;\r\n}\r\n\r\nfunction addToSet(set, items) {\r\n\titems.forEach(function(item) {\r\n\t\tif(set.indexOf(item) < 0)\r\n\t\t\tset.push(item);\r\n\t});\r\n}\r\n\r\nfunction RemoveParentModulesPlugin() {}\r\nmodule.exports = RemoveParentModulesPlugin;\r\n\r\nRemoveParentModulesPlugin.prototype.apply = function(compiler) {\r\n\tcompiler.plugin(\"compilation\", function(compilation) {\r\n\t\tcompilation.plugin([\"optimize-chunks\", \"optimize-extracted-chunks\"], function(chunks) {\r\n\t\t\tchunks.forEach(function(chunk) {\r\n\t\t\t\tchunk.modules.slice().forEach(function(module) {\r\n\t\t\t\t\tif(chunk.entry) return;\r\n\t\t\t\t\tvar parentChunksWithModule = allHaveModule(chunk.parents, module);\r\n\t\t\t\t\tif(parentChunksWithModule) {\r\n\t\t\t\t\t\tmodule.rewriteChunkInReasons(chunk, parentChunksWithModule);\r\n\t\t\t\t\t\tchunk.removeModule(module);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n};\r\n"]}