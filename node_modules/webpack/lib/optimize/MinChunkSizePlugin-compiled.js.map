{"version":3,"sources":["MinChunkSizePlugin.js"],"names":[],"mappings":"AAAA;;;;AAIA,SAAS,kBAAT,CAA4B,OAA5B,EAAqC;AACpC,KAAG,OAAO,OAAP,KAAmB,QAAnB,IAA+B,MAAM,OAAN,CAAc,OAAd,CAAlC,EAA0D;AACzD,QAAM,IAAI,KAAJ,CAAU,0HAAV,CAAN;AACA;AACD,MAAK,OAAL,GAAe,OAAf;AACA;AACD,OAAO,OAAP,GAAiB,kBAAjB;;AAEA,mBAAmB,SAAnB,CAA6B,KAA7B,GAAqC,UAAS,QAAT,EAAmB;AACvD,KAAI,UAAU,KAAK,OAAnB;AACA,KAAI,eAAe,QAAQ,YAA3B;AACA,UAAS,MAAT,CAAgB,aAAhB,EAA+B,UAAS,WAAT,EAAsB;AACpD,cAAY,MAAZ,CAAmB,iBAAnB,EAAsC,UAAS,MAAT,EAAiB;;AAEtD,OAAI,eAAe,EAAnB;AACA,UAAO,OAAP,CAAe,UAAS,CAAT,EAAY,GAAZ,EAAiB;AAC/B,SAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,GAAnB,EAAwB,GAAxB,EAA6B;AAC5B,SAAI,IAAI,OAAO,CAAP,CAAR;AACA,kBAAa,IAAb,CAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB;AACA;AACD,IALD;;AAOA,OAAI,eAAe;AAClB,mBAAe,CADG;AAElB,6BAAyB;AAFP,IAAnB;AAIA,kBAAe,aAAa,MAAb,CAAoB,UAAS,IAAT,EAAe;AACjD,WAAO,KAAK,CAAL,EAAQ,IAAR,CAAa,YAAb,IAA6B,YAA7B,IAA6C,KAAK,CAAL,EAAQ,IAAR,CAAa,YAAb,IAA6B,YAAjF;AACA,IAFc,CAAf;;AAIA,gBAAa,OAAb,CAAqB,UAAS,IAAT,EAAe;AACnC,QAAI,IAAI,KAAK,CAAL,EAAQ,IAAR,CAAa,OAAb,CAAR;AACA,QAAI,IAAI,KAAK,CAAL,EAAQ,IAAR,CAAa,OAAb,CAAR;AACA,QAAI,KAAK,KAAK,CAAL,EAAQ,cAAR,CAAuB,KAAK,CAAL,CAAvB,EAAgC,OAAhC,CAAT;AACA,SAAK,OAAL,CAAa,IAAI,CAAJ,GAAQ,EAArB,EAAyB,EAAzB;AACA,IALD;;AAOA,kBAAe,aAAa,MAAb,CAAoB,UAAS,IAAT,EAAe;AACjD,WAAO,KAAK,CAAL,MAAY,KAAnB;AACA,IAFc,CAAf;;AAIA,OAAG,aAAa,MAAb,KAAwB,CAA3B,EAA8B;;AAE9B,gBAAa,IAAb,CAAkB,UAAS,CAAT,EAAY,CAAZ,EAAe;AAChC,QAAI,OAAO,EAAE,CAAF,IAAO,EAAE,CAAF,CAAlB;AACA,QAAG,SAAS,CAAZ,EAAe,OAAO,IAAP;AACf,WAAO,EAAE,CAAF,IAAO,EAAE,CAAF,CAAd;AACA,IAJD;;AAMA,OAAI,OAAO,aAAa,CAAb,CAAX;;AAEA,QAAK,CAAL,EAAQ,SAAR,CAAkB,KAAK,CAAL,CAAlB,EAA2B,UAA3B;AACA,UAAO,MAAP,CAAc,OAAO,OAAP,CAAe,KAAK,CAAL,CAAf,CAAd,EAAuC,CAAvC;AACA,QAAK,mBAAL;AACA,GA1CD;AA2CA,EA5CD;AA6CA,CAhDD","file":"MinChunkSizePlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction MinChunkSizePlugin(options) {\r\n\tif(typeof options !== \"object\" || Array.isArray(options)) {\r\n\t\tthrow new Error(\"Argument should be an options object.\\nFor more info on options, see https://webpack.github.io/docs/list-of-plugins.html\");\r\n\t}\r\n\tthis.options = options;\r\n}\r\nmodule.exports = MinChunkSizePlugin;\r\n\r\nMinChunkSizePlugin.prototype.apply = function(compiler) {\r\n\tvar options = this.options;\r\n\tvar minChunkSize = options.minChunkSize;\r\n\tcompiler.plugin(\"compilation\", function(compilation) {\r\n\t\tcompilation.plugin(\"optimize-chunks\", function(chunks) {\r\n\r\n\t\t\tvar combinations = [];\r\n\t\t\tchunks.forEach(function(a, idx) {\r\n\t\t\t\tfor(var i = 0; i < idx; i++) {\r\n\t\t\t\t\tvar b = chunks[i];\r\n\t\t\t\t\tcombinations.push([b, a]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar equalOptions = {\r\n\t\t\t\tchunkOverhead: 1,\r\n\t\t\t\tentryChunkMultiplicator: 1\r\n\t\t\t};\r\n\t\t\tcombinations = combinations.filter(function(pair) {\r\n\t\t\t\treturn pair[0].size(equalOptions) < minChunkSize || pair[1].size(equalOptions) < minChunkSize;\r\n\t\t\t});\r\n\r\n\t\t\tcombinations.forEach(function(pair) {\r\n\t\t\t\tvar a = pair[0].size(options);\r\n\t\t\t\tvar b = pair[1].size(options);\r\n\t\t\t\tvar ab = pair[0].integratedSize(pair[1], options);\r\n\t\t\t\tpair.unshift(a + b - ab, ab);\r\n\t\t\t});\r\n\r\n\t\t\tcombinations = combinations.filter(function(pair) {\r\n\t\t\t\treturn pair[1] !== false;\r\n\t\t\t});\r\n\r\n\t\t\tif(combinations.length === 0) return;\r\n\r\n\t\t\tcombinations.sort(function(a, b) {\r\n\t\t\t\tvar diff = b[0] - a[0];\r\n\t\t\t\tif(diff !== 0) return diff;\r\n\t\t\t\treturn a[1] - b[1];\r\n\t\t\t});\r\n\r\n\t\t\tvar pair = combinations[0];\r\n\r\n\t\t\tpair[2].integrate(pair[3], \"min-size\");\r\n\t\t\tchunks.splice(chunks.indexOf(pair[3]), 1);\r\n\t\t\tthis.restartApplyPlugins();\r\n\t\t});\r\n\t});\r\n};\r\n"]}