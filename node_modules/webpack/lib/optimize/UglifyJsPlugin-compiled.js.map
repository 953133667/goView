{"version":3,"sources":["UglifyJsPlugin.js"],"names":[],"mappings":"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","file":"UglifyJsPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar SourceMapConsumer = require(\"webpack-core/lib/source-map\").SourceMapConsumer;\r\nvar SourceMapSource = require(\"webpack-core/lib/SourceMapSource\");\r\nvar RawSource = require(\"webpack-core/lib/RawSource\");\r\nvar RequestShortener = require(\"../RequestShortener\");\r\nvar ModuleFilenameHelpers = require(\"../ModuleFilenameHelpers\");\r\nvar uglify = require(\"uglify-js\");\r\n\r\nfunction UglifyJsPlugin(options) {\r\n\tif(typeof options !== \"object\") options = {};\r\n\tif(typeof options.compressor !== \"undefined\") {\r\n\t\toptions.compress = options.compressor;\r\n\t}\r\n\tthis.options = options;\r\n}\r\nmodule.exports = UglifyJsPlugin;\r\n\r\nUglifyJsPlugin.prototype.apply = function(compiler) {\r\n\tvar options = this.options;\r\n\toptions.test = options.test || /\\.js($|\\?)/i;\r\n\r\n\tvar requestShortener = new RequestShortener(compiler.context);\r\n\tcompiler.plugin(\"compilation\", function(compilation) {\r\n\t\tif(options.sourceMap !== false) {\r\n\t\t\tcompilation.plugin(\"build-module\", function(module) {\r\n\t\t\t\t// to get detailed location info about errors\r\n\t\t\t\tmodule.useSourceMap = true;\r\n\t\t\t});\r\n\t\t}\r\n\t\tcompilation.plugin(\"optimize-chunk-assets\", function(chunks, callback) {\r\n\t\t\tvar files = [];\r\n\t\t\tchunks.forEach(function(chunk) {\r\n\t\t\t\tchunk.files.forEach(function(file) {\r\n\t\t\t\t\tfiles.push(file);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tcompilation.additionalChunkAssets.forEach(function(file) {\r\n\t\t\t\tfiles.push(file);\r\n\t\t\t});\r\n\t\t\tfiles = files.filter(ModuleFilenameHelpers.matchObject.bind(undefined, options));\r\n\t\t\tfiles.forEach(function(file) {\r\n\t\t\t\tvar oldWarnFunction = uglify.AST_Node.warn_function;\r\n\t\t\t\tvar warnings = [];\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar asset = compilation.assets[file];\r\n\t\t\t\t\tif(asset.__UglifyJsPlugin) {\r\n\t\t\t\t\t\tcompilation.assets[file] = asset.__UglifyJsPlugin;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(options.sourceMap !== false) {\r\n\t\t\t\t\t\tif(asset.sourceAndMap) {\r\n\t\t\t\t\t\t\tvar sourceAndMap = asset.sourceAndMap();\r\n\t\t\t\t\t\t\tvar inputSourceMap = sourceAndMap.map;\r\n\t\t\t\t\t\t\tvar input = sourceAndMap.source;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar inputSourceMap = asset.map();\r\n\t\t\t\t\t\t\tvar input = asset.source();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar sourceMap = new SourceMapConsumer(inputSourceMap);\r\n\t\t\t\t\t\tuglify.AST_Node.warn_function = function(warning) { // eslint-disable-line camelcase\r\n\t\t\t\t\t\t\tvar match = /\\[.+:([0-9]+),([0-9]+)\\]/.exec(warning);\r\n\t\t\t\t\t\t\tvar line = +match[1];\r\n\t\t\t\t\t\t\tvar column = +match[2];\r\n\t\t\t\t\t\t\tvar original = sourceMap.originalPositionFor({\r\n\t\t\t\t\t\t\t\tline: line,\r\n\t\t\t\t\t\t\t\tcolumn: column\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif(!original || !original.source || original.source === file) return;\r\n\t\t\t\t\t\t\twarnings.push(warning.replace(/\\[.+:([0-9]+),([0-9]+)\\]/, \"\") +\r\n\t\t\t\t\t\t\t\t\"[\" + requestShortener.shorten(original.source) + \":\" + original.line + \",\" + original.column + \"]\");\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar input = asset.source();\r\n\t\t\t\t\t\tuglify.AST_Node.warn_function = function(warning) { // eslint-disable-line camelcase\r\n\t\t\t\t\t\t\twarnings.push(warning);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuglify.base54.reset();\r\n\t\t\t\t\tvar ast = uglify.parse(input, {\r\n\t\t\t\t\t\tfilename: file\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(options.compress !== false) {\r\n\t\t\t\t\t\tast.figure_out_scope();\r\n\t\t\t\t\t\tvar compress = uglify.Compressor(options.compress); // eslint-disable-line new-cap\r\n\t\t\t\t\t\tast = ast.transform(compress);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(options.mangle !== false) {\r\n\t\t\t\t\t\tast.figure_out_scope();\r\n\t\t\t\t\t\tast.compute_char_frequency(options.mangle || {});\r\n\t\t\t\t\t\tast.mangle_names(options.mangle || {});\r\n\t\t\t\t\t\tif(options.mangle && options.mangle.props) {\r\n\t\t\t\t\t\t\tuglify.mangle_properties(ast, options.mangle.props);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar output = {};\r\n\t\t\t\t\toutput.comments = Object.prototype.hasOwnProperty.call(options, \"comments\") ? options.comments : /^\\**!|@preserve|@license/;\r\n\t\t\t\t\toutput.beautify = options.beautify;\r\n\t\t\t\t\tfor(var k in options.output) {\r\n\t\t\t\t\t\toutput[k] = options.output[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(options.sourceMap !== false) {\r\n\t\t\t\t\t\tvar map = uglify.SourceMap({ // eslint-disable-line new-cap\r\n\t\t\t\t\t\t\tfile: file,\r\n\t\t\t\t\t\t\troot: \"\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\toutput.source_map = map; // eslint-disable-line camelcase\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar stream = uglify.OutputStream(output); // eslint-disable-line new-cap\r\n\t\t\t\t\tast.print(stream);\r\n\t\t\t\t\tif(map) map = map + \"\";\r\n\t\t\t\t\tstream = stream + \"\";\r\n\t\t\t\t\tasset.__UglifyJsPlugin = compilation.assets[file] = (map ?\r\n\t\t\t\t\t\tnew SourceMapSource(stream, file, JSON.parse(map), input, inputSourceMap) :\r\n\t\t\t\t\t\tnew RawSource(stream));\r\n\t\t\t\t\tif(warnings.length > 0) {\r\n\t\t\t\t\t\tcompilation.warnings.push(new Error(file + \" from UglifyJs\\n\" + warnings.join(\"\\n\")));\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\tif(err.line) {\r\n\t\t\t\t\t\tvar original = sourceMap && sourceMap.originalPositionFor({\r\n\t\t\t\t\t\t\tline: err.line,\r\n\t\t\t\t\t\t\tcolumn: err.col\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(original && original.source) {\r\n\t\t\t\t\t\t\tcompilation.errors.push(new Error(file + \" from UglifyJs\\n\" + err.message + \" [\" + requestShortener.shorten(original.source) + \":\" + original.line + \",\" + original.column + \"]\"));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcompilation.errors.push(new Error(file + \" from UglifyJs\\n\" + err.message + \" [\" + file + \":\" + err.line + \",\" + err.col + \"]\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if(err.msg) {\r\n\t\t\t\t\t\tcompilation.errors.push(new Error(file + \" from UglifyJs\\n\" + err.msg));\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tcompilation.errors.push(new Error(file + \" from UglifyJs\\n\" + err.stack));\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tuglify.AST_Node.warn_function = oldWarnFunction; // eslint-disable-line camelcase\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcallback();\r\n\t\t});\r\n\t\tcompilation.plugin(\"normal-module-loader\", function(context) {\r\n\t\t\tcontext.minimize = true;\r\n\t\t});\r\n\t});\r\n};\r\n"]}