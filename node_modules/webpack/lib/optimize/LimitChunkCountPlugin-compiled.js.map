{"version":3,"sources":["LimitChunkCountPlugin.js"],"names":[],"mappings":"AAAA;;;;AAIA,SAAS,qBAAT,CAA+B,OAA/B,EAAwC;AACvC,KAAG,YAAY,SAAZ,IAAyB,OAAO,OAAP,KAAmB,QAA5C,IAAwD,MAAM,OAAN,CAAc,OAAd,CAA3D,EAAmF;AAClF,QAAM,IAAI,KAAJ,CAAU,0HAAV,CAAN;AACA;AACD,MAAK,OAAL,GAAe,WAAW,EAA1B;AACA;AACD,OAAO,OAAP,GAAiB,qBAAjB;;AAEA,sBAAsB,SAAtB,CAAgC,KAAhC,GAAwC,UAAS,QAAT,EAAmB;AAC1D,KAAI,UAAU,KAAK,OAAnB;AACA,UAAS,MAAT,CAAgB,aAAhB,EAA+B,UAAS,WAAT,EAAsB;AACpD,cAAY,MAAZ,CAAmB,iBAAnB,EAAsC,UAAS,MAAT,EAAiB;AACtD,OAAI,YAAY,QAAQ,SAAxB;AACA,OAAG,CAAC,SAAJ,EAAe;AACf,OAAG,YAAY,CAAf,EAAkB;AAClB,OAAG,OAAO,MAAP,IAAiB,SAApB,EAA+B;;AAE/B,OAAG,OAAO,MAAP,GAAgB,SAAnB,EAA8B;AAC7B,QAAI,eAAe,EAAnB;AACA,WAAO,OAAP,CAAe,UAAS,CAAT,EAAY,GAAZ,EAAiB;AAC/B,UAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,GAAnB,EAAwB,GAAxB,EAA6B;AAC5B,UAAI,IAAI,OAAO,CAAP,CAAR;AACA,mBAAa,IAAb,CAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB;AACA;AACD,KALD;;AAOA,iBAAa,OAAb,CAAqB,UAAS,IAAT,EAAe;AACnC,SAAI,IAAI,KAAK,CAAL,EAAQ,IAAR,CAAa,OAAb,CAAR;AACA,SAAI,IAAI,KAAK,CAAL,EAAQ,IAAR,CAAa,OAAb,CAAR;AACA,SAAI,KAAK,KAAK,CAAL,EAAQ,cAAR,CAAuB,KAAK,CAAL,CAAvB,EAAgC,OAAhC,CAAT;AACA,UAAK,OAAL,CAAa,IAAI,CAAJ,GAAQ,EAArB,EAAyB,EAAzB;AACA,KALD;AAMA,mBAAe,aAAa,MAAb,CAAoB,UAAS,IAAT,EAAe;AACjD,YAAO,KAAK,CAAL,MAAY,KAAnB;AACA,KAFc,CAAf;AAGA,iBAAa,IAAb,CAAkB,UAAS,CAAT,EAAY,CAAZ,EAAe;AAChC,SAAI,OAAO,EAAE,CAAF,IAAO,EAAE,CAAF,CAAlB;AACA,SAAG,SAAS,CAAZ,EAAe,OAAO,IAAP;AACf,YAAO,EAAE,CAAF,IAAO,EAAE,CAAF,CAAd;AACA,KAJD;;AAMA,QAAI,OAAO,aAAa,CAAb,CAAX;;AAEA,QAAG,QAAQ,KAAK,CAAL,EAAQ,SAAR,CAAkB,KAAK,CAAL,CAAlB,EAA2B,OAA3B,CAAX,EAAgD;AAC/C,YAAO,MAAP,CAAc,OAAO,OAAP,CAAe,KAAK,CAAL,CAAf,CAAd,EAAuC,CAAvC;AACA,UAAK,mBAAL;AACA;AACD;AACD,GArCD;AAsCA,EAvCD;AAwCA,CA1CD","file":"LimitChunkCountPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction LimitChunkCountPlugin(options) {\r\n\tif(options !== undefined && typeof options !== \"object\" || Array.isArray(options)) {\r\n\t\tthrow new Error(\"Argument should be an options object.\\nFor more info on options, see https://webpack.github.io/docs/list-of-plugins.html\");\r\n\t}\r\n\tthis.options = options || {};\r\n}\r\nmodule.exports = LimitChunkCountPlugin;\r\n\r\nLimitChunkCountPlugin.prototype.apply = function(compiler) {\r\n\tvar options = this.options;\r\n\tcompiler.plugin(\"compilation\", function(compilation) {\r\n\t\tcompilation.plugin(\"optimize-chunks\", function(chunks) {\r\n\t\t\tvar maxChunks = options.maxChunks;\r\n\t\t\tif(!maxChunks) return;\r\n\t\t\tif(maxChunks < 1) return;\r\n\t\t\tif(chunks.length <= maxChunks) return;\r\n\r\n\t\t\tif(chunks.length > maxChunks) {\r\n\t\t\t\tvar combinations = [];\r\n\t\t\t\tchunks.forEach(function(a, idx) {\r\n\t\t\t\t\tfor(var i = 0; i < idx; i++) {\r\n\t\t\t\t\t\tvar b = chunks[i];\r\n\t\t\t\t\t\tcombinations.push([b, a]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcombinations.forEach(function(pair) {\r\n\t\t\t\t\tvar a = pair[0].size(options);\r\n\t\t\t\t\tvar b = pair[1].size(options);\r\n\t\t\t\t\tvar ab = pair[0].integratedSize(pair[1], options);\r\n\t\t\t\t\tpair.unshift(a + b - ab, ab);\r\n\t\t\t\t});\r\n\t\t\t\tcombinations = combinations.filter(function(pair) {\r\n\t\t\t\t\treturn pair[1] !== false;\r\n\t\t\t\t});\r\n\t\t\t\tcombinations.sort(function(a, b) {\r\n\t\t\t\t\tvar diff = b[0] - a[0];\r\n\t\t\t\t\tif(diff !== 0) return diff;\r\n\t\t\t\t\treturn a[1] - b[1];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar pair = combinations[0];\r\n\r\n\t\t\t\tif(pair && pair[2].integrate(pair[3], \"limit\")) {\r\n\t\t\t\t\tchunks.splice(chunks.indexOf(pair[3]), 1);\r\n\t\t\t\t\tthis.restartApplyPlugins();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n};\r\n"]}