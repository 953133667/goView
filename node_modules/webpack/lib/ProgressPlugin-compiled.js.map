{"version":3,"sources":["ProgressPlugin.js"],"names":[],"mappings":"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","file":"ProgressPlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction ProgressPlugin(handler) {\r\n\tthis.handler = handler;\r\n}\r\nmodule.exports = ProgressPlugin;\r\n\r\nProgressPlugin.prototype.apply = function(compiler) {\r\n\tvar handler = this.handler;\r\n\tif(compiler.compilers) {\r\n\t\tvar states = new Array(compiler.compilers.length);\r\n\t\tcompiler.compilers.forEach(function(compiler, idx) {\r\n\t\t\tcompiler.apply(new ProgressPlugin(function(p, msg) {\r\n\t\t\t\tstates[idx] = [p, msg];\r\n\t\t\t\thandler(states.map(function(state) {\r\n\t\t\t\t\treturn state && state[0] || 0;\r\n\t\t\t\t}).reduce(function(a, b) {\r\n\t\t\t\t\treturn a + b;\r\n\t\t\t\t}) / states.length, states.map(function(state) {\r\n\t\t\t\t\treturn state && state[1];\r\n\t\t\t\t}).filter(Boolean).join(\" | \"));\r\n\t\t\t}));\r\n\t\t});\r\n\t} else {\r\n\t\tvar lastModulesCount = 0;\r\n\t\tvar moduleCount = 1;\r\n\t\tvar doneModules = 0;\r\n\r\n\t\tfunction update() {\r\n\t\t\thandler(0.1 + (doneModules / Math.max(lastModulesCount, moduleCount)) * 0.6, doneModules + \"/\" + moduleCount + \" build modules\");\r\n\t\t}\r\n\t\tcompiler.plugin(\"compilation\", function(compilation) {\r\n\t\t\tif(compilation.compiler.isChild()) return;\r\n\t\t\tlastModulesCount = moduleCount;\r\n\t\t\tmoduleCount = 0;\r\n\t\t\tdoneModules = 0;\r\n\t\t\thandler(0, \"compile\");\r\n\t\t\tcompilation.plugin(\"build-module\", function() {\r\n\t\t\t\tmoduleCount++;\r\n\t\t\t\tupdate();\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"succeed-module\", function() {\r\n\t\t\t\tdoneModules++;\r\n\t\t\t\tupdate();\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"seal\", function() {\r\n\t\t\t\thandler(0.71, \"seal\");\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"optimize\", function() {\r\n\t\t\t\thandler(0.73, \"optimize\");\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"before-hash\", function() {\r\n\t\t\t\thandler(0.75, \"hashing\");\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"before-chunk-assets\", function() {\r\n\t\t\t\thandler(0.76, \"create chunk assets\");\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"additional-chunk-assets\", function() {\r\n\t\t\t\thandler(0.78, \"additional chunk assets\");\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"optimize-chunk-assets\", function(chunks, callback) {\r\n\t\t\t\thandler(0.8, \"optimize chunk assets\");\r\n\t\t\t\tcallback();\r\n\t\t\t});\r\n\t\t\tcompilation.plugin(\"optimize-assets\", function(assets, callback) {\r\n\t\t\t\thandler(0.9, \"optimize assets\");\r\n\t\t\t\tcallback();\r\n\t\t\t});\r\n\t\t});\r\n\t\tcompiler.plugin(\"emit\", function(compilation, callback) {\r\n\t\t\thandler(0.95, \"emit\");\r\n\t\t\tcallback();\r\n\t\t});\r\n\t\tcompiler.plugin(\"done\", function() {\r\n\t\t\thandler(1, \"\");\r\n\t\t});\r\n\t}\r\n};\r\n"]}