{"version":3,"sources":["LibraryTemplatePlugin.js"],"names":[],"mappings":"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","file":"LibraryTemplatePlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar SetVarMainTemplatePlugin = require(\"./SetVarMainTemplatePlugin\");\r\n\r\nfunction accessorToObjectAccess(accessor) {\r\n\treturn accessor.map(function(a) {\r\n\t\treturn \"[\" + JSON.stringify(a) + \"]\";\r\n\t}).join(\"\");\r\n}\r\n\r\nfunction accessorAccess(base, accessor, joinWith) {\r\n\taccessor = [].concat(accessor);\r\n\treturn accessor.map(function(a, idx) {\r\n\t\ta = base ?\r\n\t\t\tbase + accessorToObjectAccess(accessor.slice(0, idx + 1)) :\r\n\t\t\taccessor[0] + accessorToObjectAccess(accessor.slice(1, idx + 1));\r\n\t\tif(idx === accessor.length - 1) return a;\r\n\t\tif(idx === 0 && typeof base === \"undefined\") return a + \" = typeof \" + a + \" === \\\"object\\\" ? \" + a + \" : {}\";\r\n\t\treturn a + \" = \" + a + \" || {}\";\r\n\t}).join(joinWith || \"; \");\r\n}\r\n\r\nfunction LibraryTemplatePlugin(name, target, umdNamedDefine) {\r\n\tthis.name = name;\r\n\tthis.target = target;\r\n\tthis.umdNamedDefine = umdNamedDefine;\r\n}\r\nmodule.exports = LibraryTemplatePlugin;\r\nLibraryTemplatePlugin.prototype.apply = function(compiler) {\r\n\tcompiler.plugin(\"this-compilation\", function(compilation) {\r\n\t\tswitch(this.target) {\r\n\t\t\tcase \"var\":\r\n\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(\"var \" + accessorAccess(false, this.name)));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"assign\":\r\n\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(accessorAccess(undefined, this.name)));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"this\":\r\n\t\t\tcase \"window\":\r\n\t\t\tcase \"global\":\r\n\t\t\t\tif(this.name)\r\n\t\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(accessorAccess(this.target, this.name)));\r\n\t\t\t\telse\r\n\t\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(this.target, true));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"commonjs\":\r\n\t\t\t\tif(this.name)\r\n\t\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(accessorAccess(\"exports\", this.name)));\r\n\t\t\t\telse\r\n\t\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(\"exports\", true));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"commonjs2\":\r\n\t\t\t\tcompilation.apply(new SetVarMainTemplatePlugin(\"module.exports\"));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"amd\":\r\n\t\t\t\tvar AmdMainTemplatePlugin = require(\"./AmdMainTemplatePlugin\");\r\n\t\t\t\tcompilation.apply(new AmdMainTemplatePlugin(this.name));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"umd\":\r\n\t\t\tcase \"umd2\":\r\n\t\t\t\tvar UmdMainTemplatePlugin = require(\"./UmdMainTemplatePlugin\");\r\n\t\t\t\tcompilation.apply(new UmdMainTemplatePlugin(this.name, {\r\n\t\t\t\t\toptionalAmdExternalAsGlobal: this.target === \"umd2\",\r\n\t\t\t\t\tnamedDefine: this.umdNamedDefine\r\n\t\t\t\t}));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"jsonp\":\r\n\t\t\t\tvar JsonpExportMainTemplatePlugin = require(\"./JsonpExportMainTemplatePlugin\");\r\n\t\t\t\tcompilation.apply(new JsonpExportMainTemplatePlugin(this.name));\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(this.target + \" is not a valid Library target\");\r\n\t\t}\r\n\t}.bind(this));\r\n};\r\n"]}