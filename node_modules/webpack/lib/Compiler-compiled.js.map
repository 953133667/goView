{"version":3,"sources":["Compiler.js"],"names":[],"mappings":"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","file":"Compiler-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar path = require(\"path\");\r\nvar Tapable = require(\"tapable\");\r\n\r\nvar Compilation = require(\"./Compilation\");\r\nvar Parser = require(\"./Parser\");\r\nvar Resolver = require(\"enhanced-resolve/lib/Resolver\");\r\n\r\nvar NormalModuleFactory = require(\"./NormalModuleFactory\");\r\nvar ContextModuleFactory = require(\"./ContextModuleFactory\");\r\n\r\nfunction Watching(compiler, watchOptions, handler) {\r\n\tthis.startTime = null;\r\n\tthis.invalid = false;\r\n\tthis.error = null;\r\n\tthis.stats = null;\r\n\tthis.handler = handler;\r\n\tif(typeof watchOptions === \"number\") {\r\n\t\tthis.watchOptions = {\r\n\t\t\taggregateTimeout: watchOptions\r\n\t\t};\r\n\t} else if(watchOptions && typeof watchOptions === \"object\") {\r\n\t\tthis.watchOptions = Object.create(watchOptions);\r\n\t} else {\r\n\t\tthis.watchOptions = {};\r\n\t}\r\n\tthis.watchOptions.aggregateTimeout = this.watchOptions.aggregateTimeout || 200;\r\n\tthis.compiler = compiler;\r\n\tthis.running = true;\r\n\tthis.compiler.readRecords(function(err) {\r\n\t\tif(err) return this._done(err);\r\n\r\n\t\tthis._go();\r\n\t}.bind(this));\r\n}\r\n\r\nWatching.prototype._go = function() {\r\n\tthis.startTime = new Date().getTime();\r\n\tthis.running = true;\r\n\tthis.invalid = false;\r\n\tthis.compiler.applyPluginsAsync(\"watch-run\", this, function(err) {\r\n\t\tif(err) return this._done(err);\r\n\t\tthis.compiler.compile(function(err, compilation) {\r\n\t\t\tif(err) return this._done(err);\r\n\t\t\tif(this.invalid) return this._done();\r\n\r\n\t\t\tif(this.compiler.applyPluginsBailResult(\"should-emit\", compilation) === false) {\r\n\t\t\t\treturn this._done(null, compilation);\r\n\t\t\t}\r\n\r\n\t\t\tthis.compiler.emitAssets(compilation, function(err) {\r\n\t\t\t\tif(err) return this._done(err);\r\n\t\t\t\tif(this.invalid) return this._done();\r\n\r\n\t\t\t\tthis.compiler.emitRecords(function(err) {\r\n\t\t\t\t\tif(err) return this._done(err);\r\n\r\n\t\t\t\t\treturn this._done(null, compilation);\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t}.bind(this));\r\n\t}.bind(this));\r\n};\r\n\r\nWatching.prototype._done = function(err, compilation) {\r\n\tthis.running = false;\r\n\tif(this.invalid) return this._go();\r\n\tthis.error = err || null;\r\n\tthis.stats = compilation ? compilation.getStats() : null;\r\n\tif(this.stats) {\r\n\t\tthis.stats.startTime = this.startTime;\r\n\t\tthis.stats.endTime = new Date().getTime();\r\n\t}\r\n\tif(this.stats)\r\n\t\tthis.compiler.applyPlugins(\"done\", this.stats);\r\n\telse\r\n\t\tthis.compiler.applyPlugins(\"failed\", this.error);\r\n\tthis.handler(this.error, this.stats);\r\n\tif(!this.error)\r\n\t\tthis.watch(compilation.fileDependencies, compilation.contextDependencies, compilation.missingDependencies);\r\n};\r\n\r\nWatching.prototype.watch = function(files, dirs, missing) {\r\n\tthis.watcher = this.compiler.watchFileSystem.watch(files, dirs, missing, this.startTime, this.watchOptions, function(err, filesModified, contextModified, missingModified, fileTimestamps, contextTimestamps) {\r\n\t\tthis.watcher = null;\r\n\t\tif(err) return this.handler(err);\r\n\r\n\t\tthis.compiler.fileTimestamps = fileTimestamps;\r\n\t\tthis.compiler.contextTimestamps = contextTimestamps;\r\n\t\tthis.invalidate();\r\n\t}.bind(this), function() {\r\n\t\tthis.compiler.applyPlugins(\"invalid\");\r\n\t}.bind(this));\r\n};\r\n\r\nWatching.prototype.invalidate = function() {\r\n\tif(this.watcher) {\r\n\t\tthis.watcher.pause();\r\n\t\tthis.watcher = null;\r\n\t}\r\n\tif(this.running) {\r\n\t\tthis.invalid = true;\r\n\t\treturn false;\r\n\t} else {\r\n\t\tthis._go();\r\n\t}\r\n};\r\n\r\nWatching.prototype.close = function(callback) {\r\n\tif(callback === undefined) callback = function() {};\r\n\r\n\tif(this.watcher) {\r\n\t\tthis.watcher.close();\r\n\t\tthis.watcher = null;\r\n\t}\r\n\tif(this.running) {\r\n\t\tthis.invalid = true;\r\n\t\tthis._done = function() {\r\n\t\t\tcallback();\r\n\t\t};\r\n\t} else {\r\n\t\tcallback();\r\n\t}\r\n};\r\n\r\nfunction Compiler() {\r\n\tTapable.call(this);\r\n\r\n\tthis.outputPath = \"\";\r\n\tthis.outputFileSystem = null;\r\n\tthis.inputFileSystem = null;\r\n\r\n\tthis.recordsInputPath = null;\r\n\tthis.recordsOutputPath = null;\r\n\tthis.records = {};\r\n\r\n\tthis.fileTimestamps = {};\r\n\tthis.contextTimestamps = {};\r\n\r\n\tthis.resolvers = {\r\n\t\tnormal: new Resolver(null),\r\n\t\tloader: new Resolver(null),\r\n\t\tcontext: new Resolver(null)\r\n\t};\r\n\tthis.parser = new Parser();\r\n\r\n\tthis.options = {};\r\n}\r\nmodule.exports = Compiler;\r\n\r\nCompiler.prototype = Object.create(Tapable.prototype);\r\nCompiler.prototype.constructor = Compiler;\r\n\r\nCompiler.Watching = Watching;\r\nCompiler.prototype.watch = function(watchOptions, handler) {\r\n\tthis.fileTimestamps = {};\r\n\tthis.contextTimestamps = {};\r\n\tvar watching = new Watching(this, watchOptions, handler);\r\n\treturn watching;\r\n};\r\n\r\nCompiler.prototype.run = function(callback) {\r\n\tvar startTime = new Date().getTime();\r\n\tthis.applyPluginsAsync(\"run\", this, function(err) {\r\n\t\tif(err) return callback(err);\r\n\r\n\t\tthis.readRecords(function(err) {\r\n\t\t\tif(err) return callback(err);\r\n\r\n\t\t\tthis.compile(function(err, compilation) {\r\n\t\t\t\tif(err) return callback(err);\r\n\r\n\t\t\t\tif(this.applyPluginsBailResult(\"should-emit\", compilation) === false) {\r\n\t\t\t\t\tvar stats = compilation.getStats();\r\n\t\t\t\t\tstats.startTime = startTime;\r\n\t\t\t\t\tstats.endTime = new Date().getTime();\r\n\t\t\t\t\tthis.applyPlugins(\"done\", stats);\r\n\t\t\t\t\treturn callback(null, stats);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.emitAssets(compilation, function(err) {\r\n\t\t\t\t\tif(err) return callback(err);\r\n\r\n\t\t\t\t\tthis.emitRecords(function(err) {\r\n\t\t\t\t\t\tif(err) return callback(err);\r\n\r\n\t\t\t\t\t\tvar stats = compilation.getStats();\r\n\t\t\t\t\t\tstats.startTime = startTime;\r\n\t\t\t\t\t\tstats.endTime = new Date().getTime();\r\n\t\t\t\t\t\tthis.applyPlugins(\"done\", stats);\r\n\t\t\t\t\t\treturn callback(null, stats);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}.bind(this));\r\n\t\t}.bind(this));\r\n\t}.bind(this));\r\n};\r\n\r\nCompiler.prototype.runAsChild = function(callback) {\r\n\tthis.compile(function(err, compilation) {\r\n\t\tif(err) return callback(err);\r\n\r\n\t\tthis.parentCompilation.children.push(compilation);\r\n\t\tObject.keys(compilation.assets).forEach(function(name) {\r\n\t\t\tthis.parentCompilation.assets[name] = compilation.assets[name];\r\n\t\t}.bind(this));\r\n\r\n\t\tvar entries = compilation.chunks.filter(function(chunk) {\r\n\t\t\treturn chunk.entry;\r\n\t\t});\r\n\t\treturn callback(null, entries, compilation);\r\n\t}.bind(this));\r\n};\r\n\r\nCompiler.prototype.purgeInputFileSystem = function() {\r\n\tif(this.inputFileSystem && this.inputFileSystem.purge)\r\n\t\tthis.inputFileSystem.purge();\r\n};\r\n\r\nCompiler.prototype.emitAssets = function(compilation, callback) {\r\n\tvar outputPath;\r\n\r\n\tthis.applyPluginsAsync(\"emit\", compilation, function(err) {\r\n\t\tif(err) return callback(err);\r\n\t\toutputPath = compilation.getPath(this.outputPath);\r\n\t\tthis.outputFileSystem.mkdirp(outputPath, emitFiles.bind(this));\r\n\t}.bind(this));\r\n\r\n\tfunction emitFiles(err) {\r\n\t\tif(err) return callback(err);\r\n\r\n\t\trequire(\"async\").forEach(Object.keys(compilation.assets), function(file, callback) {\r\n\r\n\t\t\tvar targetFile = file;\r\n\t\t\tvar queryStringIdx = targetFile.indexOf(\"?\");\r\n\t\t\tif(queryStringIdx >= 0) {\r\n\t\t\t\ttargetFile = targetFile.substr(0, queryStringIdx);\r\n\t\t\t}\r\n\r\n\t\t\tif(targetFile.match(/\\/|\\\\/)) {\r\n\t\t\t\tvar dir = path.dirname(targetFile);\r\n\t\t\t\tthis.outputFileSystem.mkdirp(this.outputFileSystem.join(outputPath, dir), writeOut.bind(this));\r\n\t\t\t} else writeOut.call(this);\r\n\r\n\t\t\tfunction writeOut(err) {\r\n\t\t\t\tif(err) return callback(err);\r\n\t\t\t\tvar targetPath = this.outputFileSystem.join(outputPath, targetFile);\r\n\t\t\t\tvar source = compilation.assets[file];\r\n\t\t\t\tif(source.existsAt === targetPath) {\r\n\t\t\t\t\tsource.emitted = false;\r\n\t\t\t\t\treturn callback();\r\n\t\t\t\t}\r\n\t\t\t\tvar content = source.source();\r\n\t\t\t\tif(!Buffer.isBuffer(content))\r\n\t\t\t\t\tcontent = new Buffer(content, \"utf-8\");\r\n\t\t\t\tsource.existsAt = targetPath;\r\n\t\t\t\tsource.emitted = true;\r\n\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, callback);\r\n\t\t\t}\r\n\r\n\t\t}.bind(this), function(err) {\r\n\t\t\tif(err) return callback(err);\r\n\r\n\t\t\tafterEmit.call(this);\r\n\t\t}.bind(this));\r\n\t}\r\n\r\n\tfunction afterEmit() {\r\n\t\tthis.applyPluginsAsync(\"after-emit\", compilation, function(err) {\r\n\t\t\tif(err) return callback(err);\r\n\r\n\t\t\treturn callback();\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\r\nCompiler.prototype.emitRecords = function emitRecords(callback) {\r\n\tif(!this.recordsOutputPath) return callback();\r\n\tvar idx1 = this.recordsOutputPath.lastIndexOf(\"/\");\r\n\tvar idx2 = this.recordsOutputPath.lastIndexOf(\"\\\\\");\r\n\tvar recordsOutputPathDirectory = null;\r\n\tif(idx1 > idx2) recordsOutputPathDirectory = this.recordsOutputPath.substr(0, idx1);\r\n\tif(idx1 < idx2) recordsOutputPathDirectory = this.recordsOutputPath.substr(0, idx2);\r\n\tif(!recordsOutputPathDirectory) return writeFile.call(this);\r\n\tthis.outputFileSystem.mkdirp(recordsOutputPathDirectory, function(err) {\r\n\t\tif(err) return callback(err);\r\n\t\twriteFile.call(this);\r\n\t}.bind(this));\r\n\r\n\tfunction writeFile() {\r\n\t\tthis.outputFileSystem.writeFile(this.recordsOutputPath, JSON.stringify(this.records, undefined, 2), callback);\r\n\t}\r\n};\r\n\r\nCompiler.prototype.readRecords = function readRecords(callback) {\r\n\tif(!this.recordsInputPath) {\r\n\t\tthis.records = {};\r\n\t\treturn callback();\r\n\t}\r\n\tthis.inputFileSystem.stat(this.recordsInputPath, function(err) {\r\n\t\t// It doesn't exist\r\n\t\t// We can ignore this.\r\n\t\tif(err) return callback();\r\n\r\n\t\tthis.inputFileSystem.readFile(this.recordsInputPath, function(err, content) {\r\n\t\t\tif(err) return callback(err);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tthis.records = JSON.parse(content);\r\n\t\t\t} catch(e) {\r\n\t\t\t\te.message = \"Cannot parse records: \" + e.message;\r\n\t\t\t\treturn callback(e);\r\n\t\t\t}\r\n\r\n\t\t\treturn callback();\r\n\t\t}.bind(this));\r\n\t}.bind(this));\r\n};\r\n\r\nCompiler.prototype.createChildCompiler = function(compilation, compilerName, outputOptions) {\r\n\tvar childCompiler = new Compiler();\r\n\tfor(var name in this._plugins) {\r\n\t\tif([\"make\", \"compile\", \"emit\", \"after-emit\", \"invalid\", \"done\", \"this-compilation\"].indexOf(name) < 0)\r\n\t\t\tchildCompiler._plugins[name] = this._plugins[name].slice();\r\n\t}\r\n\tchildCompiler.name = compilerName;\r\n\tchildCompiler.outputPath = this.outputPath;\r\n\tchildCompiler.inputFileSystem = this.inputFileSystem;\r\n\tchildCompiler.outputFileSystem = null;\r\n\tchildCompiler.resolvers = this.resolvers;\r\n\tchildCompiler.parser = this.parser;\r\n\tchildCompiler.fileTimestamps = this.fileTimestamps;\r\n\tchildCompiler.contextTimestamps = this.contextTimestamps;\r\n\tif(!this.records[compilerName]) this.records[compilerName] = [];\r\n\tthis.records[compilerName].push(childCompiler.records = {});\r\n\tchildCompiler.options = Object.create(this.options);\r\n\tchildCompiler.options.output = Object.create(childCompiler.options.output);\r\n\tfor(name in outputOptions) {\r\n\t\tchildCompiler.options.output[name] = outputOptions[name];\r\n\t}\r\n\tchildCompiler.parentCompilation = compilation;\r\n\treturn childCompiler;\r\n};\r\n\r\nCompiler.prototype.isChild = function() {\r\n\treturn !!this.parentCompilation;\r\n};\r\n\r\nCompiler.prototype.createCompilation = function() {\r\n\treturn new Compilation(this);\r\n};\r\n\r\nCompiler.prototype.newCompilation = function(params) {\r\n\tvar compilation = this.createCompilation();\r\n\tcompilation.fileTimestamps = this.fileTimestamps;\r\n\tcompilation.contextTimestamps = this.contextTimestamps;\r\n\tcompilation.name = this.name;\r\n\tcompilation.records = this.records;\r\n\tthis.applyPlugins(\"this-compilation\", compilation, params);\r\n\tthis.applyPlugins(\"compilation\", compilation, params);\r\n\treturn compilation;\r\n};\r\n\r\nCompiler.prototype.createNormalModuleFactory = function() {\r\n\tvar normalModuleFactory = new NormalModuleFactory(this.options.context, this.resolvers, this.parser, this.options.module || {});\r\n\tthis.applyPlugins(\"normal-module-factory\", normalModuleFactory);\r\n\treturn normalModuleFactory;\r\n};\r\n\r\nCompiler.prototype.createContextModuleFactory = function() {\r\n\tvar contextModuleFactory = new ContextModuleFactory(this.resolvers, this.inputFileSystem);\r\n\tthis.applyPlugins(\"context-module-factory\", contextModuleFactory);\r\n\treturn contextModuleFactory;\r\n};\r\n\r\nCompiler.prototype.newCompilationParams = function() {\r\n\tvar params = {\r\n\t\tnormalModuleFactory: this.createNormalModuleFactory(),\r\n\t\tcontextModuleFactory: this.createContextModuleFactory()\r\n\t};\r\n\treturn params;\r\n};\r\n\r\nCompiler.prototype.compile = function(callback) {\r\n\tvar params = this.newCompilationParams();\r\n\tthis.applyPlugins(\"compile\", params);\r\n\r\n\tvar compilation = this.newCompilation(params);\r\n\r\n\tthis.applyPluginsParallel(\"make\", compilation, function(err) {\r\n\t\tif(err) return callback(err);\r\n\r\n\t\tcompilation.seal(function(err) {\r\n\t\t\tif(err) return callback(err);\r\n\r\n\t\t\tthis.applyPluginsAsync(\"after-compile\", compilation, function(err) {\r\n\t\t\t\tif(err) return callback(err);\r\n\r\n\t\t\t\treturn callback(null, compilation);\r\n\t\t\t});\r\n\t\t}.bind(this));\r\n\t}.bind(this));\r\n};\r\n"]}