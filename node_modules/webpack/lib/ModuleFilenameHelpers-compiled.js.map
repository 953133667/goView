{"version":3,"sources":["ModuleFilenameHelpers.js"],"names":[],"mappings":"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","file":"ModuleFilenameHelpers-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar ModuleFilenameHelpers = exports;\r\n\r\nModuleFilenameHelpers.ALL_LOADERS_RESOURCE = \"[all-loaders][resource]\";\r\nModuleFilenameHelpers.REGEXP_ALL_LOADERS_RESOURCE = /\\[all-?loaders\\]\\[resource\\]/gi;\r\nModuleFilenameHelpers.LOADERS_RESOURCE = \"[loaders][resource]\";\r\nModuleFilenameHelpers.REGEXP_LOADERS_RESOURCE = /\\[loaders\\]\\[resource\\]/gi;\r\nModuleFilenameHelpers.RESOURCE = \"[resource]\";\r\nModuleFilenameHelpers.REGEXP_RESOURCE = /\\[resource\\]/gi;\r\nModuleFilenameHelpers.ABSOLUTE_RESOURCE_PATH = \"[absolute-resource-path]\";\r\nModuleFilenameHelpers.REGEXP_ABSOLUTE_RESOURCE_PATH = /\\[abs(olute)?-?resource-?path\\]/gi;\r\nModuleFilenameHelpers.RESOURCE_PATH = \"[resource-path]\";\r\nModuleFilenameHelpers.REGEXP_RESOURCE_PATH = /\\[resource-?path\\]/gi;\r\nModuleFilenameHelpers.ALL_LOADERS = \"[all-loaders]\";\r\nModuleFilenameHelpers.REGEXP_ALL_LOADERS = /\\[all-?loaders\\]/gi;\r\nModuleFilenameHelpers.LOADERS = \"[loaders]\";\r\nModuleFilenameHelpers.REGEXP_LOADERS = /\\[loaders\\]/gi;\r\nModuleFilenameHelpers.QUERY = \"[query]\";\r\nModuleFilenameHelpers.REGEXP_QUERY = /\\[query\\]/gi;\r\nModuleFilenameHelpers.ID = \"[id]\";\r\nModuleFilenameHelpers.REGEXP_ID = /\\[id\\]/gi;\r\nModuleFilenameHelpers.HASH = \"[hash]\";\r\nModuleFilenameHelpers.REGEXP_HASH = /\\[hash\\]/gi;\r\n\r\nfunction getAfter(str, token) {\r\n\tvar idx = str.indexOf(token);\r\n\treturn idx < 0 ? \"\" : str.substr(idx);\r\n}\r\n\r\nfunction getBefore(str, token) {\r\n\tvar idx = str.lastIndexOf(token);\r\n\treturn idx < 0 ? \"\" : str.substr(0, idx);\r\n}\r\n\r\nfunction getHash(str) {\r\n\tvar hash = require(\"crypto\").createHash(\"md5\");\r\n\thash.update(str);\r\n\treturn hash.digest(\"hex\").substr(0, 4);\r\n}\r\n\r\nfunction asRegExp(test) {\r\n\tif(typeof test === \"string\") test = new RegExp(\"^\" + test.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\"));\r\n\treturn test;\r\n}\r\n\r\nModuleFilenameHelpers.createFilename = function createFilename(module, moduleFilenameTemplate, requestShortener) {\r\n\tif(!module) module = \"\";\r\n\tif(typeof module === \"string\") {\r\n\t\tvar shortIdentifier = requestShortener.shorten(module);\r\n\t\tvar identifier = shortIdentifier;\r\n\t\tvar moduleId = \"\";\r\n\t\tvar absoluteResourcePath = module.split(\"!\").pop();\r\n\t\tvar hash = getHash(identifier);\r\n\t} else {\r\n\t\tvar shortIdentifier = module.readableIdentifier(requestShortener);\r\n\t\tvar identifier = requestShortener.shorten(module.identifier());\r\n\t\tvar moduleId = module.id;\r\n\t\tvar absoluteResourcePath = module.resourcePath || module.identifier().split(\"!\").pop();\r\n\t\tvar hash = getHash(identifier);\r\n\t}\r\n\tvar resource = shortIdentifier.split(\"!\").pop();\r\n\tvar loaders = getBefore(shortIdentifier, \"!\");\r\n\tvar allLoaders = getBefore(identifier, \"!\");\r\n\tvar query = getAfter(resource, \"?\");\r\n\tvar resourcePath = resource.substr(0, resource.length - query.length);\r\n\tif(typeof moduleFilenameTemplate === \"function\") {\r\n\t\treturn moduleFilenameTemplate({\r\n\t\t\tidentifier: identifier,\r\n\t\t\tshortIdentifier: shortIdentifier,\r\n\t\t\tresource: resource,\r\n\t\t\tresourcePath: resourcePath,\r\n\t\t\tabsoluteResourcePath: absoluteResourcePath,\r\n\t\t\tallLoaders: allLoaders,\r\n\t\t\tquery: query,\r\n\t\t\tmoduleId: moduleId,\r\n\t\t\thash: hash\r\n\t\t});\r\n\t}\r\n\treturn moduleFilenameTemplate\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_ALL_LOADERS_RESOURCE, identifier)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_LOADERS_RESOURCE, shortIdentifier)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_RESOURCE, resource)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_RESOURCE_PATH, resourcePath)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_ABSOLUTE_RESOURCE_PATH, absoluteResourcePath)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_ALL_LOADERS, allLoaders)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_LOADERS, loaders)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_QUERY, query)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_ID, moduleId)\r\n\t\t.replace(ModuleFilenameHelpers.REGEXP_HASH, hash);\r\n};\r\n\r\nModuleFilenameHelpers.createFooter = function createFooter(module, requestShortener) {\r\n\tif(!module) module = \"\";\r\n\tif(typeof module === \"string\") {\r\n\t\treturn [\r\n\t\t\t\"/** WEBPACK FOOTER **\",\r\n\t\t\t\" ** \" + requestShortener.shorten(module),\r\n\t\t\t\" **/\"\r\n\t\t].join(\"\\n\");\r\n\t} else {\r\n\t\treturn [\r\n\t\t\t\"/*****************\",\r\n\t\t\t\" ** WEBPACK FOOTER\",\r\n\t\t\t\" ** \" + module.readableIdentifier(requestShortener),\r\n\t\t\t\" ** module id = \" + module.id,\r\n\t\t\t\" ** module chunks = \" + module.chunks.map(function(c) {\r\n\t\t\t\treturn c.id;\r\n\t\t\t}).join(\" \"),\r\n\t\t\t\" **/\"\r\n\t\t].join(\"\\n\");\r\n\t}\r\n};\r\n\r\nModuleFilenameHelpers.replaceDuplicates = function replaceDuplicates(array, fn, comparator) {\r\n\tvar countMap = {};\r\n\tvar posMap = {};\r\n\tarray.forEach(function(item, idx) {\r\n\t\tcountMap[item] = (countMap[item] || []);\r\n\t\tcountMap[item].push(idx);\r\n\t\tposMap[item] = 0;\r\n\t});\r\n\tif(comparator) {\r\n\t\tObject.keys(countMap).forEach(function(item) {\r\n\t\t\tcountMap[item].sort(comparator);\r\n\t\t});\r\n\t}\r\n\treturn array.map(function(item, i) {\r\n\t\tif(countMap[item].length > 1) {\r\n\t\t\tif(comparator && countMap[item][0] === i)\r\n\t\t\t\treturn item;\r\n\t\t\treturn fn(item, i, posMap[item]++);\r\n\t\t} else return item;\r\n\t});\r\n};\r\n\r\nModuleFilenameHelpers.matchPart = function matchPart(str, test) {\r\n\tif(!test) return true;\r\n\ttest = asRegExp(test);\r\n\tif(Array.isArray(test)) {\r\n\t\treturn test.map(asRegExp).filter(function(regExp) {\r\n\t\t\treturn regExp.test(str);\r\n\t\t}).length > 0;\r\n\t} else {\r\n\t\treturn test.test(str);\r\n\t}\r\n};\r\n\r\nModuleFilenameHelpers.matchObject = function matchObject(obj, str) {\r\n\tif(obj.test)\r\n\t\tif(!ModuleFilenameHelpers.matchPart(str, obj.test)) return false;\r\n\tif(obj.include)\r\n\t\tif(!ModuleFilenameHelpers.matchPart(str, obj.include)) return false;\r\n\tif(obj.exclude)\r\n\t\tif(ModuleFilenameHelpers.matchPart(str, obj.exclude)) return false;\r\n\treturn true;\r\n};\r\n"]}