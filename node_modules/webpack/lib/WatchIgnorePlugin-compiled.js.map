{"version":3,"sources":["WatchIgnorePlugin.js"],"names":[],"mappings":"AAAA,SAAS,iBAAT,CAA2B,KAA3B,EAAkC;AACjC,MAAK,KAAL,GAAa,KAAb;AACA;;AAED,OAAO,OAAP,GAAiB,iBAAjB;;AAEA,kBAAkB,SAAlB,CAA4B,KAA5B,GAAoC,UAAS,QAAT,EAAmB;AACtD,UAAS,MAAT,CAAgB,mBAAhB,EAAqC,YAAW;AAC/C,WAAS,eAAT,GAA2B,IAAI,uBAAJ,CAA4B,SAAS,eAArC,EAAsD,KAAK,KAA3D,CAA3B;AACA,EAFoC,CAEnC,IAFmC,CAE9B,IAF8B,CAArC;AAGA,CAJD;;AAMA,SAAS,uBAAT,CAAiC,GAAjC,EAAsC,KAAtC,EAA6C;AAC5C,MAAK,GAAL,GAAW,GAAX;AACA,MAAK,KAAL,GAAa,KAAb;AACA;;AAED,wBAAwB,SAAxB,CAAkC,KAAlC,GAA0C,UAAS,KAAT,EAAgB,IAAhB,EAAsB,OAAtB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,QAAnD,EAA6D,iBAA7D,EAAgF;AACzH,KAAI,UAAU,UAAS,IAAT,EAAe;AAC5B,SAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,UAAS,CAAT,EAAY;AAClC,UAAO,aAAa,MAAb,GAAsB,EAAE,IAAF,CAAO,IAAP,CAAtB,GAAqC,KAAK,OAAL,CAAa,CAAb,MAAoB,CAAhE;AACA,GAFM,CAAP;AAGA,EAJa,CAIZ,IAJY,CAIP,IAJO,CAAd;;AAMA,KAAI,aAAa,UAAS,IAAT,EAAe;AAC/B,SAAO,CAAC,QAAQ,IAAR,CAAR;AACA,EAFD;;AAIA,KAAI,eAAe,MAAM,MAAN,CAAa,OAAb,CAAnB;AACA,KAAI,cAAc,KAAK,MAAL,CAAY,OAAZ,CAAlB;;AAEA,MAAK,GAAL,CAAS,KAAT,CAAe,MAAM,MAAN,CAAa,UAAb,CAAf,EAAyC,KAAK,MAAL,CAAY,UAAZ,CAAzC,EAAkE,OAAlE,EAA2E,SAA3E,EAAsF,OAAtF,EAA+F,UAAS,GAAT,EAAc,aAAd,EAA6B,YAA7B,EAA2C,eAA3C,EAA4D,cAA5D,EAA4E,aAA5E,EAA2F;AACzL,MAAG,GAAH,EAAQ,OAAO,SAAS,GAAT,CAAP;;AAER,eAAa,OAAb,CAAqB,UAAS,IAAT,EAAe;AACnC,kBAAe,IAAf,IAAuB,CAAvB;AACA,GAFD;;AAIA,cAAY,OAAZ,CAAoB,UAAS,IAAT,EAAe;AAClC,iBAAc,IAAd,IAAsB,CAAtB;AACA,GAFD;;AAIA,WAAS,GAAT,EAAc,aAAd,EAA6B,YAA7B,EAA2C,eAA3C,EAA4D,cAA5D,EAA4E,aAA5E;AACA,EAZD,EAYG,iBAZH;AAaA,CA3BD","file":"WatchIgnorePlugin-compiled.js","sourcesContent":["function WatchIgnorePlugin(paths) {\r\n\tthis.paths = paths;\r\n}\r\n\r\nmodule.exports = WatchIgnorePlugin;\r\n\r\nWatchIgnorePlugin.prototype.apply = function(compiler) {\r\n\tcompiler.plugin(\"after-environment\", function() {\r\n\t\tcompiler.watchFileSystem = new IgnoringWatchFileSystem(compiler.watchFileSystem, this.paths);\r\n\t}.bind(this));\r\n};\r\n\r\nfunction IgnoringWatchFileSystem(wfs, paths) {\r\n\tthis.wfs = wfs;\r\n\tthis.paths = paths;\r\n}\r\n\r\nIgnoringWatchFileSystem.prototype.watch = function(files, dirs, missing, startTime, options, callback, callbackUndelayed) {\r\n\tvar ignored = function(path) {\r\n\t\treturn this.paths.some(function(p) {\r\n\t\t\treturn p instanceof RegExp ? p.test(path) : path.indexOf(p) === 0;\r\n\t\t});\r\n\t}.bind(this);\r\n\r\n\tvar notIgnored = function(path) {\r\n\t\treturn !ignored(path);\r\n\t};\r\n\r\n\tvar ignoredFiles = files.filter(ignored);\r\n\tvar ignoredDirs = dirs.filter(ignored);\r\n\r\n\tthis.wfs.watch(files.filter(notIgnored), dirs.filter(notIgnored), missing, startTime, options, function(err, filesModified, dirsModified, missingModified, fileTimestamps, dirTimestamps) {\r\n\t\tif(err) return callback(err);\r\n\r\n\t\tignoredFiles.forEach(function(path) {\r\n\t\t\tfileTimestamps[path] = 1;\r\n\t\t});\r\n\r\n\t\tignoredDirs.forEach(function(path) {\r\n\t\t\tdirTimestamps[path] = 1;\r\n\t\t});\r\n\r\n\t\tcallback(err, filesModified, dirsModified, missingModified, fileTimestamps, dirTimestamps);\r\n\t}, callbackUndelayed);\r\n};\r\n"]}