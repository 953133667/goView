{"version":3,"sources":["UmdMainTemplatePlugin.js"],"names":[],"mappings":"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","file":"UmdMainTemplatePlugin-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar ConcatSource = require(\"webpack-core/lib/ConcatSource\");\r\nvar OriginalSource = require(\"webpack-core/lib/OriginalSource\");\r\n\r\nfunction accessorToObjectAccess(accessor) {\r\n\treturn accessor.map(function(a) {\r\n\t\treturn \"[\" + JSON.stringify(a) + \"]\";\r\n\t}).join(\"\");\r\n}\r\n\r\nfunction accessorAccess(base, accessor) {\r\n\taccessor = [].concat(accessor);\r\n\treturn accessor.map(function(a, idx) {\r\n\t\ta = base + accessorToObjectAccess(accessor.slice(0, idx + 1));\r\n\t\tif(idx === accessor.length - 1) return a;\r\n\t\treturn a + \" = \" + a + \" || {}\";\r\n\t}).join(\", \");\r\n}\r\n\r\nfunction UmdMainTemplatePlugin(name, options) {\r\n\tthis.name = name;\r\n\tthis.optionalAmdExternalAsGlobal = options.optionalAmdExternalAsGlobal;\r\n\tthis.namedDefine = options.namedDefine;\r\n}\r\nmodule.exports = UmdMainTemplatePlugin;\r\nUmdMainTemplatePlugin.prototype.apply = function(compilation) {\r\n\tvar mainTemplate = compilation.mainTemplate;\r\n\tcompilation.templatesPlugin(\"render-with-entry\", function(source, chunk, hash) {\r\n\t\tvar externals = chunk.modules.filter(function(m) {\r\n\t\t\treturn m.external;\r\n\t\t});\r\n\t\tvar optionalExternals = [],\r\n\t\t\trequiredExternals = [];\r\n\t\tif(this.optionalAmdExternalAsGlobal) {\r\n\t\t\texternals.forEach(function(m) {\r\n\t\t\t\tif(m.optional) {\r\n\t\t\t\t\toptionalExternals.push(m);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trequiredExternals.push(m);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\texternals = requiredExternals.concat(optionalExternals);\r\n\t\t} else {\r\n\t\t\trequiredExternals = externals;\r\n\t\t}\r\n\r\n\t\tfunction replaceKeys(str) {\r\n\t\t\treturn mainTemplate.applyPluginsWaterfall(\"asset-path\", str, {\r\n\t\t\t\thash: hash,\r\n\t\t\t\tchunk: chunk\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction externalsDepsArray(modules) {\r\n\t\t\treturn \"[\" + replaceKeys(modules.map(function(m) {\r\n\t\t\t\treturn JSON.stringify(typeof m.request === \"object\" ? m.request.amd : m.request);\r\n\t\t\t}).join(\", \")) + \"]\";\r\n\t\t}\r\n\r\n\t\tfunction externalsRootArray(modules) {\r\n\t\t\treturn replaceKeys(modules.map(function(m) {\r\n\t\t\t\tvar request = m.request;\r\n\t\t\t\tif(typeof request === \"object\") request = request.root;\r\n\t\t\t\treturn \"root\" + accessorToObjectAccess([].concat(request));\r\n\t\t\t}).join(\", \"));\r\n\t\t}\r\n\r\n\t\tfunction externalsRequireArray(type) {\r\n\t\t\treturn replaceKeys(externals.map(function(m) {\r\n\t\t\t\tvar request = m.request;\r\n\t\t\t\tif(typeof request === \"object\") request = request[type];\r\n\t\t\t\tif(Array.isArray(request)) {\r\n\t\t\t\t\tvar expr = \"require(\" + JSON.stringify(request[0]) + \")\" + accessorToObjectAccess(request.slice(1));\r\n\t\t\t\t} else\r\n\t\t\t\t\tvar expr = \"require(\" + JSON.stringify(request) + \")\";\r\n\t\t\t\tif(m.optional) {\r\n\t\t\t\t\texpr = \"(function webpackLoadOptionalExternalModule() { try { return \" + expr + \"; } catch(e) {} }())\";\r\n\t\t\t\t}\r\n\t\t\t\treturn expr;\r\n\t\t\t}).join(\", \"));\r\n\t\t}\r\n\r\n\t\tfunction externalsArguments(modules) {\r\n\t\t\treturn modules.map(function(m) {\r\n\t\t\t\treturn \"__WEBPACK_EXTERNAL_MODULE_\" + m.id + \"__\";\r\n\t\t\t}).join(\", \");\r\n\t\t}\r\n\r\n\t\tfunction libraryName(library) {\r\n\t\t\treturn JSON.stringify(replaceKeys([].concat(library).pop()));\r\n\t\t}\r\n\r\n\t\tif(optionalExternals.length > 0) {\r\n\t\t\tvar amdFactory = \"function webpackLoadOptionalExternalModuleAmd(\" + externalsArguments(requiredExternals) + \") {\\n\" +\r\n\t\t\t\t\"\t\t\treturn factory(\" + (\r\n\t\t\t\t\trequiredExternals.length > 0 ?\r\n\t\t\t\t\texternalsArguments(requiredExternals) + \", \" + externalsRootArray(optionalExternals) :\r\n\t\t\t\t\texternalsRootArray(optionalExternals)\r\n\t\t\t\t) + \");\\n\" +\r\n\t\t\t\t\"\t\t}\";\r\n\t\t} else {\r\n\t\t\tvar amdFactory = \"factory\";\r\n\t\t}\r\n\r\n\t\treturn new ConcatSource(new OriginalSource(\r\n\t\t\t\"(function webpackUniversalModuleDefinition(root, factory) {\\n\" +\r\n\t\t\t\"\tif(typeof exports === 'object' && typeof module === 'object')\\n\" +\r\n\t\t\t\"\t\tmodule.exports = factory(\" + externalsRequireArray(\"commonjs2\") + \");\\n\" +\r\n\t\t\t\"\telse if(typeof define === 'function' && define.amd)\\n\" +\r\n\t\t\t(requiredExternals.length > 0 ?\r\n\t\t\t\t(this.name && this.namedDefine === true ?\r\n\t\t\t\t\t\"\t\tdefine(\" + libraryName(this.name) + \", \" + externalsDepsArray(requiredExternals) + \", \" + amdFactory + \");\\n\" :\r\n\t\t\t\t\t\"\t\tdefine(\" + externalsDepsArray(requiredExternals) + \", \" + amdFactory + \");\\n\"\r\n\t\t\t\t) :\r\n\t\t\t\t(this.name && this.namedDefine === true ?\r\n\t\t\t\t\t\"\t\tdefine(\" + libraryName(this.name) + \", [], \" + amdFactory + \");\\n\" :\r\n\t\t\t\t\t\"\t\tdefine([], \" + amdFactory + \");\\n\"\r\n\t\t\t\t)\r\n\t\t\t) +\r\n\t\t\t(this.name ?\r\n\t\t\t\t\"\telse if(typeof exports === 'object')\\n\" +\r\n\t\t\t\t\"\t\texports[\" + libraryName(this.name) + \"] = factory(\" + externalsRequireArray(\"commonjs\") + \");\\n\" +\r\n\t\t\t\t\"\telse\\n\" +\r\n\t\t\t\t\"\t\t\" + replaceKeys(accessorAccess(\"root\", this.name)) + \" = factory(\" + externalsRootArray(externals) + \");\\n\" :\r\n\t\t\t\t\"\telse {\\n\" +\r\n\t\t\t\t(externals.length > 0 ?\r\n\t\t\t\t\t\"\t\tvar a = typeof exports === 'object' ? factory(\" + externalsRequireArray(\"commonjs\") + \") : factory(\" + externalsRootArray(externals) + \");\\n\" :\r\n\t\t\t\t\t\"\t\tvar a = factory();\\n\"\r\n\t\t\t\t) +\r\n\t\t\t\t\"\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\\n\" +\r\n\t\t\t\t\"\t}\\n\"\r\n\t\t\t) +\r\n\t\t\t\"})(this, function(\" + externalsArguments(externals) + \") {\\nreturn \", \"webpack/universalModuleDefinition\"), source, \"\\n});\\n\");\r\n\t}.bind(this));\r\n\tmainTemplate.plugin(\"global-hash-paths\", function(paths) {\r\n\t\tif(this.name) paths = paths.concat(this.name);\r\n\t\treturn paths;\r\n\t}.bind(this));\r\n\tmainTemplate.plugin(\"hash\", function(hash) {\r\n\t\thash.update(\"umd\");\r\n\t\thash.update(this.name + \"\");\r\n\t}.bind(this));\r\n};\r\n"]}