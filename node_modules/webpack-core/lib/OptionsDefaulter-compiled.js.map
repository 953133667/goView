{"version":3,"sources":["OptionsDefaulter.js"],"names":[],"mappings":"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","file":"OptionsDefaulter-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction OptionsDefaulter() {\r\n\tthis.defaults = {};\r\n\tthis.config = {};\r\n}\r\nmodule.exports = OptionsDefaulter;\r\n\r\nfunction getProperty(obj, name) {\r\n\tname = name.split(\".\");\r\n\tfor(var i = 0; i < name.length - 1; i++) {\r\n\t\tobj = obj[name[i]];\r\n\t\tif(typeof obj != \"object\" || !obj) return;\r\n\t}\r\n\treturn obj[name.pop()];\r\n}\r\n\r\nfunction setProperty(obj, name, value) {\r\n\tname = name.split(\".\");\r\n\tfor(var i = 0; i < name.length - 1; i++) {\r\n\t\tif(typeof (obj[name[i]]) !== \"object\" || !obj[name[i]]) obj[name[i]] = {};\r\n\t\tobj = obj[name[i]];\r\n\t}\r\n\tobj[name.pop()] = value;\r\n}\r\n\r\nfunction hasProperty(obj, name, value) {\r\n\tname = name.split(\".\");\r\n\tfor(var i = 0; i < name.length - 1; i++) {\r\n\t\tobj = obj[name[i]];\r\n\t\tif(typeof obj != \"object\" || !obj) return false;\r\n\t}\r\n\treturn Object.prototype.hasOwnProperty.call(obj, name.pop());\r\n}\r\n\r\nOptionsDefaulter.prototype.process = function(options) {\r\n\tfor(var name in this.defaults) {\r\n\t\tswitch(this.config[name]) {\r\n\t\tcase undefined:\r\n\t\t\tif(getProperty(options, name) === undefined)\r\n\t\t\t\tsetProperty(options, name, this.defaults[name]);\r\n\t\t\tbreak;\r\n\t\tcase \"call\":\r\n\t\t\tsetProperty(options, name, this.defaults[name].call(this, getProperty(options, name)), options);\r\n\t\t\tbreak;\r\n\t\tcase \"append\":\r\n\t\t\tvar oldValue = getProperty(options, name);\r\n\t\t\tif(!Array.isArray(oldValue)) oldValue = [];\r\n\t\t\tthis.defaults[name].forEach(function(item) {\r\n\t\t\t\toldValue.push(item);\r\n\t\t\t});\r\n\t\t\tsetProperty(options, name, oldValue);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"OptionsDefaulter cannot process \" + this.config[name]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nOptionsDefaulter.prototype.set = function(name, config, def) {\r\n\tif(arguments.length === 3) {\r\n\t\tthis.defaults[name] = def;\r\n\t\tthis.config[name] = config;\r\n\t} else {\r\n\t\tthis.defaults[name] = config;\r\n\t\tdelete this.config[name];\r\n\t}\r\n}"]}