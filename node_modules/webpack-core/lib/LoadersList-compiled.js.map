{"version":3,"sources":["LoadersList.js"],"names":[],"mappings":"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","file":"LoadersList-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction LoadersList(list) {\r\n\tthis.list = list || [];\r\n\tthis.list.forEach(function(element) {\r\n\t\tif(element === null || typeof element !== \"object\")\r\n\t\t\tthrow new Error(\"Each element of the loaders list must be an object or array\");\r\n\t});\r\n}\r\nmodule.exports = LoadersList;\r\n\r\nfunction regExpAsMatcher(regExp) {\r\n\treturn function(str) {\r\n\t\treturn regExp.test(str);\r\n\t}\r\n}\r\n\r\nfunction asMatcher(test) {\r\n\tif(typeof test === \"string\") {\r\n\t\treturn regExpAsMatcher(new RegExp(\"^\"+test.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\")));\r\n\t} else if(typeof test === \"function\") {\r\n\t\treturn test;\r\n\t} else if(test instanceof RegExp) {\r\n\t\treturn regExpAsMatcher(test);\r\n\t} else if(Array.isArray(test)) {\r\n\t\tvar matchers = test.map(function(item) {\r\n\t\t\tif(Array.isArray(item)) {\r\n\t\t\t\tvar matchers = item.map(asMatcher);\r\n\t\t\t\treturn function(str) {\r\n\t\t\t\t\treturn matchers.every(function(matcher) {\r\n\t\t\t\t\t\treturn matcher(str);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn asMatcher(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn function(str) {\r\n\t\t\tfor(var i = 0; i < test.length; i++) {\r\n\t\t\t\tif(matchers[i](str))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\t} else {\r\n\t\tthrow new Error(test + \" is not a valid test\");\r\n\t}\r\n}\r\n\r\nfunction getLoadersFromObject(element) {\r\n\tif(element.query) {\r\n\t\tif(!element.loader || element.loader.indexOf(\"!\") >= 0) throw new Error(\"Cannot define 'query' and multiple loaders in loaders list\");\r\n\t\tif(typeof element.query === \"string\") return [element.loader + \"?\" + element.query];\r\n\t\treturn [element.loader + \"?\" + JSON.stringify(element.query)];\r\n\t}\r\n\tif(element.loader) return element.loader.split(\"!\");\r\n\tif(element.loaders) return element.loaders;\r\n\tthrow new Error(\"Element from loaders list should have one of the fields 'loader' or 'loaders'\");\r\n}\r\n\r\nLoadersList.prototype.matchPart = function matchPart(str, test) {\r\n\tif(!test) return true;\r\n\tvar matcher = asMatcher(test);\r\n\treturn matcher(str);\r\n};\r\n\r\nLoadersList.prototype.match = function match(str) {\r\n\treturn this.list.map(function(element) {\r\n\t\tif(Array.isArray(element)) {\r\n\t\t\tfor(var i = 0; i < element.length; i++) {\r\n\t\t\t\tif(this.matchObject(str, element[i]))\r\n\t\t\t\t\treturn getLoadersFromObject(element[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(this.matchObject(str, element))\r\n\t\t\t\treturn getLoadersFromObject(element);\r\n\t\t}\r\n\t}, this).filter(Boolean).reduce(function(array, r) {\r\n\t\tr.forEach(function(r) {\r\n\t\t\tarray.push(r);\r\n\t\t});\r\n\t\treturn array;\r\n\t}, []) || [];\r\n};\r\n\r\nLoadersList.prototype.matchObject = function matchObject(str, obj) {\r\n\tif(obj.test)\r\n\t\tif(!this.matchPart(str, obj.test)) return false;\r\n\tif(obj.include)\r\n\t\tif(!this.matchPart(str, obj.include)) return false;\r\n\tif(obj.exclude)\r\n\t\tif(this.matchPart(str, obj.exclude)) return false;\r\n\treturn true;\r\n};"]}