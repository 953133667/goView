{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["//\n// index.js\n// Should expose the additional browser functions on to the less object\n//\nvar addDataAttr = require(\"./utils\").addDataAttr,\n    browser = require(\"./browser\");\n\nmodule.exports = function(window, options) {\n    var document = window.document;\n    var less = require('../less')();\n\n    //module.exports = less;\n    less.options = options;\n    var environment = less.environment,\n        FileManager = require(\"./file-manager\")(options, less.logger),\n        fileManager = new FileManager();\n    environment.addFileManager(fileManager);\n    less.FileManager = FileManager;\n\n    require(\"./log-listener\")(less, options);\n    var errors = require(\"./error-reporting\")(window, less, options);\n    var cache = less.cache = options.cache || require(\"./cache\")(window, options, less.logger);\n    require('./image-size')(less.environment);\n\n    //Setup user functions\n    if (options.functions) {\n        less.functions.functionRegistry.addMultiple(options.functions);\n    }\n\n    var typePattern = /^text\\/(x-)?less$/;\n\n    function postProcessCSS(styles) { // deprecated, use a plugin for postprocesstasks\n        if (options.postProcessor && typeof options.postProcessor === 'function') {\n            styles = options.postProcessor.call(styles, styles) || styles;\n        }\n        return styles;\n    }\n\n    function clone(obj) {\n        var cloned = {};\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                cloned[prop] = obj[prop];\n            }\n        }\n        return cloned;\n    }\n\n    // only really needed for phantom\n    function bind(func, thisArg) {\n        var curryArgs = Array.prototype.slice.call(arguments, 2);\n        return function() {\n            var args = curryArgs.concat(Array.prototype.slice.call(arguments, 0));\n            return func.apply(thisArg, args);\n        };\n    }\n\n    function loadStyles(modifyVars) {\n        var styles = document.getElementsByTagName('style'),\n            style;\n\n        for (var i = 0; i < styles.length; i++) {\n            style = styles[i];\n            if (style.type.match(typePattern)) {\n                var instanceOptions = clone(options);\n                instanceOptions.modifyVars = modifyVars;\n                var lessText = style.innerHTML || '';\n                instanceOptions.filename = document.location.href.replace(/#.*$/, '');\n\n                /*jshint loopfunc:true */\n                // use closure to store current style\n                less.render(lessText, instanceOptions,\n                        bind(function(style, e, result) {\n                            if (e) {\n                                errors.add(e, \"inline\");\n                            } else {\n                                style.type = 'text/css';\n                                if (style.styleSheet) {\n                                    style.styleSheet.cssText = result.css;\n                                } else {\n                                    style.innerHTML = result.css;\n                                }\n                            }\n                        }, null, style));\n            }\n        }\n    }\n\n    function loadStyleSheet(sheet, callback, reload, remaining, modifyVars) {\n\n        var instanceOptions = clone(options);\n        addDataAttr(instanceOptions, sheet);\n        instanceOptions.mime = sheet.type;\n\n        if (modifyVars) {\n            instanceOptions.modifyVars = modifyVars;\n        }\n\n        function loadInitialFileCallback(loadedFile) {\n\n            var data = loadedFile.contents,\n                path = loadedFile.filename,\n                webInfo = loadedFile.webInfo;\n\n            var newFileInfo = {\n                currentDirectory: fileManager.getPath(path),\n                filename: path,\n                rootFilename: path,\n                relativeUrls: instanceOptions.relativeUrls};\n\n            newFileInfo.entryPath = newFileInfo.currentDirectory;\n            newFileInfo.rootpath = instanceOptions.rootpath || newFileInfo.currentDirectory;\n\n            if (webInfo) {\n                webInfo.remaining = remaining;\n\n                var css = cache.getCSS(path, webInfo, instanceOptions.modifyVars);\n                if (!reload && css) {\n                    webInfo.local = true;\n                    callback(null, css, data, sheet, webInfo, path);\n                    return;\n                }\n\n            }\n\n            //TODO add tests around how this behaves when reloading\n            errors.remove(path);\n\n            instanceOptions.rootFileInfo = newFileInfo;\n            less.render(data, instanceOptions, function(e, result) {\n                if (e) {\n                    e.href = path;\n                    callback(e);\n                } else {\n                    result.css = postProcessCSS(result.css);\n                    cache.setCSS(sheet.href, webInfo.lastModified, instanceOptions.modifyVars, result.css);\n                    callback(null, result.css, data, sheet, webInfo, path);\n                }\n            });\n        }\n\n        fileManager.loadFile(sheet.href, null, instanceOptions, environment, function(e, loadedFile) {\n            if (e) {\n                callback(e);\n                return;\n            }\n            loadInitialFileCallback(loadedFile);\n        });\n    }\n\n    function loadStyleSheets(callback, reload, modifyVars) {\n        for (var i = 0; i < less.sheets.length; i++) {\n            loadStyleSheet(less.sheets[i], callback, reload, less.sheets.length - (i + 1), modifyVars);\n        }\n    }\n\n    function initRunningMode() {\n        if (less.env === 'development') {\n            less.watchTimer = setInterval(function () {\n                if (less.watchMode) {\n                    fileManager.clearFileCache();\n                    loadStyleSheets(function (e, css, _, sheet, webInfo) {\n                        if (e) {\n                            errors.add(e, e.href || sheet.href);\n                        } else if (css) {\n                            browser.createCSS(window.document, css, sheet);\n                        }\n                    });\n                }\n            }, options.poll);\n        }\n    }\n\n    //\n    // Watch mode\n    //\n    less.watch   = function () {\n        if (!less.watchMode ) {\n            less.env = 'development';\n            initRunningMode();\n        }\n        this.watchMode = true;\n        return true;\n    };\n\n    less.unwatch = function () {clearInterval(less.watchTimer); this.watchMode = false; return false; };\n\n    //\n    // Synchronously get all <link> tags with the 'rel' attribute set to\n    // \"stylesheet/less\".\n    //\n    less.registerStylesheetsImmediately = function() {\n        var links = document.getElementsByTagName('link');\n        less.sheets = [];\n\n        for (var i = 0; i < links.length; i++) {\n            if (links[i].rel === 'stylesheet/less' || (links[i].rel.match(/stylesheet/) &&\n                (links[i].type.match(typePattern)))) {\n                less.sheets.push(links[i]);\n            }\n        }\n    };\n\n    //\n    // Asynchronously get all <link> tags with the 'rel' attribute set to\n    // \"stylesheet/less\", returning a Promise.\n    //\n    less.registerStylesheets = function() {\n        return new Promise(function(resolve, reject) {\n            less.registerStylesheetsImmediately();\n            resolve();\n        });\n    };\n\n    //\n    // With this function, it's possible to alter variables and re-render\n    // CSS without reloading less-files\n    //\n    less.modifyVars = function(record) {\n        return less.refresh(true, record, false);\n    };\n\n    less.refresh = function (reload, modifyVars, clearFileCache) {\n        if ((reload || clearFileCache) && clearFileCache !== false) {\n            fileManager.clearFileCache();\n        }\n        return new Promise(function (resolve, reject) {\n            var startTime, endTime, totalMilliseconds, remainingSheets;\n            startTime = endTime = new Date();\n\n            // Set counter for remaining unprocessed sheets\n            remainingSheets = less.sheets.length;\n\n            if (remainingSheets === 0) {\n\n                endTime = new Date();\n                totalMilliseconds = endTime - startTime;\n                less.logger.info(\"Less has finished and no sheets were loaded.\");\n                resolve({\n                    startTime: startTime,\n                    endTime: endTime,\n                    totalMilliseconds: totalMilliseconds,\n                    sheets: less.sheets.length\n                });\n\n            } else {\n                // Relies on less.sheets array, callback seems to be guaranteed to be called for every element of the array\n                loadStyleSheets(function (e, css, _, sheet, webInfo) {\n                    if (e) {\n                        errors.add(e, e.href || sheet.href);\n                        reject(e);\n                        return;\n                    }\n                    if (webInfo.local) {\n                        less.logger.info(\"Loading \" + sheet.href + \" from cache.\");\n                    } else {\n                        less.logger.info(\"Rendered \" + sheet.href + \" successfully.\");\n                    }\n                    browser.createCSS(window.document, css, sheet);\n                    less.logger.info(\"CSS for \" + sheet.href + \" generated in \" + (new Date() - endTime) + 'ms');\n\n                    // Count completed sheet\n                    remainingSheets--;\n\n                    // Check if the last remaining sheet was processed and then call the promise\n                    if (remainingSheets === 0) {\n                        totalMilliseconds = new Date() - startTime;\n                        less.logger.info(\"Less has finished. CSS generated in \" + totalMilliseconds + 'ms');\n                        resolve({\n                            startTime: startTime,\n                            endTime: endTime,\n                            totalMilliseconds: totalMilliseconds,\n                            sheets: less.sheets.length\n                        });\n                    }\n                    endTime = new Date();\n                }, reload, modifyVars);\n            }\n\n            loadStyles(modifyVars);\n        });\n    };\n\n    less.refreshStyles = loadStyles;\n    return less;\n};\n"]}