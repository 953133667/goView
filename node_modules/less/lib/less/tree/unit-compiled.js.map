{"version":3,"sources":["unit.js"],"names":[],"mappings":"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","file":"unit-compiled.js","sourcesContent":["var Node = require(\"./node\"),\n    unitConversions = require(\"../data/unit-conversions\");\n\nvar Unit = function (numerator, denominator, backupUnit) {\n    this.numerator = numerator ? numerator.slice(0).sort() : [];\n    this.denominator = denominator ? denominator.slice(0).sort() : [];\n    if (backupUnit) {\n        this.backupUnit = backupUnit;\n    } else if (numerator && numerator.length) {\n        this.backupUnit = numerator[0];\n    }\n};\n\nUnit.prototype = new Node();\nUnit.prototype.type = \"Unit\";\nUnit.prototype.clone = function () {\n    return new Unit(this.numerator.slice(0), this.denominator.slice(0), this.backupUnit);\n};\nUnit.prototype.genCSS = function (context, output) {\n    // Dimension checks the unit is singular and throws an error if in strict math mode.\n    var strictUnits = context && context.strictUnits;\n    if (this.numerator.length === 1) {\n        output.add(this.numerator[0]); // the ideal situation\n    } else if (!strictUnits && this.backupUnit) {\n        output.add(this.backupUnit);\n    } else if (!strictUnits && this.denominator.length) {\n        output.add(this.denominator[0]);\n    }\n};\nUnit.prototype.toString = function () {\n    var i, returnStr = this.numerator.join(\"*\");\n    for (i = 0; i < this.denominator.length; i++) {\n        returnStr += \"/\" + this.denominator[i];\n    }\n    return returnStr;\n};\nUnit.prototype.compare = function (other) {\n    return this.is(other.toString()) ? 0 : undefined;\n};\nUnit.prototype.is = function (unitString) {\n    return this.toString().toUpperCase() === unitString.toUpperCase();\n};\nUnit.prototype.isLength = function () {\n    return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/));\n};\nUnit.prototype.isEmpty = function () {\n    return this.numerator.length === 0 && this.denominator.length === 0;\n};\nUnit.prototype.isSingular = function() {\n    return this.numerator.length <= 1 && this.denominator.length === 0;\n};\nUnit.prototype.map = function(callback) {\n    var i;\n\n    for (i = 0; i < this.numerator.length; i++) {\n        this.numerator[i] = callback(this.numerator[i], false);\n    }\n\n    for (i = 0; i < this.denominator.length; i++) {\n        this.denominator[i] = callback(this.denominator[i], true);\n    }\n};\nUnit.prototype.usedUnits = function() {\n    var group, result = {}, mapUnit, groupName;\n\n    mapUnit = function (atomicUnit) {\n        /*jshint loopfunc:true */\n        if (group.hasOwnProperty(atomicUnit) && !result[groupName]) {\n            result[groupName] = atomicUnit;\n        }\n\n        return atomicUnit;\n    };\n\n    for (groupName in unitConversions) {\n        if (unitConversions.hasOwnProperty(groupName)) {\n            group = unitConversions[groupName];\n\n            this.map(mapUnit);\n        }\n    }\n\n    return result;\n};\nUnit.prototype.cancel = function () {\n    var counter = {}, atomicUnit, i;\n\n    for (i = 0; i < this.numerator.length; i++) {\n        atomicUnit = this.numerator[i];\n        counter[atomicUnit] = (counter[atomicUnit] || 0) + 1;\n    }\n\n    for (i = 0; i < this.denominator.length; i++) {\n        atomicUnit = this.denominator[i];\n        counter[atomicUnit] = (counter[atomicUnit] || 0) - 1;\n    }\n\n    this.numerator = [];\n    this.denominator = [];\n\n    for (atomicUnit in counter) {\n        if (counter.hasOwnProperty(atomicUnit)) {\n            var count = counter[atomicUnit];\n\n            if (count > 0) {\n                for (i = 0; i < count; i++) {\n                    this.numerator.push(atomicUnit);\n                }\n            } else if (count < 0) {\n                for (i = 0; i < -count; i++) {\n                    this.denominator.push(atomicUnit);\n                }\n            }\n        }\n    }\n\n    this.numerator.sort();\n    this.denominator.sort();\n};\nmodule.exports = Unit;\n"]}