{"version":3,"sources":["color.js"],"names":[],"mappings":"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","file":"color-compiled.js","sourcesContent":["var Dimension = require(\"../tree/dimension\"),\n    Color = require(\"../tree/color\"),\n    Quoted = require(\"../tree/quoted\"),\n    Anonymous = require(\"../tree/anonymous\"),\n    functionRegistry = require(\"./function-registry\"),\n    colorFunctions;\n\nfunction clamp(val) {\n    return Math.min(1, Math.max(0, val));\n}\nfunction hsla(color) {\n    return colorFunctions.hsla(color.h, color.s, color.l, color.a);\n}\nfunction number(n) {\n    if (n instanceof Dimension) {\n        return parseFloat(n.unit.is('%') ? n.value / 100 : n.value);\n    } else if (typeof n === 'number') {\n        return n;\n    } else {\n        throw {\n            type: \"Argument\",\n            message: \"color functions take numbers as parameters\"\n        };\n    }\n}\nfunction scaled(n, size) {\n    if (n instanceof Dimension && n.unit.is('%')) {\n        return parseFloat(n.value * size / 100);\n    } else {\n        return number(n);\n    }\n}\ncolorFunctions = {\n    rgb: function (r, g, b) {\n        return colorFunctions.rgba(r, g, b, 1.0);\n    },\n    rgba: function (r, g, b, a) {\n        var rgb = [r, g, b].map(function (c) { return scaled(c, 255); });\n        a = number(a);\n        return new Color(rgb, a);\n    },\n    hsl: function (h, s, l) {\n        return colorFunctions.hsla(h, s, l, 1.0);\n    },\n    hsla: function (h, s, l, a) {\n\n        var m1, m2;\n\n        function hue(h) {\n            h = h < 0 ? h + 1 : (h > 1 ? h - 1 : h);\n            if (h * 6 < 1) {\n                return m1 + (m2 - m1) * h * 6;\n            }\n            else if (h * 2 < 1) {\n                return m2;\n            }\n            else if (h * 3 < 2) {\n                return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n            }\n            else {\n                return m1;\n            }\n        }\n\n        h = (number(h) % 360) / 360;\n        s = clamp(number(s)); l = clamp(number(l)); a = clamp(number(a));\n\n        m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        m1 = l * 2 - m2;\n\n        return colorFunctions.rgba(hue(h + 1 / 3) * 255,\n            hue(h)       * 255,\n            hue(h - 1 / 3) * 255,\n            a);\n    },\n\n    hsv: function(h, s, v) {\n        return colorFunctions.hsva(h, s, v, 1.0);\n    },\n\n    hsva: function(h, s, v, a) {\n        h = ((number(h) % 360) / 360) * 360;\n        s = number(s); v = number(v); a = number(a);\n\n        var i, f;\n        i = Math.floor((h / 60) % 6);\n        f = (h / 60) - i;\n\n        var vs = [v,\n            v * (1 - s),\n            v * (1 - f * s),\n            v * (1 - (1 - f) * s)];\n        var perm = [[0, 3, 1],\n            [2, 0, 1],\n            [1, 0, 3],\n            [1, 2, 0],\n            [3, 1, 0],\n            [0, 1, 2]];\n\n        return colorFunctions.rgba(vs[perm[i][0]] * 255,\n            vs[perm[i][1]] * 255,\n            vs[perm[i][2]] * 255,\n            a);\n    },\n\n    hue: function (color) {\n        return new Dimension(color.toHSL().h);\n    },\n    saturation: function (color) {\n        return new Dimension(color.toHSL().s * 100, '%');\n    },\n    lightness: function (color) {\n        return new Dimension(color.toHSL().l * 100, '%');\n    },\n    hsvhue: function(color) {\n        return new Dimension(color.toHSV().h);\n    },\n    hsvsaturation: function (color) {\n        return new Dimension(color.toHSV().s * 100, '%');\n    },\n    hsvvalue: function (color) {\n        return new Dimension(color.toHSV().v * 100, '%');\n    },\n    red: function (color) {\n        return new Dimension(color.rgb[0]);\n    },\n    green: function (color) {\n        return new Dimension(color.rgb[1]);\n    },\n    blue: function (color) {\n        return new Dimension(color.rgb[2]);\n    },\n    alpha: function (color) {\n        return new Dimension(color.toHSL().a);\n    },\n    luma: function (color) {\n        return new Dimension(color.luma() * color.alpha * 100, '%');\n    },\n    luminance: function (color) {\n        var luminance =\n            (0.2126 * color.rgb[0] / 255) +\n                (0.7152 * color.rgb[1] / 255) +\n                (0.0722 * color.rgb[2] / 255);\n\n        return new Dimension(luminance * color.alpha * 100, '%');\n    },\n    saturate: function (color, amount, method) {\n        // filter: saturate(3.2);\n        // should be kept as is, so check for color\n        if (!color.rgb) {\n            return null;\n        }\n        var hsl = color.toHSL();\n\n        if (typeof method !== \"undefined\" && method.value === \"relative\") {\n            hsl.s +=  hsl.s * amount.value / 100;\n        }\n        else {\n            hsl.s += amount.value / 100;\n        }\n        hsl.s = clamp(hsl.s);\n        return hsla(hsl);\n    },\n    desaturate: function (color, amount, method) {\n        var hsl = color.toHSL();\n\n        if (typeof method !== \"undefined\" && method.value === \"relative\") {\n            hsl.s -=  hsl.s * amount.value / 100;\n        }\n        else {\n            hsl.s -= amount.value / 100;\n        }\n        hsl.s = clamp(hsl.s);\n        return hsla(hsl);\n    },\n    lighten: function (color, amount, method) {\n        var hsl = color.toHSL();\n\n        if (typeof method !== \"undefined\" && method.value === \"relative\") {\n            hsl.l +=  hsl.l * amount.value / 100;\n        }\n        else {\n            hsl.l += amount.value / 100;\n        }\n        hsl.l = clamp(hsl.l);\n        return hsla(hsl);\n    },\n    darken: function (color, amount, method) {\n        var hsl = color.toHSL();\n\n        if (typeof method !== \"undefined\" && method.value === \"relative\") {\n            hsl.l -=  hsl.l * amount.value / 100;\n        }\n        else {\n            hsl.l -= amount.value / 100;\n        }\n        hsl.l = clamp(hsl.l);\n        return hsla(hsl);\n    },\n    fadein: function (color, amount, method) {\n        var hsl = color.toHSL();\n\n        if (typeof method !== \"undefined\" && method.value === \"relative\") {\n            hsl.a +=  hsl.a * amount.value / 100;\n        }\n        else {\n            hsl.a += amount.value / 100;\n        }\n        hsl.a = clamp(hsl.a);\n        return hsla(hsl);\n    },\n    fadeout: function (color, amount, method) {\n        var hsl = color.toHSL();\n\n        if (typeof method !== \"undefined\" && method.value === \"relative\") {\n            hsl.a -=  hsl.a * amount.value / 100;\n        }\n        else {\n            hsl.a -= amount.value / 100;\n        }\n        hsl.a = clamp(hsl.a);\n        return hsla(hsl);\n    },\n    fade: function (color, amount) {\n        var hsl = color.toHSL();\n\n        hsl.a = amount.value / 100;\n        hsl.a = clamp(hsl.a);\n        return hsla(hsl);\n    },\n    spin: function (color, amount) {\n        var hsl = color.toHSL();\n        var hue = (hsl.h + amount.value) % 360;\n\n        hsl.h = hue < 0 ? 360 + hue : hue;\n\n        return hsla(hsl);\n    },\n    //\n    // Copyright (c) 2006-2009 Hampton Catlin, Natalie Weizenbaum, and Chris Eppstein\n    // http://sass-lang.com\n    //\n    mix: function (color1, color2, weight) {\n        if (!color1.toHSL || !color2.toHSL) {\n            console.log(color2.type);\n            console.dir(color2);\n        }\n        if (!weight) {\n            weight = new Dimension(50);\n        }\n        var p = weight.value / 100.0;\n        var w = p * 2 - 1;\n        var a = color1.toHSL().a - color2.toHSL().a;\n\n        var w1 = (((w * a == -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n        var w2 = 1 - w1;\n\n        var rgb = [color1.rgb[0] * w1 + color2.rgb[0] * w2,\n            color1.rgb[1] * w1 + color2.rgb[1] * w2,\n            color1.rgb[2] * w1 + color2.rgb[2] * w2];\n\n        var alpha = color1.alpha * p + color2.alpha * (1 - p);\n\n        return new Color(rgb, alpha);\n    },\n    greyscale: function (color) {\n        return colorFunctions.desaturate(color, new Dimension(100));\n    },\n    contrast: function (color, color1, color2, threshold) {\n        // Return which of `color1` and `color2` has the greatest contrast with `color`\n        // according to the standard WCAG contrast ratio calculation.\n        // http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n        // The threshold param is no longer used, in line with SASS.\n        // filter: contrast(3.2);\n        // should be kept as is, so check for color\n        if (!color.rgb) {\n            return null;\n        }\n        if (typeof color1 === 'undefined') {\n            color1 = colorFunctions.rgba(0, 0, 0, 1.0);\n        }\n        if (typeof color2 === 'undefined') {\n            color2 = colorFunctions.rgba(255, 255, 255, 1.0);\n        }\n        var contrast1, contrast2;\n        var luma = color.luma();\n        var luma1 = color1.luma();\n        var luma2 = color2.luma();\n        // Calculate contrast ratios for each color\n        if (luma > luma1) {\n            contrast1 = (luma + 0.05) / (luma1 + 0.05);\n        } else {\n            contrast1 = (luma1 + 0.05) / (luma + 0.05);\n        }\n        if (luma > luma2) {\n            contrast2 = (luma + 0.05) / (luma2 + 0.05);\n        } else {\n            contrast2 = (luma2 + 0.05) / (luma + 0.05);\n        }\n        if (contrast1 > contrast2) {\n            return color1;\n        } else {\n            return color2;\n        }\n    },\n    argb: function (color) {\n        return new Anonymous(color.toARGB());\n    },\n    color: function(c) {\n        if ((c instanceof Quoted) &&\n            (/^#([a-f0-9]{6}|[a-f0-9]{3})$/i.test(c.value))) {\n            return new Color(c.value.slice(1));\n        }\n        if ((c instanceof Color) || (c = Color.fromKeyword(c.value))) {\n            c.value = undefined;\n            return c;\n        }\n        throw {\n            type:    \"Argument\",\n            message: \"argument must be a color keyword or 3/6 digit hex e.g. #FFF\"\n        };\n    },\n    tint: function(color, amount) {\n        return colorFunctions.mix(colorFunctions.rgb(255, 255, 255), color, amount);\n    },\n    shade: function(color, amount) {\n        return colorFunctions.mix(colorFunctions.rgb(0, 0, 0), color, amount);\n    }\n};\nfunctionRegistry.addMultiple(colorFunctions);\n"]}