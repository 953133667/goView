{"version":3,"sources":["import-sequencer.js"],"names":[],"mappings":"AAAA,SAAS,eAAT,CAAyB,gBAAzB,EAA2C;AACvC,SAAK,OAAL,GAAe,EAAf;AACA,SAAK,eAAL,GAAuB,EAAvB;AACA,SAAK,iBAAL,GAAyB,gBAAzB;AACA,SAAK,aAAL,GAAqB,CAArB;AACH;;AAED,gBAAgB,SAAhB,CAA0B,SAA1B,GAAsC,UAAS,QAAT,EAAmB;AACrD,QAAI,kBAAkB,IAAtB;AAAA,QACI,aAAa;AACT,kBAAU,QADD;AAET,cAAM,IAFG;AAGT,iBAAS;AAHA,KADjB;AAMA,SAAK,OAAL,CAAa,IAAb,CAAkB,UAAlB;AACA,WAAO,YAAW;AACd,mBAAW,IAAX,GAAkB,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAlB;AACA,mBAAW,OAAX,GAAqB,IAArB;AACA,wBAAgB,MAAhB;AACH,KAJD;AAKH,CAbD;;AAeA,gBAAgB,SAAhB,CAA0B,iBAA1B,GAA8C,UAAS,QAAT,EAAmB;AAC7D,SAAK,eAAL,CAAqB,IAArB,CAA0B,QAA1B;AACH,CAFD;;AAIA,gBAAgB,SAAhB,CAA0B,MAA1B,GAAmC,YAAW;AAC1C,SAAK,aAAL;AACA,QAAI;AACA,eAAO,IAAP,EAAa;AACT,mBAAO,KAAK,OAAL,CAAa,MAAb,GAAsB,CAA7B,EAAgC;AAC5B,oBAAI,aAAa,KAAK,OAAL,CAAa,CAAb,CAAjB;AACA,oBAAI,CAAC,WAAW,OAAhB,EAAyB;AACrB;AACH;AACD,qBAAK,OAAL,GAAe,KAAK,OAAL,CAAa,KAAb,CAAmB,CAAnB,CAAf;AACA,2BAAW,QAAX,CAAoB,KAApB,CAA0B,IAA1B,EAAgC,WAAW,IAA3C;AACH;AACD,gBAAI,KAAK,eAAL,CAAqB,MAArB,KAAgC,CAApC,EAAuC;AACnC;AACH;AACD,gBAAI,iBAAiB,KAAK,eAAL,CAAqB,CAArB,CAArB;AACA,iBAAK,eAAL,GAAuB,KAAK,eAAL,CAAqB,KAArB,CAA2B,CAA3B,CAAvB;AACA;AACH;AACJ,KAjBD,SAiBU;AACN,aAAK,aAAL;AACH;AACD,QAAI,KAAK,aAAL,KAAuB,CAAvB,IAA4B,KAAK,iBAArC,EAAwD;AACpD,aAAK,iBAAL;AACH;AACJ,CAzBD;;AA2BA,OAAO,OAAP,GAAiB,eAAjB","file":"import-sequencer-compiled.js","sourcesContent":["function ImportSequencer(onSequencerEmpty) {\n    this.imports = [];\n    this.variableImports = [];\n    this._onSequencerEmpty = onSequencerEmpty;\n    this._currentDepth = 0;\n}\n\nImportSequencer.prototype.addImport = function(callback) {\n    var importSequencer = this,\n        importItem = {\n            callback: callback,\n            args: null,\n            isReady: false\n        };\n    this.imports.push(importItem);\n    return function() {\n        importItem.args = Array.prototype.slice.call(arguments, 0);\n        importItem.isReady = true;\n        importSequencer.tryRun();\n    };\n};\n\nImportSequencer.prototype.addVariableImport = function(callback) {\n    this.variableImports.push(callback);\n};\n\nImportSequencer.prototype.tryRun = function() {\n    this._currentDepth++;\n    try {\n        while (true) {\n            while (this.imports.length > 0) {\n                var importItem = this.imports[0];\n                if (!importItem.isReady) {\n                    return;\n                }\n                this.imports = this.imports.slice(1);\n                importItem.callback.apply(null, importItem.args);\n            }\n            if (this.variableImports.length === 0) {\n                break;\n            }\n            var variableImport = this.variableImports[0];\n            this.variableImports = this.variableImports.slice(1);\n            variableImport();\n        }\n    } finally {\n        this._currentDepth--;\n    }\n    if (this._currentDepth === 0 && this._onSequencerEmpty) {\n        this._onSequencerEmpty();\n    }\n};\n\nmodule.exports = ImportSequencer;\n"]}