{"version":3,"sources":["function-importer.js"],"names":[],"mappings":"AAAA,IAAI,YAAY,QAAQ,eAAR,CAAhB;AAAA,IACI,OAAO,QAAQ,SAAR,CADX;;AAGA,IAAI,mBAAmB,OAAO,OAAP,GAAiB,SAAS,gBAAT,CAA0B,OAA1B,EAAmC,QAAnC,EAA6C;AACjF,SAAK,QAAL,GAAgB,QAAhB;AACH,CAFD;;AAIA,iBAAiB,SAAjB,CAA2B,IAA3B,GAAkC,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AAC3D,QAAI,SAAS,EAAb;AAAA,QACI,MADJ;AAAA,QAEI,QAFJ;;AAIA,eAAW;AACP,aAAK,UAAS,IAAT,EAAe,IAAf,EAAqB;AACtB,mBAAO,IAAP,IAAe,IAAf;AACH,SAHM;AAIP,qBAAa,UAAS,SAAT,EAAoB;AAC7B,mBAAO,IAAP,CAAY,SAAZ,EAAuB,OAAvB,CAA+B,UAAS,IAAT,EAAe;AAC1C,uBAAO,IAAP,IAAe,UAAU,IAAV,CAAf;AACH,aAFD;AAGH;AARM,KAAX;;AAWA,QAAI;AACA,iBAAS,IAAI,QAAJ,CAAa,WAAb,EAA0B,MAA1B,EAAkC,UAAlC,EAA8C,QAA9C,CAAT;AACA,eAAO,QAAP,EAAiB,IAAjB,EAAuB,KAAK,QAA5B;AACH,KAHD,CAGE,OAAM,CAAN,EAAS;AACP,iBAAS,IAAI,SAAJ,CAAc;AACnB,qBAAS,+BAA+B,EAAE,IAAjC,GAAwC,IAAxC,GAA+C,EAAE,OAAF,CAAU,OAAV,CAAkB,MAAlB,EAA0B,GAA1B,CAA/C,GAAgF,GADtE;AAEnB,sBAAU,KAAK,QAAL,CAAc;AAFL,SAAd,CAAT,EAGI,IAHJ;AAIH;;AAED,aAAS,IAAT,EAAe,EAAE,WAAW,MAAb,EAAf;AACH,CA3BD","file":"function-importer-compiled.js","sourcesContent":["var LessError = require('../less-error'),\n    tree = require(\"../tree\");\n\nvar FunctionImporter = module.exports = function FunctionImporter(context, fileInfo) {\n    this.fileInfo = fileInfo;\n};\n\nFunctionImporter.prototype.eval = function(contents, callback) {\n    var loaded = {},\n        loader,\n        registry;\n\n    registry = {\n        add: function(name, func) {\n            loaded[name] = func;\n        },\n        addMultiple: function(functions) {\n            Object.keys(functions).forEach(function(name) {\n                loaded[name] = functions[name];\n            });\n        }\n    };\n\n    try {\n        loader = new Function(\"functions\", \"tree\", \"fileInfo\", contents);\n        loader(registry, tree, this.fileInfo);\n    } catch(e) {\n        callback(new LessError({\n            message: \"Plugin evaluation error: '\" + e.name + ': ' + e.message.replace(/[\"]/g, \"'\") + \"'\" ,\n            filename: this.fileInfo.filename\n        }), null );\n    }\n\n    callback(null, { functions: loaded });\n};\n"]}