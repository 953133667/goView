{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n"]}