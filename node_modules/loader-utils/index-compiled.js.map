{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var JSON5 = require(\"json5\");\r\nvar path = require(\"path\");\r\nvar assign = require(\"object-assign\");\r\nvar emojiRegex = /[\\uD800-\\uDFFF]./;\r\nvar emojiList = require(\"emojis-list\").filter(function(emoji) {\r\n\treturn emojiRegex.test(emoji)\r\n});\r\n\r\nvar baseEncodeTables = {\r\n\t26: \"abcdefghijklmnopqrstuvwxyz\",\r\n\t32: \"123456789abcdefghjkmnpqrstuvwxyz\", // no 0lio\r\n\t36: \"0123456789abcdefghijklmnopqrstuvwxyz\",\r\n\t49: \"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\", // no lIO\r\n\t52: \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n\t58: \"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\", // no 0lIO\r\n\t62: \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n\t64: \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_\"\r\n};\r\nvar emojiCache = {};\r\n\r\nfunction encodeStringToEmoji(content, length) {\r\n\tif (emojiCache[content]) return emojiCache[content];\r\n\tlength = length || 1;\r\n\tvar emojis = [];\r\n\tdo {\r\n\t\tvar index = Math.floor(Math.random() * emojiList.length);\r\n\t\temojis.push(emojiList[index]);\r\n\t\temojiList.splice(index, 1);\r\n\t} while (--length > 0);\r\n\tvar emojiEncoding = emojis.join('');\r\n\temojiCache[content] = emojiEncoding;\r\n\treturn emojiEncoding;\r\n}\r\n\r\nfunction encodeBufferToBase(buffer, base) {\r\n\tvar encodeTable = baseEncodeTables[base];\r\n\tif (!encodeTable) throw new Error(\"Unknown encoding base\" + base);\r\n\r\n\tvar readLength = buffer.length;\r\n\r\n\tvar Big = require('big.js');\r\n\tBig.RM = Big.DP = 0;\r\n\tvar b = new Big(0);\r\n\tfor (var i = readLength - 1; i >= 0; i--) {\r\n\t\tb = b.times(256).plus(buffer[i]);\r\n\t}\r\n\r\n\tvar output = \"\";\r\n\twhile (b.gt(0)) {\r\n\t\toutput = encodeTable[b.mod(base)] + output;\r\n\t\tb = b.div(base);\r\n\t}\r\n\r\n\tBig.DP = 20;\r\n\tBig.RM = 1;\r\n\r\n\treturn output;\r\n}\r\n\r\nexports.parseQuery = function parseQuery(query) {\r\n\tvar specialValues = {\r\n\t\t'null': null,\r\n\t\t'true': true,\r\n\t\t'false': false\r\n\t};\r\n\tif(!query) return {};\r\n\tif(typeof query !== \"string\")\r\n\t\tthrow new Error(\"parseQuery should get a string as first argument\");\r\n\tif(query.substr(0, 1) !== \"?\")\r\n\t\tthrow new Error(\"a valid query string passed to parseQuery should begin with '?'\");\r\n\tquery = query.substr(1);\r\n\tvar queryLength = query.length;\r\n\tif(query.substr(0, 1) === \"{\" && query.substr(-1) === \"}\") {\r\n\t\treturn JSON5.parse(query);\r\n\t}\r\n\tvar queryArgs = query.split(/[,\\&]/g);\r\n\tvar result = {};\r\n\tqueryArgs.forEach(function(arg) {\r\n\t\tvar idx = arg.indexOf(\"=\");\r\n\t\tif(idx >= 0) {\r\n\t\t\tvar name = arg.substr(0, idx);\r\n\t\t\tvar value = decodeURIComponent(arg.substr(idx+1));\r\n\t\t\tif (specialValues.hasOwnProperty(value)) {\r\n\t\t\t\tvalue = specialValues[value];\r\n\t\t\t}\r\n\t\t\tif(name.substr(-2) === \"[]\") {\r\n\t\t\t\tname = decodeURIComponent(name.substr(0, name.length-2));\r\n\t\t\t\tif(!Array.isArray(result[name]))\r\n\t\t\t\t\tresult[name] = [];\r\n\t\t\t\tresult[name].push(value);\r\n\t\t\t} else {\r\n\t\t\t\tname = decodeURIComponent(name);\r\n\t\t\t\tresult[name] = value;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(arg.substr(0, 1) === \"-\") {\r\n\t\t\t\tresult[decodeURIComponent(arg.substr(1))] = false;\r\n\t\t\t} else if(arg.substr(0, 1) === \"+\") {\r\n\t\t\t\tresult[decodeURIComponent(arg.substr(1))] = true;\r\n\t\t\t} else {\r\n\t\t\t\tresult[decodeURIComponent(arg)] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn result;\r\n};\r\n\r\nexports.getLoaderConfig = function(loaderContext, defaultConfigKey) {\r\n\tif (!defaultConfigKey) {\r\n\t\tthrow new Error(\"Default config key missing\");\r\n\t}\r\n\tvar query = exports.parseQuery(loaderContext.query);\r\n\tvar configKey = query.config || defaultConfigKey;\r\n\tvar config = loaderContext.options[configKey] || {};\r\n\r\n\tdelete query.config;\r\n\r\n\treturn assign({}, config, query);\r\n};\r\n\r\nexports.stringifyRequest = function(loaderContext, request) {\r\n\tvar splitted = request.split(\"!\");\r\n\tvar context = loaderContext.context || (loaderContext.options && loaderContext.options.context);\r\n\treturn JSON.stringify(splitted.map(function(part) {\r\n\t\tif(/^\\/|^[A-Z]:/i.test(part) && context) {\r\n\t\t\tpart = path.relative(context, part);\r\n\t\t\tif(/^[A-Z]:/i.test(part)) {\r\n\t\t\t\treturn part;\r\n\t\t\t} else {\r\n\t\t\t\treturn \"./\" + part.replace(/\\\\/g, \"/\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn part;\r\n\t}).join(\"!\"));\r\n};\r\n\r\nfunction dotRequest(obj) {\r\n\treturn obj.request;\r\n}\r\n\r\nexports.getRemainingRequest = function(loaderContext) {\r\n\tvar request = loaderContext.loaders.slice(loaderContext.loaderIndex+1).map(dotRequest).concat([loaderContext.resource]);\r\n\treturn request.join(\"!\");\r\n};\r\n\r\nexports.getCurrentRequest = function(loaderContext) {\r\n\tvar request = loaderContext.loaders.slice(loaderContext.loaderIndex).map(dotRequest).concat([loaderContext.resource]);\r\n\treturn request.join(\"!\");\r\n};\r\n\r\nexports.isUrlRequest = function(url, root) {\r\n\t// An URL is not an request if\r\n\t// 1. it's a Data Url\r\n\t// 2. it's an absolute url or and protocol-relative\r\n\t// 3. it's some kind of url for a template\r\n\tif(/^data:|^chrome-extension:|^(https?:)?\\/\\/|^[\\{\\}\\[\\]#*;,'§\\$%&\\(=?`´\\^°<>]/.test(url)) return false;\r\n\t// 4. It's also not an request if root isn't set and it's a root-relative url\r\n\tif((root === undefined || root === false) && /^\\//.test(url)) return false;\r\n\treturn true;\r\n};\r\n\r\nexports.urlToRequest = function(url, root) {\r\n\tvar moduleRequestRegex = /^[^?]*~/;\r\n\tvar request;\r\n\r\n\tif(/^[a-zA-Z]:\\\\|^\\\\\\\\/.test(url)) {\r\n\t\t// absolute windows path, keep it\r\n\t\trequest = url;\r\n\t} else if(root !== undefined && root !== false && /^\\//.test(url)) {\r\n\t\t// if root is set and the url is root-relative\r\n\t\tswitch(typeof root) {\r\n\t\t\t// 1. root is a string: root is prefixed to the url\r\n\t\t\tcase \"string\":\r\n\t\t\t\t// special case: `~` roots convert to module request\r\n\t\t\t\tif (moduleRequestRegex.test(root)) {\r\n\t\t\t\t\trequest = root.replace(/([^~\\/])$/, \"$1/\") + url.slice(1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trequest = root + url;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t// 2. root is `true`: absolute paths are allowed\r\n\t\t\t//    *nix only, windows-style absolute paths are always allowed as they doesn't start with a `/`\r\n\t\t\tcase \"boolean\":\r\n\t\t\t\trequest = url;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"Unexpected parameters to loader-utils 'urlToRequest': url = \" + url + \", root = \" + root + \".\");\r\n\t\t}\r\n\t} else if(/^\\.\\.?\\//.test(url)) {\r\n\t\t// A relative url stays\r\n\t\trequest = url;\r\n\t} else {\r\n\t\t// every other url is threaded like a relative url\r\n\t\trequest = \"./\" + url;\r\n\t}\r\n\r\n\t// A `~` makes the url an module\r\n\tif (moduleRequestRegex.test(request)) {\r\n\t\trequest = request.replace(moduleRequestRegex, \"\");\r\n\t}\r\n\r\n\treturn request;\r\n};\r\n\r\nexports.parseString = function parseString(str) {\r\n\ttry {\r\n\t\tif(str[0] === '\"') return JSON.parse(str);\r\n\t\tif(str[0] === \"'\" && str.substr(str.length - 1) === \"'\") {\r\n\t\t\treturn parseString(str.replace(/\\\\.|\"/g, function(x) {\r\n\t\t\t\tif(x === '\"') return '\\\\\"';\r\n\t\t\t\treturn x;\r\n\t\t\t}).replace(/^'|'$/g, '\"'));\r\n\t\t}\r\n\t\treturn JSON.parse('\"' + str + '\"');\r\n\t} catch(e) {\r\n\t\treturn str;\r\n\t}\r\n};\r\n\r\nexports.getHashDigest = function getHashDigest(buffer, hashType, digestType, maxLength) {\r\n\thashType = hashType || \"md5\";\r\n\tmaxLength = maxLength || 9999;\r\n\tvar hash = require(\"crypto\").createHash(hashType);\r\n\thash.update(buffer);\r\n\tif (digestType === \"base26\" || digestType === \"base32\" || digestType === \"base36\" ||\r\n\t    digestType === \"base49\" || digestType === \"base52\" || digestType === \"base58\" ||\r\n\t    digestType === \"base62\" || digestType === \"base64\") {\r\n\t\treturn encodeBufferToBase(hash.digest(), digestType.substr(4)).substr(0, maxLength);\r\n\t} else {\r\n\t\treturn hash.digest(digestType || \"hex\").substr(0, maxLength);\r\n\t}\r\n};\r\n\r\nexports.interpolateName = function interpolateName(loaderContext, name, options) {\r\n\tvar filename = name || \"[hash].[ext]\";\r\n\tvar context = options.context;\r\n\tvar content = options.content;\r\n\tvar regExp = options.regExp;\r\n\tvar ext = \"bin\";\r\n\tvar basename = \"file\";\r\n\tvar directory = \"\";\r\n\tvar folder = \"\";\r\n\tif(loaderContext.resourcePath) {\r\n\t\tvar resourcePath = loaderContext.resourcePath;\r\n\t\tvar idx = resourcePath.lastIndexOf(\".\");\r\n\t\tvar i = resourcePath.lastIndexOf(\"\\\\\");\r\n\t\tvar j = resourcePath.lastIndexOf(\"/\");\r\n\t\tvar p = i < 0 ? j : j < 0 ? i : i < j ? i : j;\r\n\t\tif(idx >= 0) {\r\n\t\t\text = resourcePath.substr(idx+1);\r\n\t\t\tresourcePath = resourcePath.substr(0, idx);\r\n\t\t}\r\n\t\tif(p >= 0) {\r\n\t\t\tbasename = resourcePath.substr(p+1);\r\n\t\t\tresourcePath = resourcePath.substr(0, p+1);\r\n\t\t}\r\n\t\tif (typeof context !== 'undefined') {\r\n\t\t\tdirectory = path.relative(context, resourcePath + \"_\").replace(/\\\\/g, \"/\").replace(/\\.\\.(\\/)?/g, \"_$1\");\r\n\t\t\tdirectory = directory.substr(0, directory.length-1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdirectory = resourcePath.replace(/\\\\/g, \"/\").replace(/\\.\\.(\\/)?/g, \"_$1\");\r\n\t\t}\r\n\t\tif (directory.length === 1) {\r\n\t\t\tdirectory = \"\";\r\n\t\t} else if (directory.length > 1) {\r\n\t\t\tfolder = path.basename(directory);\r\n\t\t}\r\n\t}\r\n\tvar url = filename;\r\n\tif(content) {\r\n\t\t// Match hash template\r\n\t\turl = url.replace(/\\[(?:(\\w+):)?hash(?::([a-z]+\\d*))?(?::(\\d+))?\\]/ig, function() {\r\n\t\t\treturn exports.getHashDigest(content, arguments[1], arguments[2], parseInt(arguments[3], 10));\r\n\t\t}).replace(/\\[emoji(?::(\\d+))?\\]/ig, function() {\r\n\t\t\treturn encodeStringToEmoji(content, arguments[1]);\r\n\t\t});\r\n\t}\r\n\turl = url.replace(/\\[ext\\]/ig, function() {\r\n\t\treturn ext;\r\n\t}).replace(/\\[name\\]/ig, function() {\r\n\t\treturn basename;\r\n\t}).replace(/\\[path\\]/ig, function() {\r\n\t\treturn directory;\r\n\t}).replace(/\\[folder\\]/ig, function() {\r\n\t\treturn folder;\r\n\t});\r\n\tif(regExp && loaderContext.resourcePath) {\r\n\t\tvar re = new RegExp(regExp);\r\n\t\tvar match = loaderContext.resourcePath.match(re);\r\n\t\tif(match) {\r\n\t\t\tfor (var i = 0; i < match.length; i++) {\r\n\t\t\t\tvar re = new RegExp(\"\\\\[\" + i + \"\\\\]\", \"ig\");\r\n\t\t\t\turl = url.replace(re, match[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(typeof loaderContext.options === \"object\" && typeof loaderContext.options.customInterpolateName === \"function\") {\r\n\t\turl = loaderContext.options.customInterpolateName.call(loaderContext, url, name, options);\r\n\t}\r\n\treturn url;\r\n};\r\n"]}