{"version":3,"sources":["makePromise.js"],"names":[],"mappings":"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","file":"makePromise-compiled.js","sourcesContent":["/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function makePromise(environment) {\n\n\t\tvar tasks = environment.scheduler;\n\t\tvar emitRejection = initEmitRejection();\n\n\t\tvar objectCreate = Object.create ||\n\t\t\tfunction(proto) {\n\t\t\t\tfunction Child() {}\n\t\t\t\tChild.prototype = proto;\n\t\t\t\treturn new Child();\n\t\t\t};\n\n\t\t/**\n\t\t * Create a promise whose fate is determined by resolver\n\t\t * @constructor\n\t\t * @returns {Promise} promise\n\t\t * @name Promise\n\t\t */\n\t\tfunction Promise(resolver, handler) {\n\t\t\tthis._handler = resolver === Handler ? handler : init(resolver);\n\t\t}\n\n\t\t/**\n\t\t * Run the supplied resolver\n\t\t * @param resolver\n\t\t * @returns {Pending}\n\t\t */\n\t\tfunction init(resolver) {\n\t\t\tvar handler = new Pending();\n\n\t\t\ttry {\n\t\t\t\tresolver(promiseResolve, promiseReject, promiseNotify);\n\t\t\t} catch (e) {\n\t\t\t\tpromiseReject(e);\n\t\t\t}\n\n\t\t\treturn handler;\n\n\t\t\t/**\n\t\t\t * Transition from pre-resolution state to post-resolution state, notifying\n\t\t\t * all listeners of the ultimate fulfillment or rejection\n\t\t\t * @param {*} x resolution value\n\t\t\t */\n\t\t\tfunction promiseResolve (x) {\n\t\t\t\thandler.resolve(x);\n\t\t\t}\n\t\t\t/**\n\t\t\t * Reject this promise with reason, which will be used verbatim\n\t\t\t * @param {Error|*} reason rejection reason, strongly suggested\n\t\t\t *   to be an Error type\n\t\t\t */\n\t\t\tfunction promiseReject (reason) {\n\t\t\t\thandler.reject(reason);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t * Issue a progress event, notifying all progress listeners\n\t\t\t * @param {*} x progress event payload to pass to all listeners\n\t\t\t */\n\t\t\tfunction promiseNotify (x) {\n\t\t\t\thandler.notify(x);\n\t\t\t}\n\t\t}\n\n\t\t// Creation\n\n\t\tPromise.resolve = resolve;\n\t\tPromise.reject = reject;\n\t\tPromise.never = never;\n\n\t\tPromise._defer = defer;\n\t\tPromise._handler = getHandler;\n\n\t\t/**\n\t\t * Returns a trusted promise. If x is already a trusted promise, it is\n\t\t * returned, otherwise returns a new trusted Promise which follows x.\n\t\t * @param  {*} x\n\t\t * @return {Promise} promise\n\t\t */\n\t\tfunction resolve(x) {\n\t\t\treturn isPromise(x) ? x\n\t\t\t\t: new Promise(Handler, new Async(getHandler(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a reject promise with x as its reason (x is used verbatim)\n\t\t * @param {*} x\n\t\t * @returns {Promise} rejected promise\n\t\t */\n\t\tfunction reject(x) {\n\t\t\treturn new Promise(Handler, new Async(new Rejected(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that remains pending forever\n\t\t * @returns {Promise} forever-pending promise.\n\t\t */\n\t\tfunction never() {\n\t\t\treturn foreverPendingPromise; // Should be frozen\n\t\t}\n\n\t\t/**\n\t\t * Creates an internal {promise, resolver} pair\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction defer() {\n\t\t\treturn new Promise(Handler, new Pending());\n\t\t}\n\n\t\t// Transformation and flow control\n\n\t\t/**\n\t\t * Transform this promise's fulfillment value, returning a new Promise\n\t\t * for the transformed result.  If the promise cannot be fulfilled, onRejected\n\t\t * is called with the reason.  onProgress *may* be called with updates toward\n\t\t * this promise's fulfillment.\n\t\t * @param {function=} onFulfilled fulfillment handler\n\t\t * @param {function=} onRejected rejection handler\n\t\t * @param {function=} onProgress @deprecated progress handler\n\t\t * @return {Promise} new promise\n\t\t */\n\t\tPromise.prototype.then = function(onFulfilled, onRejected, onProgress) {\n\t\t\tvar parent = this._handler;\n\t\t\tvar state = parent.join().state();\n\n\t\t\tif ((typeof onFulfilled !== 'function' && state > 0) ||\n\t\t\t\t(typeof onRejected !== 'function' && state < 0)) {\n\t\t\t\t// Short circuit: value will not change, simply share handler\n\t\t\t\treturn new this.constructor(Handler, parent);\n\t\t\t}\n\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\n\t\t\tparent.chain(child, parent.receiver, onFulfilled, onRejected, onProgress);\n\n\t\t\treturn p;\n\t\t};\n\n\t\t/**\n\t\t * If this promise cannot be fulfilled due to an error, call onRejected to\n\t\t * handle the error. Shortcut for .then(undefined, onRejected)\n\t\t * @param {function?} onRejected\n\t\t * @return {Promise}\n\t\t */\n\t\tPromise.prototype['catch'] = function(onRejected) {\n\t\t\treturn this.then(void 0, onRejected);\n\t\t};\n\n\t\t/**\n\t\t * Creates a new, pending promise of the same type as this promise\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype._beget = function() {\n\t\t\treturn begetFrom(this._handler, this.constructor);\n\t\t};\n\n\t\tfunction begetFrom(parent, Promise) {\n\t\t\tvar child = new Pending(parent.receiver, parent.join().context);\n\t\t\treturn new Promise(Handler, child);\n\t\t}\n\n\t\t// Array combinators\n\n\t\tPromise.all = all;\n\t\tPromise.race = race;\n\t\tPromise._traverse = traverse;\n\n\t\t/**\n\t\t * Return a promise that will fulfill when all promises in the\n\t\t * input array have fulfilled, or will reject when one of the\n\t\t * promises rejects.\n\t\t * @param {array} promises array of promises\n\t\t * @returns {Promise} promise for array of fulfillment values\n\t\t */\n\t\tfunction all(promises) {\n\t\t\treturn traverseWith(snd, null, promises);\n\t\t}\n\n\t\t/**\n\t\t * Array<Promise<X>> -> Promise<Array<f(X)>>\n\t\t * @private\n\t\t * @param {function} f function to apply to each promise's value\n\t\t * @param {Array} promises array of promises\n\t\t * @returns {Promise} promise for transformed values\n\t\t */\n\t\tfunction traverse(f, promises) {\n\t\t\treturn traverseWith(tryCatch2, f, promises);\n\t\t}\n\n\t\tfunction traverseWith(tryMap, f, promises) {\n\t\t\tvar handler = typeof f === 'function' ? mapAt : settleAt;\n\n\t\t\tvar resolver = new Pending();\n\t\t\tvar pending = promises.length >>> 0;\n\t\t\tvar results = new Array(pending);\n\n\t\t\tfor (var i = 0, x; i < promises.length && !resolver.resolved; ++i) {\n\t\t\t\tx = promises[i];\n\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttraverseAt(promises, handler, i, x, resolver);\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t}\n\n\t\t\treturn new Promise(Handler, resolver);\n\n\t\t\tfunction mapAt(i, x, resolver) {\n\t\t\t\tif(!resolver.resolved) {\n\t\t\t\t\ttraverseAt(promises, settleAt, i, tryMap(f, x, i), resolver);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction settleAt(i, x, resolver) {\n\t\t\t\tresults[i] = x;\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction traverseAt(promises, handler, i, x, resolver) {\n\t\t\tif (maybeThenable(x)) {\n\t\t\t\tvar h = getHandlerMaybeThenable(x);\n\t\t\t\tvar s = h.state();\n\n\t\t\t\tif (s === 0) {\n\t\t\t\t\th.fold(handler, i, void 0, resolver);\n\t\t\t\t} else if (s > 0) {\n\t\t\t\t\thandler(i, h.value, resolver);\n\t\t\t\t} else {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thandler(i, x, resolver);\n\t\t\t}\n\t\t}\n\n\t\tPromise._visitRemaining = visitRemaining;\n\t\tfunction visitRemaining(promises, start, handler) {\n\t\t\tfor(var i=start; i<promises.length; ++i) {\n\t\t\t\tmarkAsHandled(getHandler(promises[i]), handler);\n\t\t\t}\n\t\t}\n\n\t\tfunction markAsHandled(h, handler) {\n\t\t\tif(h === handler) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar s = h.state();\n\t\t\tif(s === 0) {\n\t\t\t\th.visit(h, void 0, h._unreport);\n\t\t\t} else if(s < 0) {\n\t\t\t\th._unreport();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fulfill-reject competitive race. Return a promise that will settle\n\t\t * to the same state as the earliest input promise to settle.\n\t\t *\n\t\t * WARNING: The ES6 Promise spec requires that race()ing an empty array\n\t\t * must return a promise that is pending forever.  This implementation\n\t\t * returns a singleton forever-pending promise, the same singleton that is\n\t\t * returned by Promise.never(), thus can be checked with ===\n\t\t *\n\t\t * @param {array} promises array of promises to race\n\t\t * @returns {Promise} if input is non-empty, a promise that will settle\n\t\t * to the same outcome as the earliest input promise to settle. if empty\n\t\t * is empty, returns a promise that will never settle.\n\t\t */\n\t\tfunction race(promises) {\n\t\t\tif(typeof promises !== 'object' || promises === null) {\n\t\t\t\treturn reject(new TypeError('non-iterable passed to race()'));\n\t\t\t}\n\n\t\t\t// Sigh, race([]) is untestable unless we return *something*\n\t\t\t// that is recognizable without calling .then() on it.\n\t\t\treturn promises.length === 0 ? never()\n\t\t\t\t : promises.length === 1 ? resolve(promises[0])\n\t\t\t\t : runRace(promises);\n\t\t}\n\n\t\tfunction runRace(promises) {\n\t\t\tvar resolver = new Pending();\n\t\t\tvar i, x, h;\n\t\t\tfor(i=0; i<promises.length; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = getHandler(x);\n\t\t\t\tif(h.state() !== 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, resolver.resolve, resolver.reject);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Promise(Handler, resolver);\n\t\t}\n\n\t\t// Promise internals\n\t\t// Below this, everything is @private\n\n\t\t/**\n\t\t * Get an appropriate handler for x, without checking for cycles\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandler(x) {\n\t\t\tif(isPromise(x)) {\n\t\t\t\treturn x._handler.join();\n\t\t\t}\n\t\t\treturn maybeThenable(x) ? getHandlerUntrusted(x) : new Fulfilled(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for thenable x.\n\t\t * NOTE: You must only call this if maybeThenable(x) == true\n\t\t * @param {object|function|Promise} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerMaybeThenable(x) {\n\t\t\treturn isPromise(x) ? x._handler.join() : getHandlerUntrusted(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for potentially untrusted thenable x\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerUntrusted(x) {\n\t\t\ttry {\n\t\t\t\tvar untrustedThen = x.then;\n\t\t\t\treturn typeof untrustedThen === 'function'\n\t\t\t\t\t? new Thenable(untrustedThen, x)\n\t\t\t\t\t: new Fulfilled(x);\n\t\t\t} catch(e) {\n\t\t\t\treturn new Rejected(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Handler for a promise that is pending forever\n\t\t * @constructor\n\t\t */\n\t\tfunction Handler() {}\n\n\t\tHandler.prototype.when\n\t\t\t= Handler.prototype.become\n\t\t\t= Handler.prototype.notify // deprecated\n\t\t\t= Handler.prototype.fail\n\t\t\t= Handler.prototype._unreport\n\t\t\t= Handler.prototype._report\n\t\t\t= noop;\n\n\t\tHandler.prototype._state = 0;\n\n\t\tHandler.prototype.state = function() {\n\t\t\treturn this._state;\n\t\t};\n\n\t\t/**\n\t\t * Recursively collapse handler chain to find the handler\n\t\t * nearest to the fully resolved value.\n\t\t * @returns {object} handler nearest the fully resolved value\n\t\t */\n\t\tHandler.prototype.join = function() {\n\t\t\tvar h = this;\n\t\t\twhile(h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t}\n\t\t\treturn h;\n\t\t};\n\n\t\tHandler.prototype.chain = function(to, receiver, fulfilled, rejected, progress) {\n\t\t\tthis.when({\n\t\t\t\tresolver: to,\n\t\t\t\treceiver: receiver,\n\t\t\t\tfulfilled: fulfilled,\n\t\t\t\trejected: rejected,\n\t\t\t\tprogress: progress\n\t\t\t});\n\t\t};\n\n\t\tHandler.prototype.visit = function(receiver, fulfilled, rejected, progress) {\n\t\t\tthis.chain(failIfRejected, receiver, fulfilled, rejected, progress);\n\t\t};\n\n\t\tHandler.prototype.fold = function(f, z, c, to) {\n\t\t\tthis.when(new Fold(f, z, c, to));\n\t\t};\n\n\t\t/**\n\t\t * Handler that invokes fail() on any handler it becomes\n\t\t * @constructor\n\t\t */\n\t\tfunction FailIfRejected() {}\n\n\t\tinherit(Handler, FailIfRejected);\n\n\t\tFailIfRejected.prototype.become = function(h) {\n\t\t\th.fail();\n\t\t};\n\n\t\tvar failIfRejected = new FailIfRejected();\n\n\t\t/**\n\t\t * Handler that manages a queue of consumers waiting on a pending promise\n\t\t * @constructor\n\t\t */\n\t\tfunction Pending(receiver, inheritedContext) {\n\t\t\tPromise.createContext(this, inheritedContext);\n\n\t\t\tthis.consumers = void 0;\n\t\t\tthis.receiver = receiver;\n\t\t\tthis.handler = void 0;\n\t\t\tthis.resolved = false;\n\t\t}\n\n\t\tinherit(Handler, Pending);\n\n\t\tPending.prototype._state = 0;\n\n\t\tPending.prototype.resolve = function(x) {\n\t\t\tthis.become(getHandler(x));\n\t\t};\n\n\t\tPending.prototype.reject = function(x) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.become(new Rejected(x));\n\t\t};\n\n\t\tPending.prototype.join = function() {\n\t\t\tif (!this.resolved) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar h = this;\n\n\t\t\twhile (h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t\tif (h === this) {\n\t\t\t\t\treturn this.handler = cycle();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn h;\n\t\t};\n\n\t\tPending.prototype.run = function() {\n\t\t\tvar q = this.consumers;\n\t\t\tvar handler = this.handler;\n\t\t\tthis.handler = this.handler.join();\n\t\t\tthis.consumers = void 0;\n\n\t\t\tfor (var i = 0; i < q.length; ++i) {\n\t\t\t\thandler.when(q[i]);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.become = function(handler) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.resolved = true;\n\t\t\tthis.handler = handler;\n\t\t\tif(this.consumers !== void 0) {\n\t\t\t\ttasks.enqueue(this);\n\t\t\t}\n\n\t\t\tif(this.context !== void 0) {\n\t\t\t\thandler._report(this.context);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.when = function(continuation) {\n\t\t\tif(this.resolved) {\n\t\t\t\ttasks.enqueue(new ContinuationTask(continuation, this.handler));\n\t\t\t} else {\n\t\t\t\tif(this.consumers === void 0) {\n\t\t\t\t\tthis.consumers = [continuation];\n\t\t\t\t} else {\n\t\t\t\t\tthis.consumers.push(continuation);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tPending.prototype.notify = function(x) {\n\t\t\tif(!this.resolved) {\n\t\t\t\ttasks.enqueue(new ProgressTask(x, this));\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.fail = function(context) {\n\t\t\tvar c = typeof context === 'undefined' ? this.context : context;\n\t\t\tthis.resolved && this.handler.join().fail(c);\n\t\t};\n\n\t\tPending.prototype._report = function(context) {\n\t\t\tthis.resolved && this.handler.join()._report(context);\n\t\t};\n\n\t\tPending.prototype._unreport = function() {\n\t\t\tthis.resolved && this.handler.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Wrap another handler and force it into a future stack\n\t\t * @param {object} handler\n\t\t * @constructor\n\t\t */\n\t\tfunction Async(handler) {\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tinherit(Handler, Async);\n\n\t\tAsync.prototype.when = function(continuation) {\n\t\t\ttasks.enqueue(new ContinuationTask(continuation, this));\n\t\t};\n\n\t\tAsync.prototype._report = function(context) {\n\t\t\tthis.join()._report(context);\n\t\t};\n\n\t\tAsync.prototype._unreport = function() {\n\t\t\tthis.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Handler that wraps an untrusted thenable and assimilates it in a future stack\n\t\t * @param {function} then\n\t\t * @param {{then: function}} thenable\n\t\t * @constructor\n\t\t */\n\t\tfunction Thenable(then, thenable) {\n\t\t\tPending.call(this);\n\t\t\ttasks.enqueue(new AssimilateTask(then, thenable, this));\n\t\t}\n\n\t\tinherit(Pending, Thenable);\n\n\t\t/**\n\t\t * Handler for a fulfilled promise\n\t\t * @param {*} x fulfillment value\n\t\t * @constructor\n\t\t */\n\t\tfunction Fulfilled(x) {\n\t\t\tPromise.createContext(this);\n\t\t\tthis.value = x;\n\t\t}\n\n\t\tinherit(Handler, Fulfilled);\n\n\t\tFulfilled.prototype._state = 1;\n\n\t\tFulfilled.prototype.fold = function(f, z, c, to) {\n\t\t\trunContinuation3(f, z, this, c, to);\n\t\t};\n\n\t\tFulfilled.prototype.when = function(cont) {\n\t\t\trunContinuation1(cont.fulfilled, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tvar errorId = 0;\n\n\t\t/**\n\t\t * Handler for a rejected promise\n\t\t * @param {*} x rejection reason\n\t\t * @constructor\n\t\t */\n\t\tfunction Rejected(x) {\n\t\t\tPromise.createContext(this);\n\n\t\t\tthis.id = ++errorId;\n\t\t\tthis.value = x;\n\t\t\tthis.handled = false;\n\t\t\tthis.reported = false;\n\n\t\t\tthis._report();\n\t\t}\n\n\t\tinherit(Handler, Rejected);\n\n\t\tRejected.prototype._state = -1;\n\n\t\tRejected.prototype.fold = function(f, z, c, to) {\n\t\t\tto.become(this);\n\t\t};\n\n\t\tRejected.prototype.when = function(cont) {\n\t\t\tif(typeof cont.rejected === 'function') {\n\t\t\t\tthis._unreport();\n\t\t\t}\n\t\t\trunContinuation1(cont.rejected, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tRejected.prototype._report = function(context) {\n\t\t\ttasks.afterQueue(new ReportTask(this, context));\n\t\t};\n\n\t\tRejected.prototype._unreport = function() {\n\t\t\tif(this.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.handled = true;\n\t\t\ttasks.afterQueue(new UnreportTask(this));\n\t\t};\n\n\t\tRejected.prototype.fail = function(context) {\n\t\t\tthis.reported = true;\n\t\t\temitRejection('unhandledRejection', this);\n\t\t\tPromise.onFatalRejection(this, context === void 0 ? this.context : context);\n\t\t};\n\n\t\tfunction ReportTask(rejection, context) {\n\t\t\tthis.rejection = rejection;\n\t\t\tthis.context = context;\n\t\t}\n\n\t\tReportTask.prototype.run = function() {\n\t\t\tif(!this.rejection.handled && !this.rejection.reported) {\n\t\t\t\tthis.rejection.reported = true;\n\t\t\t\temitRejection('unhandledRejection', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejection(this.rejection, this.context);\n\t\t\t}\n\t\t};\n\n\t\tfunction UnreportTask(rejection) {\n\t\t\tthis.rejection = rejection;\n\t\t}\n\n\t\tUnreportTask.prototype.run = function() {\n\t\t\tif(this.rejection.reported) {\n\t\t\t\temitRejection('rejectionHandled', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejectionHandled(this.rejection);\n\t\t\t}\n\t\t};\n\n\t\t// Unhandled rejection hooks\n\t\t// By default, everything is a noop\n\n\t\tPromise.createContext\n\t\t\t= Promise.enterContext\n\t\t\t= Promise.exitContext\n\t\t\t= Promise.onPotentiallyUnhandledRejection\n\t\t\t= Promise.onPotentiallyUnhandledRejectionHandled\n\t\t\t= Promise.onFatalRejection\n\t\t\t= noop;\n\n\t\t// Errors and singletons\n\n\t\tvar foreverPendingHandler = new Handler();\n\t\tvar foreverPendingPromise = new Promise(Handler, foreverPendingHandler);\n\n\t\tfunction cycle() {\n\t\t\treturn new Rejected(new TypeError('Promise cycle'));\n\t\t}\n\n\t\t// Task runners\n\n\t\t/**\n\t\t * Run a single consumer\n\t\t * @constructor\n\t\t */\n\t\tfunction ContinuationTask(continuation, handler) {\n\t\t\tthis.continuation = continuation;\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tContinuationTask.prototype.run = function() {\n\t\t\tthis.handler.join().when(this.continuation);\n\t\t};\n\n\t\t/**\n\t\t * Run a queue of progress handlers\n\t\t * @constructor\n\t\t */\n\t\tfunction ProgressTask(value, handler) {\n\t\t\tthis.handler = handler;\n\t\t\tthis.value = value;\n\t\t}\n\n\t\tProgressTask.prototype.run = function() {\n\t\t\tvar q = this.handler.consumers;\n\t\t\tif(q === void 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var c, i = 0; i < q.length; ++i) {\n\t\t\t\tc = q[i];\n\t\t\t\trunNotify(c.progress, this.value, this.handler, c.receiver, c.resolver);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Assimilate a thenable, sending it's value to resolver\n\t\t * @param {function} then\n\t\t * @param {object|function} thenable\n\t\t * @param {object} resolver\n\t\t * @constructor\n\t\t */\n\t\tfunction AssimilateTask(then, thenable, resolver) {\n\t\t\tthis._then = then;\n\t\t\tthis.thenable = thenable;\n\t\t\tthis.resolver = resolver;\n\t\t}\n\n\t\tAssimilateTask.prototype.run = function() {\n\t\t\tvar h = this.resolver;\n\t\t\ttryAssimilate(this._then, this.thenable, _resolve, _reject, _notify);\n\n\t\t\tfunction _resolve(x) { h.resolve(x); }\n\t\t\tfunction _reject(x)  { h.reject(x); }\n\t\t\tfunction _notify(x)  { h.notify(x); }\n\t\t};\n\n\t\tfunction tryAssimilate(then, thenable, resolve, reject, notify) {\n\t\t\ttry {\n\t\t\t\tthen.call(thenable, resolve, reject, notify);\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fold a handler value with z\n\t\t * @constructor\n\t\t */\n\t\tfunction Fold(f, z, c, to) {\n\t\t\tthis.f = f; this.z = z; this.c = c; this.to = to;\n\t\t\tthis.resolver = failIfRejected;\n\t\t\tthis.receiver = this;\n\t\t}\n\n\t\tFold.prototype.fulfilled = function(x) {\n\t\t\tthis.f.call(this.c, this.z, x, this.to);\n\t\t};\n\n\t\tFold.prototype.rejected = function(x) {\n\t\t\tthis.to.reject(x);\n\t\t};\n\n\t\tFold.prototype.progress = function(x) {\n\t\t\tthis.to.notify(x);\n\t\t};\n\n\t\t// Other helpers\n\n\t\t/**\n\t\t * @param {*} x\n\t\t * @returns {boolean} true iff x is a trusted Promise\n\t\t */\n\t\tfunction isPromise(x) {\n\t\t\treturn x instanceof Promise;\n\t\t}\n\n\t\t/**\n\t\t * Test just enough to rule out primitives, in order to take faster\n\t\t * paths in some code\n\t\t * @param {*} x\n\t\t * @returns {boolean} false iff x is guaranteed *not* to be a thenable\n\t\t */\n\t\tfunction maybeThenable(x) {\n\t\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t\t}\n\n\t\tfunction runContinuation1(f, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject(f, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction runContinuation3(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject3(f, x, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tfunction runNotify(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.notify(x);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReturn(f, x, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction tryCatch2(f, a, b) {\n\t\t\ttry {\n\t\t\t\treturn f(a, b);\n\t\t\t} catch(e) {\n\t\t\t\treturn reject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Return f.call(thisArg, x), or if it throws return a rejected promise for\n\t\t * the thrown exception\n\t\t */\n\t\tfunction tryCatchReject(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.become(getHandler(f.call(thisArg, x)));\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Same as above, but includes the extra argument parameter.\n\t\t */\n\t\tfunction tryCatchReject3(f, x, y, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tf.call(thisArg, x, y, next);\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Return f.call(thisArg, x), or if it throws, *return* the exception\n\t\t */\n\t\tfunction tryCatchReturn(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.notify(f.call(thisArg, x));\n\t\t\t} catch(e) {\n\t\t\t\tnext.notify(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction inherit(Parent, Child) {\n\t\t\tChild.prototype = objectCreate(Parent.prototype);\n\t\t\tChild.prototype.constructor = Child;\n\t\t}\n\n\t\tfunction snd(x, y) {\n\t\t\treturn y;\n\t\t}\n\n\t\tfunction noop() {}\n\n\t\tfunction initEmitRejection() {\n\t\t\t/*global process, self, CustomEvent*/\n\t\t\tif(typeof process !== 'undefined' && process !== null\n\t\t\t\t&& typeof process.emit === 'function') {\n\t\t\t\t// Returning falsy here means to call the default\n\t\t\t\t// onPotentiallyUnhandledRejection API.  This is safe even in\n\t\t\t\t// browserify since process.emit always returns falsy in browserify:\n\t\t\t\t// https://github.com/defunctzombie/node-process/blob/master/browser.js#L40-L46\n\t\t\t\treturn function(type, rejection) {\n\t\t\t\t\treturn type === 'unhandledRejection'\n\t\t\t\t\t\t? process.emit(type, rejection.value, rejection)\n\t\t\t\t\t\t: process.emit(type, rejection);\n\t\t\t\t};\n\t\t\t} else if(typeof self !== 'undefined' && typeof CustomEvent === 'function') {\n\t\t\t\treturn (function(noop, self, CustomEvent) {\n\t\t\t\t\tvar hasCustomEvent = false;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar ev = new CustomEvent('unhandledRejection');\n\t\t\t\t\t\thasCustomEvent = ev instanceof CustomEvent;\n\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\treturn !hasCustomEvent ? noop : function(type, rejection) {\n\t\t\t\t\t\tvar ev = new CustomEvent(type, {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\treason: rejection.value,\n\t\t\t\t\t\t\t\tkey: rejection\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\t\tcancelable: true\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn !self.dispatchEvent(ev);\n\t\t\t\t\t};\n\t\t\t\t}(noop, self, CustomEvent));\n\t\t\t}\n\n\t\t\treturn noop;\n\t\t}\n\n\t\treturn Promise;\n\t};\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n"]}