{"version":3,"sources":["es6-extensions.js"],"names":[],"mappings":"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","file":"es6-extensions-compiled.js","sourcesContent":["'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._noop);\n  p._state = 1;\n  p._value = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._state === 3) {\n            val = val._value;\n          }\n          if (val._state === 1) return res(i, val._value);\n          if (val._state === 2) reject(val._value);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n"]}