{"version":3,"sources":["latest-packages.js"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,UAAR,GAAqB,IAArB;;AAEA,IAAI,eAAe,QAAQ,2BAAR,CAAnB;;AAEA,IAAI,gBAAgB,uBAAuB,YAAvB,CAApB;;AAEA,IAAI,gBAAgB,QAAQ,oCAAR,CAApB;;AAEA,IAAI,gBAAgB,uBAAuB,aAAvB,CAApB;;AAEA,IAAI,qBAAqB,QAAQ,wCAAR,CAAzB;;AAEA,IAAI,qBAAqB,uBAAuB,kBAAvB,CAAzB;;AAEA,IAAI,WAAW,QAAQ,+BAAR,CAAf;;AAEA,IAAI,YAAY,uBAAuB,QAAvB,CAAhB;;AAEA,IAAI,WAAW,QAAQ,SAAR,CAAf;;AAEA,IAAI,YAAY,uBAAuB,QAAvB,CAAhB;;AAEA,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AAAE,SAAO,OAAO,IAAI,UAAX,GAAwB,GAAxB,GAA8B,EAAE,SAAS,GAAX,EAArC;AAAwD;;AAE/F,IAAI,QAAQ,EAAZ;;AAEA,SAAS,OAAT,CAAiB,WAAjB,EAA8B;AAC5B,MAAI,MAAM,WAAN,CAAJ,EAAwB;AACtB,WAAO,MAAM,WAAN,CAAP;AACD,GAFD,MAEO;AACL,WAAO,MAAM,WAAN,IAAqB,IAAI,UAAU,OAAd,CAAsB,UAAU,OAAV,EAAmB,MAAnB,EAA2B;AAC3E,gBAAU,OAAV,CAAkB,GAAlB,CAAsB;AACpB,aAAK,gCAAgC,WAAhC,GAA8C,SAD/B;AAEpB,cAAM;AAFc,OAAtB,EAGG,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC3B,YAAI,GAAJ,EAAS;AACP,iBAAO,GAAP;AACD,SAFD,MAEO;AACL,kBAAQ,MAAM,WAAN,IAAqB,IAA7B;AACD;AACF,OATD;AAUD,KAX2B,CAA5B;AAYD;AACF;;AAED,QAAQ,OAAR,GAAkB,YAAY;AAC5B,MAAI,MAAM,CAAC,GAAG,mBAAmB,OAAvB,EAAgC,cAAc,OAAd,CAAsB,IAAtB,CAA2B,SAAS,OAAT,CAAiB,QAAjB,EAA2B;AAC9F,QAAI,gBAAJ,EAAsB,QAAtB,EAAgC,SAAhC,EAA2C,QAA3C,EAAqD,EAArD,EAAyD,IAAzD,EAA+D,IAA/D,EAAqE,KAArE,EAA4E,QAA5E,EAAsF,CAAtF,EAAyF,IAAzF,EAA+F,GAA/F;;AAEA,WAAO,cAAc,OAAd,CAAsB,IAAtB,CAA2B,SAAS,QAAT,CAAkB,QAAlB,EAA4B;AAC5D,aAAO,CAAP,EAAU;AACR,gBAAQ,SAAS,IAAT,GAAgB,SAAS,IAAjC;AACE,eAAK,CAAL;AACE,+BAAmB,EAAnB;AACA,uBAAW,EAAX;AACA,wBAAY,QAAZ,EAAsB,WAAW,MAAM,OAAN,CAAc,SAAd,CAAjC,EAA2D,KAAK,CAAhE,EAAmE,YAAY,WAAW,SAAX,GAAuB,CAAC,GAAG,cAAc,OAAlB,EAA2B,SAA3B,CAAtG;;AAEF,eAAK,CAAL;AACE,gBAAI,CAAC,QAAL,EAAe;AACb,uBAAS,IAAT,GAAgB,CAAhB;AACA;AACD;;AAED,gBAAI,EAAE,MAAM,UAAU,MAAlB,CAAJ,EAA+B;AAC7B,uBAAS,IAAT,GAAgB,CAAhB;AACA;AACD;;AAED,mBAAO,SAAS,MAAT,CAAgB,OAAhB,EAAyB,EAAzB,CAAP;;AAEF,eAAK,CAAL;AACE,mBAAO,UAAU,IAAV,CAAP;AACA,qBAAS,IAAT,GAAgB,EAAhB;AACA;;AAEF,eAAK,CAAL;AACE,iBAAK,UAAU,IAAV,EAAL;;AAEA,gBAAI,CAAC,GAAG,IAAR,EAAc;AACZ,uBAAS,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,mBAAO,SAAS,MAAT,CAAgB,OAAhB,EAAyB,EAAzB,CAAP;;AAEF,eAAK,EAAL;AACE,mBAAO,GAAG,KAAV;;AAEF,eAAK,EAAL;AACE,mBAAO,IAAP;;AAEA,gBAAI,EAAE,KAAK,IAAL,CAAU,OAAV,CAAkB,QAAlB,MAAgC,CAAlC,CAAJ,EAA0C;AACxC,uBAAS,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,mBAAO,SAAS,MAAT,CAAgB,UAAhB,EAA4B,EAA5B,CAAP;;AAEF,eAAK,EAAL;;AAEE,qBAAS,IAAT,CAAc,QAAQ,KAAK,IAAb,CAAd;AACA,6BAAiB,IAAjB,CAAsB,IAAtB;;AAEF,eAAK,EAAL;AACE,qBAAS,IAAT,GAAgB,CAAhB;AACA;;AAEF,eAAK,EAAL;AACE,qBAAS,IAAT,GAAgB,EAAhB;AACA,mBAAO,UAAU,OAAV,CAAkB,GAAlB,CAAsB,QAAtB,CAAP;;AAEF,eAAK,EAAL;AACE,oBAAQ,SAAS,IAAjB;AACA,uBAAW,EAAX;AACA,gBAAI,CAAJ;;AAEF,eAAK,EAAL;AACE,gBAAI,EAAE,IAAI,MAAM,MAAZ,CAAJ,EAAyB;AACvB,uBAAS,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,mBAAO,MAAM,CAAN,CAAP;AACA,kBAAM,iBAAiB,CAAjB,CAAN;;AAEA;;AAEA,gBAAI,EAAE,IAAI,IAAJ,KAAa,eAAf,CAAJ,EAAqC;AACnC,uBAAS,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,mBAAO,SAAS,MAAT,CAAgB,UAAhB,EAA4B,EAA5B,CAAP;;AAEF,eAAK,EAAL;;AAEE,gBAAI,KAAK,OAAL,KAAiB,IAAI,OAAzB,EAAkC;AAChC,uBAAS,IAAT,CAAc,IAAI,IAAJ,GAAW,eAAX,GAA6B,KAAK,OAAlC,GAA4C,qBAA5C,GAAoE,IAAI,OAAtF;AACD;;AAEH,eAAK,EAAL;AACE;AACA,qBAAS,IAAT,GAAgB,EAAhB;AACA;;AAEF,eAAK,EAAL;AACE,gBAAI,CAAC,SAAS,MAAd,EAAsB;AACpB,uBAAS,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,mBAAO,SAAS,MAAT,CAAgB,QAAhB,EAA0B,CAAC,KAAD,EAAQ,2CAA2C,SAAS,IAAT,CAAc,MAAd,CAAnD,CAA1B,CAAP;;AAEF,eAAK,EAAL;AACE,mBAAO,SAAS,MAAT,CAAgB,QAAhB,EAA0B,CAAC,IAAD,EAAO,4CAAP,CAA1B,CAAP;;AAEF,eAAK,EAAL;AACA,eAAK,KAAL;AACE,mBAAO,SAAS,IAAT,EAAP;AA3GJ;AA6GD;AACF,KAhHM,EAgHJ,OAhHI,EAgHK,IAhHL,CAAP;AAiHD,GApHyC,CAAhC,CAAV;AAqHA,SAAO,UAAU,EAAV,EAAc;AACnB,WAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB,SAAhB,CAAP;AACD,GAFD;AAGD,CAzHiB,EAAlB;;AA2HA,OAAO,OAAP,GAAiB,QAAQ,SAAR,CAAjB","file":"latest-packages-compiled.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _asyncToGenerator2 = require(\"babel-runtime/helpers/asyncToGenerator\");\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _request = require(\"request\");\n\nvar _request2 = _interopRequireDefault(_request);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar cache = {};\n\nfunction getInfo(packageName) {\n  if (cache[packageName]) {\n    return cache[packageName];\n  } else {\n    return cache[packageName] = new _promise2.default(function (resolve, reject) {\n      _request2.default.get({\n        url: \"https://registry.npmjs.org/\" + packageName + \"/latest\",\n        json: true\n      }, function (err, res, body) {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(cache[packageName] = body);\n        }\n      });\n    });\n  }\n}\n\nexports.default = function () {\n  var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(packages) {\n    var filteredPackages, promises, _iterator, _isArray, _i, _ref, _pkg, infos, messages, i, info, pkg;\n\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            filteredPackages = [];\n            promises = [];\n            _iterator = packages, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);\n\n          case 3:\n            if (!_isArray) {\n              _context.next = 9;\n              break;\n            }\n\n            if (!(_i >= _iterator.length)) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"break\", 20);\n\n          case 6:\n            _ref = _iterator[_i++];\n            _context.next = 13;\n            break;\n\n          case 9:\n            _i = _iterator.next();\n\n            if (!_i.done) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"break\", 20);\n\n          case 12:\n            _ref = _i.value;\n\n          case 13:\n            _pkg = _ref;\n\n            if (!(_pkg.name.indexOf(\"babel-\") !== 0)) {\n              _context.next = 16;\n              break;\n            }\n\n            return _context.abrupt(\"continue\", 18);\n\n          case 16:\n\n            promises.push(getInfo(_pkg.name));\n            filteredPackages.push(_pkg);\n\n          case 18:\n            _context.next = 3;\n            break;\n\n          case 20:\n            _context.next = 22;\n            return _promise2.default.all(promises);\n\n          case 22:\n            infos = _context.sent;\n            messages = [];\n            i = 0;\n\n          case 25:\n            if (!(i < infos.length)) {\n              _context.next = 34;\n              break;\n            }\n\n            info = infos[i];\n            pkg = filteredPackages[i];\n\n            // https://github.com/babel/babel/issues/2915\n\n            if (!(pkg.name === \"babel-runtime\")) {\n              _context.next = 30;\n              break;\n            }\n\n            return _context.abrupt(\"continue\", 31);\n\n          case 30:\n\n            if (info.version !== pkg.version) {\n              messages.push(pkg.name + \" - Latest is \" + info.version + \". Local version is \" + pkg.version);\n            }\n\n          case 31:\n            i++;\n            _context.next = 25;\n            break;\n\n          case 34:\n            if (!messages.length) {\n              _context.next = 38;\n              break;\n            }\n\n            return _context.abrupt(\"return\", [false, \"We found some outdated packages:\\n\\n- \" + messages.join(\"\\n- \")]);\n\n          case 38:\n            return _context.abrupt(\"return\", [true, \"All babel packages appear to be up to date\"]);\n\n          case 39:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n  return function (_x) {\n    return ref.apply(this, arguments);\n  };\n}();\n\nmodule.exports = exports[\"default\"];"]}