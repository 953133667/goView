{"version":3,"sources":["CachedSource.js"],"names":[],"mappings":"AAAA;;;;AAIA,SAAS,YAAT,CAAsB,MAAtB,EAA8B;AAC7B,MAAK,OAAL,GAAe,MAAf;AACA,MAAK,aAAL,GAAqB,SAArB;AACA,MAAK,WAAL,GAAmB,SAAnB;AACA,MAAK,WAAL,GAAmB,EAAnB;;AAEA,KAAG,OAAO,IAAV,EAAgB,KAAK,IAAL,GAAY,UAAS,OAAT,EAAkB;AAC7C,SAAO,KAAK,OAAL,CAAa,IAAb,CAAkB,OAAlB,CAAP;AACA,EAFe;;AAIhB,KAAG,OAAO,OAAV,EAAmB,KAAK,OAAL,GAAe,UAAS,OAAT,EAAkB;AACnD,SAAO,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAAP;AACA,EAFkB;AAGnB;AACD,OAAO,OAAP,GAAiB,YAAjB;;AAEA,aAAa,SAAb,CAAuB,MAAvB,GAAgC,YAAW;AAC1C,KAAG,OAAO,KAAK,aAAZ,KAA8B,WAAjC,EAA8C,OAAO,KAAK,aAAZ;AAC9C,QAAO,KAAK,aAAL,GAAqB,KAAK,OAAL,CAAa,MAAb,EAA5B;AACA,CAHD;;AAKA,aAAa,SAAb,CAAuB,IAAvB,GAA8B,YAAW;AACxC,KAAG,OAAO,KAAK,WAAZ,KAA4B,WAA/B,EAA4C,OAAO,KAAK,WAAZ;AAC5C,KAAG,OAAO,KAAK,aAAZ,KAA8B,WAAjC,EACC,OAAO,KAAK,WAAL,GAAmB,KAAK,aAAL,CAAmB,MAA7C;AACD,QAAO,KAAK,WAAL,GAAmB,KAAK,OAAL,CAAa,IAAb,EAA1B;AACA,CALD;;AAOA,aAAa,SAAb,CAAuB,YAAvB,GAAsC,UAAS,OAAT,EAAkB;AACvD,KAAI,MAAM,KAAK,SAAL,CAAe,OAAf,CAAV;AACA,KAAG,OAAO,KAAK,aAAZ,KAA8B,WAA9B,IAA6C,OAAO,KAAK,WAA5D,EACC,OAAO;AACN,UAAQ,KAAK,aADP;AAEN,OAAK,KAAK,WAAL,CAAiB,GAAjB;AAFC,EAAP,CADD,KAKK,IAAG,OAAO,KAAK,aAAZ,KAA8B,WAAjC,EAA8C;AAClD,SAAO;AACN,WAAQ,KAAK,aADP;AAEN,QAAK,KAAK,WAAL,CAAiB,GAAjB,IAAwB,KAAK,OAAL,CAAa,GAAb,CAAiB,OAAjB;AAFvB,GAAP;AAIA,EALI,MAKE,IAAG,OAAO,KAAK,WAAf,EAA4B;AAClC,SAAO;AACN,WAAQ,KAAK,aAAL,GAAqB,KAAK,OAAL,CAAa,MAAb,EADvB;AAEN,QAAK,KAAK,WAAL,CAAiB,GAAjB;AAFC,GAAP;AAIA;AACD,KAAI,SAAS,KAAK,OAAL,CAAa,YAAb,CAA0B,OAA1B,CAAb;AACA,MAAK,aAAL,GAAqB,OAAO,MAA5B;AACA,MAAK,WAAL,CAAiB,GAAjB,IAAwB,OAAO,GAA/B;AACA,QAAO;AACN,UAAQ,KAAK,aADP;AAEN,OAAK,KAAK,WAAL,CAAiB,GAAjB;AAFC,EAAP;AAIA,CAzBD;;AA2BA,aAAa,SAAb,CAAuB,GAAvB,GAA6B,UAAS,OAAT,EAAkB;AAC9C,KAAG,CAAC,OAAJ,EAAa,UAAU,EAAV;AACb,KAAI,MAAM,KAAK,SAAL,CAAe,OAAf,CAAV;AACA,KAAG,OAAO,KAAK,WAAf,EACC,OAAO,KAAK,WAAL,CAAiB,GAAjB,CAAP;AACD,QAAO,KAAK,WAAL,CAAiB,GAAjB,IAAwB,KAAK,OAAL,CAAa,GAAb,EAA/B;AACA,CAND;;AAQA,aAAa,SAAb,CAAuB,UAAvB,GAAoC,UAAS,IAAT,EAAe;AAClD,MAAK,OAAL,CAAa,UAAb,CAAwB,IAAxB;AACA,CAFD","file":"CachedSource-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nfunction CachedSource(source) {\r\n\tthis._source = source;\r\n\tthis._cachedSource = undefined;\r\n\tthis._cachedSize = undefined;\r\n\tthis._cachedMaps = {};\r\n\r\n\tif(source.node) this.node = function(options) {\r\n\t\treturn this._source.node(options);\r\n\t};\r\n\r\n\tif(source.listMap) this.listMap = function(options) {\r\n\t\treturn this._source.listMap(options);\r\n\t};\r\n}\r\nmodule.exports = CachedSource;\r\n\r\nCachedSource.prototype.source = function() {\r\n\tif(typeof this._cachedSource !== \"undefined\") return this._cachedSource;\r\n\treturn this._cachedSource = this._source.source();\r\n};\r\n\r\nCachedSource.prototype.size = function() {\r\n\tif(typeof this._cachedSize !== \"undefined\") return this._cachedSize;\r\n\tif(typeof this._cachedSource !== \"undefined\")\r\n\t\treturn this._cachedSize = this._cachedSource.length;\r\n\treturn this._cachedSize = this._source.size();\r\n};\r\n\r\nCachedSource.prototype.sourceAndMap = function(options) {\r\n\tvar key = JSON.stringify(options);\r\n\tif(typeof this._cachedSource !== \"undefined\" && key in this._cachedMaps)\r\n\t\treturn {\r\n\t\t\tsource: this._cachedSource,\r\n\t\t\tmap: this._cachedMaps[key]\r\n\t\t};\r\n\telse if(typeof this._cachedSource !== \"undefined\") {\r\n\t\treturn {\r\n\t\t\tsource: this._cachedSource,\r\n\t\t\tmap: this._cachedMaps[key] = this._source.map(options)\r\n\t\t};\r\n\t} else if(key in this._cachedMaps) {\r\n\t\treturn {\r\n\t\t\tsource: this._cachedSource = this._source.source(),\r\n\t\t\tmap: this._cachedMaps[key]\r\n\t\t};\r\n\t}\r\n\tvar result = this._source.sourceAndMap(options);\r\n\tthis._cachedSource = result.source;\r\n\tthis._cachedMaps[key] = result.map;\r\n\treturn {\r\n\t\tsource: this._cachedSource,\r\n\t\tmap: this._cachedMaps[key]\r\n\t};\r\n};\r\n\r\nCachedSource.prototype.map = function(options) {\r\n\tif(!options) options = {};\r\n\tvar key = JSON.stringify(options);\r\n\tif(key in this._cachedMaps)\r\n\t\treturn this._cachedMaps[key];\r\n\treturn this._cachedMaps[key] = this._source.map();\r\n};\r\n\r\nCachedSource.prototype.updateHash = function(hash) {\r\n\tthis._source.updateHash(hash);\r\n};\r\n"]}