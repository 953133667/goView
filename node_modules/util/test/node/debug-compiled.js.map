{"version":3,"sources":["debug.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,OAAO,QAAQ,QAAR,CAAX;;AAEA,IAAI,QAAQ,IAAR,CAAa,CAAb,MAAoB,OAAxB,EACE,QADF,KAGE;;AAEF,SAAS,MAAT,GAAkB;AAChB,OAAK,aAAL,EAAoB,IAApB;AACA,OAAK,SAAL,EAAgB,IAAhB;AACA,OAAK,SAAL,EAAgB,IAAhB;AACA,OAAK,KAAL,EAAY,IAAZ;AACA,OAAK,SAAL,EAAgB,KAAhB;AACA,OAAK,EAAL,EAAS,KAAT;AACD;;AAED,SAAS,IAAT,CAAc,OAAd,EAAuB,WAAvB,EAAoC;AAClC,MAAI,YAAY,EAAhB;AACA,MAAI,WAAJ,EAAiB;AACf,gBAAY,gDACA,wDADZ;AAED;AACD,MAAI,YAAY,MAAhB;AACA,MAAI,UAAU,KAAd;;AAEA,MAAI,QAAQ,QAAQ,eAAR,EAAyB,KAArC;AACA,MAAI,QAAQ,MAAM,QAAQ,QAAd,EAAwB,CAAC,UAAD,EAAa,OAAb,CAAxB,EAA+C;AACzD,SAAK,EAAE,YAAY,OAAd;AADoD,GAA/C,CAAZ;;AAIA,cAAY,UAAU,KAAV,CAAgB,OAAhB,EAAyB,IAAzB,CAA8B,MAAM,GAApC,CAAZ;;AAEA,MAAI,MAAM,EAAV;AACA,QAAM,MAAN,CAAa,WAAb,CAAyB,MAAzB;AACA,QAAM,MAAN,CAAa,EAAb,CAAgB,MAAhB,EAAwB,UAAS,CAAT,EAAY;AAClC,WAAO,CAAP;AACD,GAFD;;AAIA,MAAI,MAAM,EAAV;AACA,QAAM,MAAN,CAAa,WAAb,CAAyB,MAAzB;AACA,QAAM,MAAN,CAAa,EAAb,CAAgB,MAAhB,EAAwB,UAAS,CAAT,EAAY;AAClC,WAAO,CAAP;AACD,GAFD;;AAIA,QAAM,EAAN,CAAS,OAAT,EAAkB,UAAS,CAAT,EAAY;AAC5B,WAAO,CAAC,CAAR;AACA,WAAO,KAAP,CAAa,GAAb,EAAkB,SAAlB;AACA,WAAO,KAAP,CAAa,GAAb,EAAkB,SAAlB;AACA,cAAU,IAAV;AACA,YAAQ,GAAR,CAAY,UAAZ,EAAwB,OAAxB,EAAiC,WAAjC;AACD,GAND;;AAQA,UAAQ,EAAR,CAAW,MAAX,EAAmB,YAAW;AAC5B,WAAO,OAAP;AACD,GAFD;AAGD;;AAGD,SAAS,KAAT,GAAiB;AACf,MAAI,QAAQ,KAAK,QAAL,CAAc,KAAd,CAAZ;AACA,QAAM,MAAN,EAAc,EAAE,IAAI,GAAN,EAAd,EAA2B,WAA3B;AACA,QAAM,4BAAN,EAAoC,IAApC,EAA0C,MAA1C,EAAkD,EAAE,KAAK,KAAP,EAAlD;AACA,UAAQ,GAAR,CAAY,IAAZ;AACD","file":"debug-compiled.js","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar assert = require('assert');\nvar util = require('../../');\n\nif (process.argv[2] === 'child')\n  child();\nelse\n  parent();\n\nfunction parent() {\n  test('foo,tud,bar', true);\n  test('foo,tud', true);\n  test('tud,bar', true);\n  test('tud', true);\n  test('foo,bar', false);\n  test('', false);\n}\n\nfunction test(environ, shouldWrite) {\n  var expectErr = '';\n  if (shouldWrite) {\n    expectErr = 'TUD %PID%: this { is: \\'a\\' } /debugging/\\n' +\n                'TUD %PID%: number=1234 string=asdf obj={\"foo\":\"bar\"}\\n';\n  }\n  var expectOut = 'ok\\n';\n  var didTest = false;\n\n  var spawn = require('child_process').spawn;\n  var child = spawn(process.execPath, [__filename, 'child'], {\n    env: { NODE_DEBUG: environ }\n  });\n\n  expectErr = expectErr.split('%PID%').join(child.pid);\n\n  var err = '';\n  child.stderr.setEncoding('utf8');\n  child.stderr.on('data', function(c) {\n    err += c;\n  });\n\n  var out = '';\n  child.stdout.setEncoding('utf8');\n  child.stdout.on('data', function(c) {\n    out += c;\n  });\n\n  child.on('close', function(c) {\n    assert(!c);\n    assert.equal(err, expectErr);\n    assert.equal(out, expectOut);\n    didTest = true;\n    console.log('ok %j %j', environ, shouldWrite);\n  });\n\n  process.on('exit', function() {\n    assert(didTest);\n  });\n}\n\n\nfunction child() {\n  var debug = util.debuglog('tud');\n  debug('this', { is: 'a' }, /debugging/);\n  debug('number=%d string=%s obj=%j', 1234, 'asdf', { foo: 'bar' });\n  console.log('ok');\n}\n"]}