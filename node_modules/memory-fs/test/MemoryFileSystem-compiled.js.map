{"version":3,"sources":["MemoryFileSystem.js"],"names":[],"mappings":"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","file":"MemoryFileSystem-compiled.js","sourcesContent":["var bl = require(\"bl\");\r\nvar should = require(\"should\");\r\nvar MemoryFileSystem = require(\"../lib/MemoryFileSystem\");\r\n\r\ndescribe(\"directory\", function() {\r\n\tit(\"should have a empty root directory as startup\", function(done) {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.readdirSync(\"/\").should.be.eql([]);\r\n\t\tvar stat = fs.statSync(\"/\");\r\n\t\tstat.isFile().should.be.eql(false);\r\n\t\tstat.isDirectory().should.be.eql(true);\r\n\t\tfs.readdir(\"/\", function(err, files) {\r\n\t\t\tif(err) throw err;\r\n\t\t\tfiles.should.be.eql([]);\r\n\t\t\tdone();\r\n\t\t});\r\n\t});\r\n\tit(\"should make and remove directories (linux style)\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirSync(\"/test\");\r\n\t\tfs.mkdirSync(\"/test//sub/\");\r\n\t\tfs.mkdirpSync(\"/test/sub2\");\r\n\t\tfs.mkdirSync(\"/root\\\\dir\");\r\n\t\tfs.mkdirpSync(\"/\");\r\n\t\tfs.mkdirSync(\"/\");\r\n\t\tfs.readdirSync(\"/\").should.be.eql([\"test\", \"root\\\\dir\"]);\r\n\t\tfs.readdirSync(\"/test/\").should.be.eql([\"sub\", \"sub2\"]);\r\n\t\tfs.rmdirSync(\"/test/sub//\");\r\n\t\tfs.readdirSync(\"//test\").should.be.eql([\"sub2\"]);\r\n\t\tfs.rmdirSync(\"/test/sub2\");\r\n\t\tfs.rmdirSync(\"/test\");\r\n\t\tfs.existsSync(\"/test\").should.be.eql(false);\r\n\t\t(function() {\r\n\t\t\tfs.readdirSync(\"/test\");\r\n\t\t}).should.throw();\r\n\t\tfs.readdirSync(\"/\").should.be.eql([\"root\\\\dir\"]);\r\n\t\tfs.mkdirpSync(\"/a/depth/sub/dir\");\r\n\t\tfs.existsSync(\"/a/depth/sub\").should.be.eql(true);\r\n\t\tvar stat = fs.statSync(\"/a/depth/sub\");\r\n\t\tstat.isFile().should.be.eql(false);\r\n\t\tstat.isDirectory().should.be.eql(true);\r\n\t});\r\n\tit(\"should make and remove directories (windows style)\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirSync(\"C:\\\\\");\r\n\t\tfs.mkdirSync(\"C:\\\\test\");\r\n\t\tfs.mkdirSync(\"C:\\\\test\\\\\\\\sub/\");\r\n\t\tfs.mkdirpSync(\"c:\\\\test/sub2\");\r\n\t\tfs.mkdirSync(\"C:\\\\root-dir\");\r\n\t\tfs.readdirSync(\"C:\").should.be.eql([\"test\", \"root-dir\"]);\r\n\t\tfs.readdirSync(\"C:/test/\").should.be.eql([\"sub\", \"sub2\"]);\r\n\t\tfs.rmdirSync(\"C:/test\\\\sub\\\\\\\\\");\r\n\t\tfs.readdirSync(\"C:\\\\\\\\test\").should.be.eql([\"sub2\"]);\r\n\t\tfs.rmdirSync(\"C:\\\\test\\\\sub2\");\r\n\t\tfs.rmdirSync(\"C:\\\\test\");\r\n\t\tfs.existsSync(\"C:\\\\test\").should.be.eql(false);\r\n\t\t(function() {\r\n\t\t\tfs.readdirSync(\"C:\\\\test\");\r\n\t\t}).should.throw();\r\n\t\tfs.readdirSync(\"C:\").should.be.eql([\"root-dir\"]);\r\n\t\tfs.mkdirpSync(\"D:\\\\a\\\\depth\\\\sub\\\\dir\");\r\n\t\tfs.existsSync(\"D:\\\\a\\\\depth\\\\sub\").should.be.eql(true);\r\n\t\tvar stat = fs.statSync(\"D:\\\\a\\\\depth\\\\sub\");\r\n\t\tstat.isFile().should.be.eql(false);\r\n\t\tstat.isDirectory().should.be.eql(true);\r\n\t\tfs.readdirSync(\"D:\\\\//a/depth/\\\\sub\").should.be.eql([\"dir\"]);\r\n\t});\r\n});\r\ndescribe(\"files\", function() {\r\n\tit(\"should make and remove files\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirSync(\"/test\");\r\n\t\tvar buf = new Buffer(\"Hello World\", \"utf-8\");\r\n\t\tfs.writeFileSync(\"/test/hello-world.txt\", buf);\r\n\t\tfs.readFileSync(\"/test/hello-world.txt\").should.be.eql(buf);\r\n\t\tfs.readFileSync(\"/test/hello-world.txt\", \"utf-8\").should.be.eql(\"Hello World\");\r\n\t\t(function() {\r\n\t\t\tfs.readFileSync(\"/test/other-file\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readFileSync(\"/test/other-file\", \"utf-8\");\r\n\t\t}).should.throw();\r\n\t\tfs.writeFileSync(\"/a\", \"Test\", \"utf-8\");\r\n\t\tfs.readFileSync(\"/a\", \"utf-8\").should.be.eql(\"Test\");\r\n\t\tvar stat = fs.statSync(\"/a\");\r\n\t\tstat.isFile().should.be.eql(true);\r\n\t\tstat.isDirectory().should.be.eql(false);\r\n\t});\r\n});\r\ndescribe(\"errors\", function() {\r\n\tit(\"should fail on invalid paths\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirpSync(\"/test/a/b/c\");\r\n\t\tfs.mkdirpSync(\"/test/a/bc\");\r\n\t\tfs.mkdirpSync(\"/test/abc\");\r\n\t\t(function() {\r\n\t\t\tfs.mkdirpSync(\"xyz\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readdirSync(\"/test/abc/a/b/c\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readdirSync(\"/abc\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.statSync(\"/abc\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.mkdirSync(\"/test/a/d/b/c\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.writeFileSync(\"/test/a/d/b/c\", \"Hello\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readFileSync(\"/test/a/d/b/c\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readFileSync(\"/test/abcd\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.mkdirSync(\"/test/abcd/dir\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.unlinkSync(\"/test/abcd\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.unlinkSync(\"/test/abcd/file\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.statSync(\"/test/a/d/b/c\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.statSync(\"/test/abcd\");\r\n\t\t}).should.throw();\r\n\t\tfs.mkdir(\"/test/a/d/b/c\", function(err) {\r\n\t\t\terr.should.be.instanceof(Error);\r\n\t\t});\r\n\t});\r\n\tit(\"should fail incorrect arguments\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\t(function() {\r\n\t\t\tfs.writeFileSync(\"/test\");\r\n\t\t}).should.throw();\r\n\t});\r\n\tit(\"should fail on wrong type\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirpSync(\"/test/dir\");\r\n\t\tfs.mkdirpSync(\"/test/dir\");\r\n\t\tfs.writeFileSync(\"/test/file\", \"Hello\");\r\n\t\t(function() {\r\n\t\t\tfs.writeFileSync(\"/test/dir\", \"Hello\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readFileSync(\"/test/dir\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.writeFileSync(\"/\", \"Hello\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.rmdirSync(\"/\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.unlinkSync(\"/\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.mkdirSync(\"/test/dir\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.mkdirSync(\"/test/file\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.mkdirpSync(\"/test/file\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readdirSync(\"/test/file\");\r\n\t\t}).should.throw();\r\n\t\tfs.readdirSync(\"/test/\").should.be.eql([\"dir\", \"file\"]);\r\n\t});\r\n\tit(\"should throw on readlink\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirpSync(\"/test/dir\");\r\n\t\t(function() {\r\n\t\t\tfs.readlinkSync(\"/\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readlinkSync(\"/link\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readlinkSync(\"/test\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readlinkSync(\"/test/dir\");\r\n\t\t}).should.throw();\r\n\t\t(function() {\r\n\t\t\tfs.readlinkSync(\"/test/dir/link\");\r\n\t\t}).should.throw();\r\n\t});\r\n});\r\ndescribe(\"async\", function() {\r\n\tit(\"should be able to use the async versions\", function(done) {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.mkdirp(\"/test/dir\", function(err) {\r\n\t\t\tif(err) throw err;\r\n\t\t\tfs.writeFile(\"/test/dir/a\", \"Hello\", function(err) {\r\n\t\t\t\tif(err) throw err;\r\n\t\t\t\tfs.writeFile(\"/test/dir/b\", \"World\", \"utf-8\", function(err) {\r\n\t\t\t\t\tif(err) throw err;\r\n\t\t\t\t\tfs.readFile(\"/test/dir/a\", \"utf-8\", function(err, content) {\r\n\t\t\t\t\t\tif(err) throw err;\r\n\t\t\t\t\t\tcontent.should.be.eql(\"Hello\");\r\n\t\t\t\t\t\tfs.readFile(\"/test/dir/b\", function(err, content) {\r\n\t\t\t\t\t\t\tif(err) throw err;\r\n\t\t\t\t\t\t\tcontent.should.be.eql(new Buffer(\"World\"));\r\n\t\t\t\t\t\t\tfs.exists(\"/test/dir/b\", function(exists) {\r\n\t\t\t\t\t\t\t\texists.should.be.eql(true);\r\n\t\t\t\t\t\t\t\tdone();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\tit(\"should return errors\", function(done) {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.readFile(\"/fail/file\", function(err, content) {\r\n\t\t\terr.should.be.instanceof(Error);\r\n\t\t\tfs.writeFile(\"/fail/file\", \"\", function(err) {\r\n\t\t\t\terr.should.be.instanceof(Error);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n});\r\ndescribe(\"streams\", function() {\r\n\tdescribe(\"writable streams\", function() {\r\n\t\tit(\"should write files\", function() {\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tfs.createWriteStream(\"/file\").end(\"Hello\");\r\n\t\t\tfs.readFileSync(\"/file\", \"utf8\").should.be.eql(\"Hello\");\r\n\t\t});\r\n\t\tit(\"should zero files\", function() {\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tfs.createWriteStream(\"/file\").end();\r\n\t\t\tfs.readFileSync(\"/file\", \"utf8\").should.be.eql(\"\");\r\n\t\t});\r\n\t\tit(\"should accept pipes\", function(done) {\r\n\t\t\t// TODO: Any way to avoid the asyncness of this?\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tbl(new Buffer(\"Hello\"))\r\n\t\t\t\t.pipe(fs.createWriteStream(\"/file\"))\r\n\t\t\t\t.once('finish', function() {\r\n\t\t\t\t\tfs.readFileSync(\"/file\", \"utf8\").should.be.eql(\"Hello\");\r\n\t\t\t\t\tdone();\r\n\t\t\t\t});\r\n\t\t});\r\n\t\tit(\"should propagate errors\", function(done) {\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tvar stream = fs.createWriteStream(\"file\");\r\n\t\t\tvar err = false;\r\n\t\t\tstream.once('error', function() {\r\n\t\t\t\terr = true;\r\n\t\t\t}).once('finish', function() {\r\n\t\t\t\terr.should.eql(true);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t\t\tstream.end();\r\n\t\t});\r\n\t});\r\n\tdescribe(\"readable streams\", function() {\r\n\t\tit(\"should read files\", function(done) {\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tfs.writeFileSync(\"/file\", \"Hello\");\r\n\t\t\tfs.createReadStream(\"/file\").pipe(bl(function(err, data) {\r\n\t\t\t\tdata.toString('utf8').should.be.eql(\"Hello\");\r\n\t\t\t\tdone();\r\n\t\t\t}));\r\n\t\t});\r\n\t\tit(\"should respect start/end\", function(done) {\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tfs.writeFileSync(\"/file\", \"Hello\");\r\n\t\t\tfs.createReadStream(\"/file\", {\r\n\t\t\t\tstart: 1,\r\n\t\t\t\tend: 3\r\n\t\t\t}).pipe(bl(function(err, data) {\r\n\t\t\t\tdata.toString('utf8').should.be.eql(\"el\");\r\n\t\t\t\tdone();\r\n\t\t\t}));\r\n\t\t});\r\n\t\tit(\"should propagate errors\", function(done) {\r\n\t\t\tvar fs = new MemoryFileSystem();\r\n\t\t\tvar stream = fs.createReadStream(\"file\");\r\n\t\t\tvar err = false;\r\n\t\t\t// Why does this dummy event need to be here? It looks like it\r\n\t\t\t// either has to be this or data before the stream will actually\r\n\t\t\t// do anything.\r\n\t\t\tstream.on('readable', function() { }).on('error', function() {\r\n\t\t\t\terr = true;\r\n\t\t\t}).on('end', function() {\r\n\t\t\t\terr.should.eql(true);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t\t\tstream.read(0);\r\n\t\t});\r\n\t});\r\n});\r\ndescribe(\"normalize\", function() {\r\n\tit(\"should normalize paths\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.normalize(\"/a/b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.normalize(\"/a//b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.normalize(\"/a//b//c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.normalize(\"//a//b//c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.normalize(\"/a/////b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.normalize(\"/./a/d///..////b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.normalize(\"/..\").should.be.eql(\"/\");\r\n\t\tfs.normalize(\"/.\").should.be.eql(\"/\");\r\n\t\tfs.normalize(\"/.git\").should.be.eql(\"/.git\");\r\n\t\tfs.normalize(\"/a/b/c/.git\").should.be.eql(\"/a/b/c/.git\");\r\n\t\tfs.normalize(\"/a/b/c/..git\").should.be.eql(\"/a/b/c/..git\");\r\n\t\tfs.normalize(\"/a/b/c/..\").should.be.eql(\"/a/b\");\r\n\t\tfs.normalize(\"/a/b/c/../..\").should.be.eql(\"/a\");\r\n\t\tfs.normalize(\"/a/b/c/../../..\").should.be.eql(\"/\");\r\n\t\tfs.normalize(\"C:\\\\a\\\\..\").should.be.eql(\"C:\\\\\");\r\n\t\tfs.normalize(\"C:\\\\a\\\\b\\\\..\").should.be.eql(\"C:\\\\a\");\r\n\t\tfs.normalize(\"C:\\\\a\\\\b\\\\\\c\\\\..\\\\..\").should.be.eql(\"C:\\\\a\");\r\n\t\tfs.normalize(\"C:\\\\a\\\\b\\\\d\\\\..\\\\c\\\\..\\\\..\").should.be.eql(\"C:\\\\a\");\r\n\t\tfs.normalize(\"C:\\\\a\\\\b\\\\d\\\\\\\\.\\\\\\\\.\\\\c\\\\.\\\\..\").should.be.eql(\"C:\\\\a\\\\b\\\\d\");\r\n\t});\r\n});\r\ndescribe(\"join\", function() {\r\n\tit(\"should join paths\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.join(\"/\", \"a/b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.join(\"/a\", \"b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.join(\"/a/b\", \"c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.join(\"/a/\", \"b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.join(\"/a//\", \"b/c\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.join(\"a\", \"b/c\").should.be.eql(\"a/b/c\");\r\n\t\tfs.join(\"a/b\", \"c\").should.be.eql(\"a/b/c\");\r\n\t\tfs.join(\"C:\", \"a/b\").should.be.eql(\"C:\\\\a\\\\b\");\r\n\t\tfs.join(\"C:\\\\\", \"a/b\").should.be.eql(\"C:\\\\a\\\\b\");\r\n\t\tfs.join(\"C:\\\\\", \"a\\\\b\").should.be.eql(\"C:\\\\a\\\\b\");\r\n\t});\r\n\tit(\"should join paths (weird cases)\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.join(\"/\", \"\").should.be.eql(\"/\");\r\n\t\tfs.join(\"/a/b/\", \"\").should.be.eql(\"/a/b/\");\r\n\t\tfs.join(\"/a/b/c\", \"\").should.be.eql(\"/a/b/c\");\r\n\t\tfs.join(\"C:\", \"\").should.be.eql(\"C:\");\r\n\t\tfs.join(\"C:\\\\a\\\\b\", \"\").should.be.eql(\"C:\\\\a\\\\b\");\r\n\t});\r\n\tit(\"should join paths (absolute request)\", function() {\r\n\t\tvar fs = new MemoryFileSystem();\r\n\t\tfs.join(\"/a/b/c\", \"/d/e/f\").should.be.eql(\"/d/e/f\");\r\n\t\tfs.join(\"C:\\\\a\\\\b\\\\c\", \"/d/e/f\").should.be.eql(\"/d/e/f\");\r\n\t\tfs.join(\"/a/b/c\", \"C:\\\\d\\\\e\\\\f\").should.be.eql(\"C:\\\\d\\\\e\\\\f\");\r\n\t\tfs.join(\"C:\\\\a\\\\b\\\\c\", \"C:\\\\d\\\\e\\\\f\").should.be.eql(\"C:\\\\d\\\\e\\\\f\");\r\n\t});\r\n});\r\ndescribe(\"os\", function() {\r\n\tvar fileSystem;\r\n\r\n\tbeforeEach(function() {\r\n\t\tfileSystem = new MemoryFileSystem({\r\n\t\t\t\"\": true,\r\n\t\t\ta: {\r\n\t\t\t\t\"\": true,\r\n\t\t\t\tindex: new Buffer(\"1\"), // /a/index\r\n\t\t\t\tdir: {\r\n\t\t\t\t\t\"\": true,\r\n\t\t\t\t\tindex: new Buffer(\"2\") // /a/dir/index\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"C:\": {\r\n\t\t\t\t\"\": true,\r\n\t\t\t\ta: {\r\n\t\t\t\t\t\"\": true,\r\n\t\t\t\t\tindex: new Buffer(\"3\"),  // C:\\files\\index\r\n\t\t\t\t\tdir: {\r\n\t\t\t\t\t\t\"\": true,\r\n\t\t\t\t\t\tindex: new Buffer(\"4\")  // C:\\files\\a\\index\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tdescribe(\"unix\", function() {\r\n\t\tit(\"should stat stuff\", function() {\r\n\t\t\tfileSystem.statSync(\"/a\").isDirectory().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"/a\").isFile().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"/a/index\").isDirectory().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"/a/index\").isFile().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"/a/dir\").isDirectory().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"/a/dir\").isFile().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"/a/dir/index\").isDirectory().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"/a/dir/index\").isFile().should.be.eql(true);\r\n\t\t});\r\n\t\tit(\"should readdir directories\", function() {\r\n\t\t\tfileSystem.readdirSync(\"/a\").should.be.eql([\"index\", \"dir\"]);\r\n\t\t\tfileSystem.readdirSync(\"/a/dir\").should.be.eql([\"index\"]);\r\n\t\t});\r\n\t\tit(\"should readdir directories\", function() {\r\n\t\t\tfileSystem.readFileSync(\"/a/index\", \"utf-8\").should.be.eql(\"1\");\r\n\t\t\tfileSystem.readFileSync(\"/a/dir/index\", \"utf-8\").should.be.eql(\"2\");\r\n\t\t});\r\n\t\tit(\"should also accept multi slashs\", function() {\r\n\t\t\tfileSystem.statSync(\"/a///dir//index\").isFile().should.be.eql(true);\r\n\t\t});\r\n\t});\r\n\r\n\tdescribe(\"windows\", function() {\r\n\t\tit(\"should stat stuff\", function() {\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\").isDirectory().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\").isFile().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\index\").isDirectory().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\index\").isFile().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\dir\").isDirectory().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\dir\").isFile().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\dir\\\\index\").isDirectory().should.be.eql(false);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\dir\\\\index\").isFile().should.be.eql(true);\r\n\t\t});\r\n\t\tit(\"should readdir directories\", function() {\r\n\t\t\tfileSystem.readdirSync(\"C:\\\\a\").should.be.eql([\"index\", \"dir\"]);\r\n\t\t\tfileSystem.readdirSync(\"C:\\\\a\\\\dir\").should.be.eql([\"index\"]);\r\n\t\t});\r\n\t\tit(\"should readdir directories\", function() {\r\n\t\t\tfileSystem.readFileSync(\"C:\\\\a\\\\index\", \"utf-8\").should.be.eql(\"3\");\r\n\t\t\tfileSystem.readFileSync(\"C:\\\\a\\\\dir\\\\index\", \"utf-8\").should.be.eql(\"4\");\r\n\t\t});\r\n\t\tit(\"should also accept multi slashs\", function() {\r\n\t\t\tfileSystem.statSync(\"C:\\\\\\\\a\\\\\\\\\\\\dir\\\\\\\\index\").isFile().should.be.eql(true);\r\n\t\t});\r\n\t\tit(\"should also accept a normal slash\", function() {\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\dir/index\").isFile().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a\\\\dir\\\\index\").isFile().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a/dir/index\").isFile().should.be.eql(true);\r\n\t\t\tfileSystem.statSync(\"C:\\\\a/dir\\\\index\").isFile().should.be.eql(true);\r\n\t\t});\r\n\t});\r\n});\r\n"]}