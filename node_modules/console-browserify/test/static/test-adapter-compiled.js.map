{"version":3,"sources":["test-adapter.js"],"names":[],"mappings":"AAAC,aAAY;AACT,QAAI,SAAS,OAAO,MAApB;AACA,QAAI,QAAQ,4BAAZ;;AAEA,WAAO,gBAAP,CAAwB,UAAxB;;AAEA,aAAS,UAAT,CAAoB,MAApB,EAA2B;AACvB,YAAI,UAAU;AACV,oBAAQ,CADE;AAER,oBAAQ,CAFA;AAGR,mBAAO,CAHC;AAIR,mBAAO;AAJC,SAAd;;AAOA,eAAO,IAAP,CAAY,aAAZ;;AAEA,eAAO,oBAAP,GAA8B,UAAS,GAAT,EAAa;AACvC,gBAAI,IAAI,IAAI,KAAJ,CAAU,KAAV,CAAR;AACA,gBAAI,CAAJ,EAAO;AACH,oBAAI,SAAS,EAAE,CAAF,MAAS,IAAtB;AACA,oBAAI,OAAO;AACP,4BAAQ,SAAS,CAAT,GAAa,CADd;AAEP,4BAAQ,SAAS,CAAT,GAAa,CAFd;AAGP,2BAAO,CAHA;AAIP,wBAAI,EAAE,CAAF,CAJG;AAKP,0BAAM,EAAE,CAAF,CALC;AAMP,2BAAO;AANA,iBAAX;;AASA,oBAAI,MAAJ,EAAY;AACR,4BAAQ,MAAR;AACH,iBAFD,MAEO;AACH,4BAAQ,KAAR,CAAc,SAAd,EAAyB,CAAzB;;AAEA,4BAAQ,MAAR;AACH;;AAED,wBAAQ,KAAR;;AAEA;AACA,uBAAO,IAAP,CAAY,aAAZ,EAA2B,IAA3B;AACA,wBAAQ,KAAR,CAAc,IAAd,CAAmB,IAAnB;AACH,aAxBD,MAwBO,IAAI,QAAQ,MAAR,IAAkB,IAAI,KAAJ,CAAU,cAAV,CAAtB,EAAgD;AACnD;AACA,uBAAO,IAAP,CAAY,kBAAZ,EAAgC,OAAhC;AACH;;AAED;AACA;AACA;AACH,SAlCD;AAmCH;AACJ,CApDA,GAAD","file":"test-adapter-compiled.js","sourcesContent":["(function () {\n    var Testem = window.Testem\n    var regex = /^((?:not )?ok) (\\d+) (.+)$/\n\n    Testem.useCustomAdapter(tapAdapter)\n\n    function tapAdapter(socket){\n        var results = {\n            failed: 0\n            , passed: 0\n            , total: 0\n            , tests: []\n        }\n\n        socket.emit('tests-start')\n\n        Testem.handleConsoleMessage = function(msg){\n            var m = msg.match(regex)\n            if (m) {\n                var passed = m[1] === 'ok'\n                var test = {\n                    passed: passed ? 1 : 0,\n                    failed: passed ? 0 : 1,\n                    total: 1,\n                    id: m[2],\n                    name: m[3],\n                    items: []\n                }\n\n                if (passed) {\n                    results.passed++\n                } else {\n                    console.error(\"failure\", m)\n\n                    results.failed++\n                }\n\n                results.total++\n\n                // console.log(\"emitted test\", test)\n                socket.emit('test-result', test)\n                results.tests.push(test)\n            } else if (msg === '# ok' || msg.match(/^# tests \\d+/)){\n                // console.log(\"emitted all test\")\n                socket.emit('all-test-results', results)\n            }\n\n            // return false if you want to prevent the console message from\n            // going to the console\n            // return false\n        }\n    }\n}())\n"]}