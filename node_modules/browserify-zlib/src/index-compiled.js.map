{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Transform = require('_stream_transform');\n\nvar binding = require('./binding');\nvar util = require('util');\nvar assert = require('assert').ok;\n\n// zlib doesn't provide these, so kludge them in following the same\n// const naming scheme zlib uses.\nbinding.Z_MIN_WINDOWBITS = 8;\nbinding.Z_MAX_WINDOWBITS = 15;\nbinding.Z_DEFAULT_WINDOWBITS = 15;\n\n// fewer than 64 bytes per chunk is stupid.\n// technically it could work with as few as 8, but even 64 bytes\n// is absurdly low.  Usually a MB or more is best.\nbinding.Z_MIN_CHUNK = 64;\nbinding.Z_MAX_CHUNK = Infinity;\nbinding.Z_DEFAULT_CHUNK = (16 * 1024);\n\nbinding.Z_MIN_MEMLEVEL = 1;\nbinding.Z_MAX_MEMLEVEL = 9;\nbinding.Z_DEFAULT_MEMLEVEL = 8;\n\nbinding.Z_MIN_LEVEL = -1;\nbinding.Z_MAX_LEVEL = 9;\nbinding.Z_DEFAULT_LEVEL = binding.Z_DEFAULT_COMPRESSION;\n\n// expose all the zlib constants\nObject.keys(binding).forEach(function(k) {\n  if (k.match(/^Z/)) exports[k] = binding[k];\n});\n\n// translation table for return codes.\nexports.codes = {\n  Z_OK: binding.Z_OK,\n  Z_STREAM_END: binding.Z_STREAM_END,\n  Z_NEED_DICT: binding.Z_NEED_DICT,\n  Z_ERRNO: binding.Z_ERRNO,\n  Z_STREAM_ERROR: binding.Z_STREAM_ERROR,\n  Z_DATA_ERROR: binding.Z_DATA_ERROR,\n  Z_MEM_ERROR: binding.Z_MEM_ERROR,\n  Z_BUF_ERROR: binding.Z_BUF_ERROR,\n  Z_VERSION_ERROR: binding.Z_VERSION_ERROR\n};\n\nObject.keys(exports.codes).forEach(function(k) {\n  exports.codes[exports.codes[k]] = k;\n});\n\nexports.Deflate = Deflate;\nexports.Inflate = Inflate;\nexports.Gzip = Gzip;\nexports.Gunzip = Gunzip;\nexports.DeflateRaw = DeflateRaw;\nexports.InflateRaw = InflateRaw;\nexports.Unzip = Unzip;\n\nexports.createDeflate = function(o) {\n  return new Deflate(o);\n};\n\nexports.createInflate = function(o) {\n  return new Inflate(o);\n};\n\nexports.createDeflateRaw = function(o) {\n  return new DeflateRaw(o);\n};\n\nexports.createInflateRaw = function(o) {\n  return new InflateRaw(o);\n};\n\nexports.createGzip = function(o) {\n  return new Gzip(o);\n};\n\nexports.createGunzip = function(o) {\n  return new Gunzip(o);\n};\n\nexports.createUnzip = function(o) {\n  return new Unzip(o);\n};\n\n\n// Convenience methods.\n// compress/decompress a string or buffer in one step.\nexports.deflate = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Deflate(opts), buffer, callback);\n};\n\nexports.deflateSync = function(buffer, opts) {\n  return zlibBufferSync(new Deflate(opts), buffer);\n};\n\nexports.gzip = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Gzip(opts), buffer, callback);\n};\n\nexports.gzipSync = function(buffer, opts) {\n  return zlibBufferSync(new Gzip(opts), buffer);\n};\n\nexports.deflateRaw = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new DeflateRaw(opts), buffer, callback);\n};\n\nexports.deflateRawSync = function(buffer, opts) {\n  return zlibBufferSync(new DeflateRaw(opts), buffer);\n};\n\nexports.unzip = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Unzip(opts), buffer, callback);\n};\n\nexports.unzipSync = function(buffer, opts) {\n  return zlibBufferSync(new Unzip(opts), buffer);\n};\n\nexports.inflate = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Inflate(opts), buffer, callback);\n};\n\nexports.inflateSync = function(buffer, opts) {\n  return zlibBufferSync(new Inflate(opts), buffer);\n};\n\nexports.gunzip = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new Gunzip(opts), buffer, callback);\n};\n\nexports.gunzipSync = function(buffer, opts) {\n  return zlibBufferSync(new Gunzip(opts), buffer);\n};\n\nexports.inflateRaw = function(buffer, opts, callback) {\n  if (typeof opts === 'function') {\n    callback = opts;\n    opts = {};\n  }\n  return zlibBuffer(new InflateRaw(opts), buffer, callback);\n};\n\nexports.inflateRawSync = function(buffer, opts) {\n  return zlibBufferSync(new InflateRaw(opts), buffer);\n};\n\nfunction zlibBuffer(engine, buffer, callback) {\n  var buffers = [];\n  var nread = 0;\n\n  engine.on('error', onError);\n  engine.on('end', onEnd);\n\n  engine.end(buffer);\n  flow();\n\n  function flow() {\n    var chunk;\n    while (null !== (chunk = engine.read())) {\n      buffers.push(chunk);\n      nread += chunk.length;\n    }\n    engine.once('readable', flow);\n  }\n\n  function onError(err) {\n    engine.removeListener('end', onEnd);\n    engine.removeListener('readable', flow);\n    callback(err);\n  }\n\n  function onEnd() {\n    var buf = Buffer.concat(buffers, nread);\n    buffers = [];\n    callback(null, buf);\n    engine.close();\n  }\n}\n\nfunction zlibBufferSync(engine, buffer) {\n  if (typeof buffer === 'string')\n    buffer = new Buffer(buffer);\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('Not a string or buffer');\n\n  var flushFlag = binding.Z_FINISH;\n\n  return engine._processChunk(buffer, flushFlag);\n}\n\n// generic zlib\n// minimal 2-byte header\nfunction Deflate(opts) {\n  if (!(this instanceof Deflate)) return new Deflate(opts);\n  Zlib.call(this, opts, binding.DEFLATE);\n}\n\nfunction Inflate(opts) {\n  if (!(this instanceof Inflate)) return new Inflate(opts);\n  Zlib.call(this, opts, binding.INFLATE);\n}\n\n\n\n// gzip - bigger header, same deflate compression\nfunction Gzip(opts) {\n  if (!(this instanceof Gzip)) return new Gzip(opts);\n  Zlib.call(this, opts, binding.GZIP);\n}\n\nfunction Gunzip(opts) {\n  if (!(this instanceof Gunzip)) return new Gunzip(opts);\n  Zlib.call(this, opts, binding.GUNZIP);\n}\n\n\n\n// raw - no header\nfunction DeflateRaw(opts) {\n  if (!(this instanceof DeflateRaw)) return new DeflateRaw(opts);\n  Zlib.call(this, opts, binding.DEFLATERAW);\n}\n\nfunction InflateRaw(opts) {\n  if (!(this instanceof InflateRaw)) return new InflateRaw(opts);\n  Zlib.call(this, opts, binding.INFLATERAW);\n}\n\n\n// auto-detect header.\nfunction Unzip(opts) {\n  if (!(this instanceof Unzip)) return new Unzip(opts);\n  Zlib.call(this, opts, binding.UNZIP);\n}\n\n\n// the Zlib class they all inherit from\n// This thing manages the queue of requests, and returns\n// true or false if there is anything in the queue when\n// you call the .write() method.\n\nfunction Zlib(opts, mode) {\n  this._opts = opts = opts || {};\n  this._chunkSize = opts.chunkSize || exports.Z_DEFAULT_CHUNK;\n\n  Transform.call(this, opts);\n\n  if (opts.flush) {\n    if (opts.flush !== binding.Z_NO_FLUSH &&\n        opts.flush !== binding.Z_PARTIAL_FLUSH &&\n        opts.flush !== binding.Z_SYNC_FLUSH &&\n        opts.flush !== binding.Z_FULL_FLUSH &&\n        opts.flush !== binding.Z_FINISH &&\n        opts.flush !== binding.Z_BLOCK) {\n      throw new Error('Invalid flush flag: ' + opts.flush);\n    }\n  }\n  this._flushFlag = opts.flush || binding.Z_NO_FLUSH;\n\n  if (opts.chunkSize) {\n    if (opts.chunkSize < exports.Z_MIN_CHUNK ||\n        opts.chunkSize > exports.Z_MAX_CHUNK) {\n      throw new Error('Invalid chunk size: ' + opts.chunkSize);\n    }\n  }\n\n  if (opts.windowBits) {\n    if (opts.windowBits < exports.Z_MIN_WINDOWBITS ||\n        opts.windowBits > exports.Z_MAX_WINDOWBITS) {\n      throw new Error('Invalid windowBits: ' + opts.windowBits);\n    }\n  }\n\n  if (opts.level) {\n    if (opts.level < exports.Z_MIN_LEVEL ||\n        opts.level > exports.Z_MAX_LEVEL) {\n      throw new Error('Invalid compression level: ' + opts.level);\n    }\n  }\n\n  if (opts.memLevel) {\n    if (opts.memLevel < exports.Z_MIN_MEMLEVEL ||\n        opts.memLevel > exports.Z_MAX_MEMLEVEL) {\n      throw new Error('Invalid memLevel: ' + opts.memLevel);\n    }\n  }\n\n  if (opts.strategy) {\n    if (opts.strategy != exports.Z_FILTERED &&\n        opts.strategy != exports.Z_HUFFMAN_ONLY &&\n        opts.strategy != exports.Z_RLE &&\n        opts.strategy != exports.Z_FIXED &&\n        opts.strategy != exports.Z_DEFAULT_STRATEGY) {\n      throw new Error('Invalid strategy: ' + opts.strategy);\n    }\n  }\n\n  if (opts.dictionary) {\n    if (!Buffer.isBuffer(opts.dictionary)) {\n      throw new Error('Invalid dictionary: it should be a Buffer instance');\n    }\n  }\n\n  this._binding = new binding.Zlib(mode);\n\n  var self = this;\n  this._hadError = false;\n  this._binding.onerror = function(message, errno) {\n    // there is no way to cleanly recover.\n    // continuing only obscures problems.\n    self._binding = null;\n    self._hadError = true;\n\n    var error = new Error(message);\n    error.errno = errno;\n    error.code = exports.codes[errno];\n    self.emit('error', error);\n  };\n\n  var level = exports.Z_DEFAULT_COMPRESSION;\n  if (typeof opts.level === 'number') level = opts.level;\n\n  var strategy = exports.Z_DEFAULT_STRATEGY;\n  if (typeof opts.strategy === 'number') strategy = opts.strategy;\n\n  this._binding.init(opts.windowBits || exports.Z_DEFAULT_WINDOWBITS,\n                     level,\n                     opts.memLevel || exports.Z_DEFAULT_MEMLEVEL,\n                     strategy,\n                     opts.dictionary);\n\n  this._buffer = new Buffer(this._chunkSize);\n  this._offset = 0;\n  this._closed = false;\n  this._level = level;\n  this._strategy = strategy;\n\n  this.once('end', this.close);\n}\n\nutil.inherits(Zlib, Transform);\n\nZlib.prototype.params = function(level, strategy, callback) {\n  if (level < exports.Z_MIN_LEVEL ||\n      level > exports.Z_MAX_LEVEL) {\n    throw new RangeError('Invalid compression level: ' + level);\n  }\n  if (strategy != exports.Z_FILTERED &&\n      strategy != exports.Z_HUFFMAN_ONLY &&\n      strategy != exports.Z_RLE &&\n      strategy != exports.Z_FIXED &&\n      strategy != exports.Z_DEFAULT_STRATEGY) {\n    throw new TypeError('Invalid strategy: ' + strategy);\n  }\n\n  if (this._level !== level || this._strategy !== strategy) {\n    var self = this;\n    this.flush(binding.Z_SYNC_FLUSH, function() {\n      self._binding.params(level, strategy);\n      if (!self._hadError) {\n        self._level = level;\n        self._strategy = strategy;\n        if (callback) callback();\n      }\n    });\n  } else {\n    process.nextTick(callback);\n  }\n};\n\nZlib.prototype.reset = function() {\n  return this._binding.reset();\n};\n\n// This is the _flush function called by the transform class,\n// internally, when the last chunk has been written.\nZlib.prototype._flush = function(callback) {\n  this._transform(new Buffer(0), '', callback);\n};\n\nZlib.prototype.flush = function(kind, callback) {\n  var ws = this._writableState;\n\n  if (typeof kind === 'function' || (kind === void 0 && !callback)) {\n    callback = kind;\n    kind = binding.Z_FULL_FLUSH;\n  }\n\n  if (ws.ended) {\n    if (callback)\n      process.nextTick(callback);\n  } else if (ws.ending) {\n    if (callback)\n      this.once('end', callback);\n  } else if (ws.needDrain) {\n    var self = this;\n    this.once('drain', function() {\n      self.flush(callback);\n    });\n  } else {\n    this._flushFlag = kind;\n    this.write(new Buffer(0), '', callback);\n  }\n};\n\nZlib.prototype.close = function(callback) {\n  if (callback)\n    process.nextTick(callback);\n\n  if (this._closed)\n    return;\n\n  this._closed = true;\n\n  this._binding.close();\n\n  var self = this;\n  process.nextTick(function() {\n    self.emit('close');\n  });\n};\n\nZlib.prototype._transform = function(chunk, encoding, cb) {\n  var flushFlag;\n  var ws = this._writableState;\n  var ending = ws.ending || ws.ended;\n  var last = ending && (!chunk || ws.length === chunk.length);\n\n  if (!chunk === null && !Buffer.isBuffer(chunk))\n    return cb(new Error('invalid input'));\n\n  // If it's the last chunk, or a final flush, we use the Z_FINISH flush flag.\n  // If it's explicitly flushing at some other time, then we use\n  // Z_FULL_FLUSH. Otherwise, use Z_NO_FLUSH for maximum compression\n  // goodness.\n  if (last)\n    flushFlag = binding.Z_FINISH;\n  else {\n    flushFlag = this._flushFlag;\n    // once we've flushed the last of the queue, stop flushing and\n    // go back to the normal behavior.\n    if (chunk.length >= ws.length) {\n      this._flushFlag = this._opts.flush || binding.Z_NO_FLUSH;\n    }\n  }\n\n  var self = this;\n  this._processChunk(chunk, flushFlag, cb);\n};\n\nZlib.prototype._processChunk = function(chunk, flushFlag, cb) {\n  var availInBefore = chunk && chunk.length;\n  var availOutBefore = this._chunkSize - this._offset;\n  var inOff = 0;\n\n  var self = this;\n\n  var async = typeof cb === 'function';\n\n  if (!async) {\n    var buffers = [];\n    var nread = 0;\n\n    var error;\n    this.on('error', function(er) {\n      error = er;\n    });\n\n    do {\n      var res = this._binding.writeSync(flushFlag,\n                                        chunk, // in\n                                        inOff, // in_off\n                                        availInBefore, // in_len\n                                        this._buffer, // out\n                                        this._offset, //out_off\n                                        availOutBefore); // out_len\n    } while (!this._hadError && callback(res[0], res[1]));\n\n    if (this._hadError) {\n      throw error;\n    }\n\n    var buf = Buffer.concat(buffers, nread);\n    this.close();\n\n    return buf;\n  }\n\n  var req = this._binding.write(flushFlag,\n                                chunk, // in\n                                inOff, // in_off\n                                availInBefore, // in_len\n                                this._buffer, // out\n                                this._offset, //out_off\n                                availOutBefore); // out_len\n\n  req.buffer = chunk;\n  req.callback = callback;\n\n  function callback(availInAfter, availOutAfter) {\n    if (self._hadError)\n      return;\n\n    var have = availOutBefore - availOutAfter;\n    assert(have >= 0, 'have should not go down');\n\n    if (have > 0) {\n      var out = self._buffer.slice(self._offset, self._offset + have);\n      self._offset += have;\n      // serve some output to the consumer.\n      if (async) {\n        self.push(out);\n      } else {\n        buffers.push(out);\n        nread += out.length;\n      }\n    }\n\n    // exhausted the output buffer, or used all the input create a new one.\n    if (availOutAfter === 0 || self._offset >= self._chunkSize) {\n      availOutBefore = self._chunkSize;\n      self._offset = 0;\n      self._buffer = new Buffer(self._chunkSize);\n    }\n\n    if (availOutAfter === 0) {\n      // Not actually done.  Need to reprocess.\n      // Also, update the availInBefore to the availInAfter value,\n      // so that if we have to hit it a third (fourth, etc.) time,\n      // it'll have the correct byte counts.\n      inOff += (availInBefore - availInAfter);\n      availInBefore = availInAfter;\n\n      if (!async)\n        return true;\n\n      var newReq = self._binding.write(flushFlag,\n                                       chunk,\n                                       inOff,\n                                       availInBefore,\n                                       self._buffer,\n                                       self._offset,\n                                       self._chunkSize);\n      newReq.callback = callback; // this same function\n      newReq.buffer = chunk;\n      return;\n    }\n\n    if (!async)\n      return false;\n\n    // finished with the chunk.\n    cb();\n  }\n};\n\nutil.inherits(Deflate, Zlib);\nutil.inherits(Inflate, Zlib);\nutil.inherits(Gzip, Zlib);\nutil.inherits(Gunzip, Zlib);\nutil.inherits(DeflateRaw, Zlib);\nutil.inherits(InflateRaw, Zlib);\nutil.inherits(Unzip, Zlib);\n"]}