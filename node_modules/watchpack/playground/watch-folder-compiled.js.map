{"version":3,"sources":["watch-folder.js"],"names":[],"mappings":"AAAA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,YAAY,QAAQ,KAAR,CAAhB;;AAEA,IAAI,SAAS,KAAK,IAAL,CAAU,SAAV,EAAqB,QAArB,CAAb;;AAEA,SAAS,YAAT,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC,OAAnC,EAA4C;AAC3C,KAAI,IAAI,IAAI,SAAJ,CAAc;AACrB,oBAAkB;AADG,EAAd,CAAR;;AAIA,GAAE,EAAF,CAAK,QAAL,EAAe,UAAS,IAAT,EAAe,KAAf,EAAsB;AACpC,UAAQ,GAAR,CAAY,IAAZ,EAAkB,QAAlB,EAA4B,KAAK,QAAL,CAAc,MAAd,EAAsB,IAAtB,CAA5B,EAAyD,KAAzD;AACA,EAFD;;AAIA,GAAE,EAAF,CAAK,YAAL,EAAmB,UAAS,OAAT,EAAkB;AACpC,MAAI,QAAQ,EAAE,QAAF,EAAZ;AACA,UAAQ,GAAR,CAAY,IAAZ,EAAkB,YAAlB,EAAgC,QAAQ,GAAR,CAAY,UAAS,IAAT,EAAe;AAC1D,UAAO,KAAK,QAAL,CAAc,MAAd,EAAsB,IAAtB,CAAP;AACA,GAF+B,CAAhC,EAEI,OAAO,IAAP,CAAY,KAAZ,EAAmB,MAAnB,CAA0B,UAAS,GAAT,EAAc,IAAd,EAAoB;AACjD,OAAI,KAAK,QAAL,CAAc,MAAd,EAAsB,IAAtB,CAAJ,IAAmC,MAAM,IAAN,CAAnC;AACA,UAAO,GAAP;AACA,GAHG,EAGD,EAHC,CAFJ;AAMA,EARD;;AAUA,KAAI,YAAY,KAAK,GAAL,KAAa,KAA7B;AACA,SAAQ,GAAR,CAAY,IAAZ,EAAkB,SAAlB;AACA,GAAE,KAAF,CAAQ,KAAR,EAAe,OAAf,EAAwB,SAAxB;AACA;;AAED,aAAa,QAAb,EAAuB,EAAvB,EAA2B,CAAC,MAAD,CAA3B;AACA,aAAa,WAAb,EAA0B,CACzB,KAAK,IAAL,CAAU,MAAV,EAAkB,OAAlB,CADyB,EAEzB,KAAK,IAAL,CAAU,MAAV,EAAkB,OAAlB,CAFyB,EAGzB,KAAK,IAAL,CAAU,MAAV,EAAkB,OAAlB,CAHyB,EAIzB,KAAK,IAAL,CAAU,MAAV,EAAkB,OAAlB,CAJyB,CAA1B,EAKG,CACF,KAAK,IAAL,CAAU,MAAV,EAAkB,WAAlB,CADE,CALH","file":"watch-folder-compiled.js","sourcesContent":["var path = require(\"path\");\r\nvar Watchpack = require(\"../\");\r\n\r\nvar folder = path.join(__dirname, \"folder\");\r\n\r\nfunction startWatcher(name, files, folders) {\r\n\tvar w = new Watchpack({\r\n\t\taggregateTimeout: 3000\r\n\t});\r\n\r\n\tw.on(\"change\", function(file, mtime) {\r\n\t\tconsole.log(name, \"change\", path.relative(folder, file), mtime);\r\n\t});\r\n\r\n\tw.on(\"aggregated\", function(changes) {\r\n\t\tvar times = w.getTimes();\r\n\t\tconsole.log(name, \"aggregated\", changes.map(function(file) {\r\n\t\t\treturn path.relative(folder, file);\r\n\t\t}), Object.keys(times).reduce(function(obj, file) {\r\n\t\t\tobj[path.relative(folder, file)] = times[file];\r\n\t\t\treturn obj\r\n\t\t}, {}));\r\n\t});\r\n\r\n\tvar startTime = Date.now() - 10000;\r\n\tconsole.log(name, startTime);\r\n\tw.watch(files, folders, startTime);\r\n}\r\n\r\nstartWatcher(\"folder\", [], [folder]);\r\nstartWatcher(\"sub+files\", [\r\n\tpath.join(folder, \"a.txt\"),\r\n\tpath.join(folder, \"b.txt\"),\r\n\tpath.join(folder, \"c.txt\"),\r\n\tpath.join(folder, \"d.txt\"),\r\n], [\r\n\tpath.join(folder, \"subfolder\")\r\n]);\r\n"]}