{"version":3,"sources":["clean.js"],"names":[],"mappings":"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","file":"clean-compiled.js","sourcesContent":["/**\n * Clean-css - https://github.com/jakubpawlowicz/clean-css\n * Released under the terms of MIT license\n *\n * Copyright (C) 2015 JakubPawlowicz.com\n */\n\nvar ImportInliner = require('./imports/inliner');\nvar rebaseUrls = require('./urls/rebase');\n\nvar tokenize = require('./tokenizer/tokenize');\nvar simpleOptimize = require('./selectors/simple');\nvar advancedOptimize = require('./selectors/advanced');\n\nvar simpleStringify = require('./stringifier/simple');\nvar sourceMapStringify = require('./stringifier/source-maps');\n\nvar CommentsProcessor = require('./text/comments-processor');\nvar ExpressionsProcessor = require('./text/expressions-processor');\nvar FreeTextProcessor = require('./text/free-text-processor');\nvar UrlsProcessor = require('./text/urls-processor');\n\nvar Compatibility = require('./utils/compatibility');\nvar InputSourceMapTracker = require('./utils/input-source-map-tracker');\nvar SourceTracker = require('./utils/source-tracker');\nvar SourceReader = require('./utils/source-reader');\nvar Validator = require('./properties/validator');\n\nvar fs = require('fs');\nvar path = require('path');\nvar url = require('url');\n\nvar override = require('./utils/object').override;\n\nvar DEFAULT_TIMEOUT = 5000;\n\nvar CleanCSS = module.exports = function CleanCSS(options) {\n  options = options || {};\n\n  this.options = {\n    advanced: undefined === options.advanced ? true : !!options.advanced,\n    aggressiveMerging: undefined === options.aggressiveMerging ? true : !!options.aggressiveMerging,\n    benchmark: options.benchmark,\n    compatibility: new Compatibility(options.compatibility).toOptions(),\n    debug: options.debug,\n    explicitRoot: !!options.root,\n    explicitTarget: !!options.target,\n    inliner: options.inliner || {},\n    keepBreaks: options.keepBreaks || false,\n    keepSpecialComments: 'keepSpecialComments' in options ? options.keepSpecialComments : '*',\n    mediaMerging: undefined === options.mediaMerging ? true : !!options.mediaMerging,\n    processImport: undefined === options.processImport ? true : !!options.processImport,\n    processImportFrom: importOptionsFrom(options.processImportFrom),\n    rebase: undefined === options.rebase ? true : !!options.rebase,\n    relativeTo: options.relativeTo,\n    restructuring: undefined === options.restructuring ? true : !!options.restructuring,\n    root: options.root || process.cwd(),\n    roundingPrecision: options.roundingPrecision,\n    semanticMerging: undefined === options.semanticMerging ? false : !!options.semanticMerging,\n    shorthandCompacting: undefined === options.shorthandCompacting ? true : !!options.shorthandCompacting,\n    sourceMap: options.sourceMap,\n    sourceMapInlineSources: !!options.sourceMapInlineSources,\n    target: !options.target || missingDirectory(options.target) || presentDirectory(options.target) ? options.target : path.dirname(options.target)\n  };\n\n  this.options.inliner.timeout = this.options.inliner.timeout || DEFAULT_TIMEOUT;\n  this.options.inliner.request = override(\n    /* jshint camelcase: false */\n    proxyOptionsFrom(process.env.HTTP_PROXY || process.env.http_proxy),\n    this.options.inliner.request || {}\n  );\n};\n\nfunction importOptionsFrom(rules) {\n  return undefined === rules ? ['all'] : rules;\n}\n\nfunction missingDirectory(filepath) {\n  return !fs.existsSync(filepath) && !/\\.css$/.test(filepath);\n}\n\nfunction presentDirectory(filepath) {\n  return fs.existsSync(filepath) && fs.statSync(filepath).isDirectory();\n}\n\nfunction proxyOptionsFrom(httpProxy) {\n  return httpProxy ?\n    {\n      hostname: url.parse(httpProxy).hostname,\n      port: parseInt(url.parse(httpProxy).port)\n    } :\n    {};\n}\n\nCleanCSS.prototype.minify = function (data, callback) {\n  var context = {\n    stats: {},\n    errors: [],\n    warnings: [],\n    options: this.options,\n    debug: this.options.debug,\n    localOnly: !callback,\n    sourceTracker: new SourceTracker(),\n    validator: new Validator(this.options.compatibility)\n  };\n\n  if (context.options.sourceMap)\n    context.inputSourceMapTracker = new InputSourceMapTracker(context);\n\n  context.sourceReader = new SourceReader(context, data);\n  data = context.sourceReader.toString();\n\n  if (context.options.processImport || data.indexOf('@shallow') > 0) {\n    // inline all imports\n    var runner = callback ?\n      process.nextTick :\n      function (callback) { return callback(); };\n\n    return runner(function () {\n      return new ImportInliner(context).process(data, {\n        localOnly: context.localOnly,\n        imports: context.options.processImportFrom,\n        whenDone: runMinifier(callback, context)\n      });\n    });\n  } else {\n    return runMinifier(callback, context)(data);\n  }\n};\n\nfunction runMinifier(callback, context) {\n  function whenSourceMapReady (data) {\n    data = context.options.debug ?\n      minifyWithDebug(context, data) :\n      minify(context, data);\n    data = withMetadata(context, data);\n\n    return callback ?\n      callback.call(null, context.errors.length > 0 ? context.errors : null, data) :\n      data;\n  }\n\n  return function (data) {\n    if (context.options.sourceMap) {\n      return context.inputSourceMapTracker.track(data, function () {\n        if (context.options.sourceMapInlineSources) {\n          return context.inputSourceMapTracker.resolveSources(function () {\n            return whenSourceMapReady(data);\n          });\n        } else {\n          return whenSourceMapReady(data);\n        }\n      });\n    } else {\n      return whenSourceMapReady(data);\n    }\n  };\n}\n\nfunction withMetadata(context, data) {\n  data.stats = context.stats;\n  data.errors = context.errors;\n  data.warnings = context.warnings;\n  return data;\n}\n\nfunction minifyWithDebug(context, data) {\n  var startedAt = process.hrtime();\n  context.stats.originalSize = context.sourceTracker.removeAll(data).length;\n\n  data = minify(context, data);\n\n  var elapsed = process.hrtime(startedAt);\n  context.stats.timeSpent = ~~(elapsed[0] * 1e3 + elapsed[1] / 1e6);\n  context.stats.efficiency = 1 - data.styles.length / context.stats.originalSize;\n  context.stats.minifiedSize = data.styles.length;\n\n  return data;\n}\n\nfunction benchmark(runner) {\n  return function (processor, action) {\n    var name =  processor.constructor.name + '#' + action;\n    var start = process.hrtime();\n    runner(processor, action);\n    var itTook = process.hrtime(start);\n    console.log('%d ms: ' + name, 1000 * itTook[0] + itTook[1] / 1000000);\n  };\n}\n\nfunction minify(context, data) {\n  var options = context.options;\n\n  var commentsProcessor = new CommentsProcessor(context, options.keepSpecialComments, options.keepBreaks, options.sourceMap);\n  var expressionsProcessor = new ExpressionsProcessor(options.sourceMap);\n  var freeTextProcessor = new FreeTextProcessor(options.sourceMap);\n  var urlsProcessor = new UrlsProcessor(context, options.sourceMap, options.compatibility.properties.urlQuotes);\n\n  var stringify = options.sourceMap ? sourceMapStringify : simpleStringify;\n\n  var run = function (processor, action) {\n    data = typeof processor == 'function' ?\n      processor(data) :\n      processor[action](data);\n  };\n\n  if (options.benchmark)\n    run = benchmark(run);\n\n  run(commentsProcessor, 'escape');\n  run(expressionsProcessor, 'escape');\n  run(urlsProcessor, 'escape');\n  run(freeTextProcessor, 'escape');\n\n  function restoreEscapes(data, prefixContent) {\n    data = freeTextProcessor.restore(data, prefixContent);\n    data = urlsProcessor.restore(data);\n    data = options.rebase ? rebaseUrls(data, context) : data;\n    data = expressionsProcessor.restore(data);\n    return commentsProcessor.restore(data);\n  }\n\n  var tokens = tokenize(data, context);\n\n  simpleOptimize(tokens, options);\n\n  if (options.advanced)\n    advancedOptimize(tokens, options, context, true);\n\n  return stringify(tokens, options, restoreEscapes, context.inputSourceMapTracker);\n}\n"]}