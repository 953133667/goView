{"version":3,"sources":["wrap-for-optimizing.js"],"names":[],"mappings":"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","file":"wrap-for-optimizing-compiled.js","sourcesContent":["var BACKSLASH_HACK = '\\\\';\nvar IMPORTANT_WORD = 'important';\nvar IMPORTANT_TOKEN = '!'+IMPORTANT_WORD;\nvar IMPORTANT_WORD_MATCH = new RegExp(IMPORTANT_WORD+'$', 'i');\nvar IMPORTANT_TOKEN_MATCH = new RegExp(IMPORTANT_TOKEN+'$', 'i');\nvar STAR_HACK = '*';\nvar UNDERSCORE_HACK = '_';\nvar BANG_HACK = '!';\n\nfunction wrapAll(properties) {\n  var wrapped = [];\n\n  for (var i = properties.length - 1; i >= 0; i--) {\n    if (typeof properties[i][0] == 'string')\n      continue;\n\n    var single = wrapSingle(properties[i]);\n    single.all = properties;\n    single.position = i;\n    wrapped.unshift(single);\n  }\n\n  return wrapped;\n}\n\nfunction isMultiplex(property) {\n  for (var i = 1, l = property.length; i < l; i++) {\n    if (property[i][0] == ',' || property[i][0] == '/')\n      return true;\n  }\n\n  return false;\n}\n\nfunction hackType(property) {\n  var type = false;\n  var name = property[0][0];\n  var lastValue = property[property.length - 1];\n\n  if (name[0] == UNDERSCORE_HACK) {\n    type = 'underscore';\n  } else if (name[0] == STAR_HACK) {\n    type = 'star';\n  } else if (lastValue[0][0] == BANG_HACK && !lastValue[0].match(IMPORTANT_WORD_MATCH)) {\n    type = 'bang';\n  } else if (lastValue[0].indexOf(BANG_HACK) > 0 && !lastValue[0].match(IMPORTANT_WORD_MATCH)) {\n    type = 'bang';\n  } else if (lastValue[0].indexOf(BACKSLASH_HACK) > 0 && lastValue[0].indexOf(BACKSLASH_HACK) == lastValue[0].length - BACKSLASH_HACK.length - 1) {\n    type = 'backslash';\n  } else if (lastValue[0].indexOf(BACKSLASH_HACK) === 0 && lastValue[0].length == 2) {\n    type = 'backslash';\n  }\n\n  return type;\n}\n\nfunction isImportant(property) {\n  if (property.length > 1) {\n    var p = property[property.length - 1][0];\n    if (typeof(p) === 'string') {\n      return IMPORTANT_TOKEN_MATCH.test(p);\n    }\n  }\n  return false;\n}\n\nfunction stripImportant(property) {\n  if (property.length > 0)\n    property[property.length - 1][0] = property[property.length - 1][0].replace(IMPORTANT_TOKEN_MATCH, '');\n}\n\nfunction stripPrefixHack(property) {\n  property[0][0] = property[0][0].substring(1);\n}\n\nfunction stripSuffixHack(property, hackType) {\n  var lastValue = property[property.length - 1];\n  lastValue[0] = lastValue[0]\n    .substring(0, lastValue[0].indexOf(hackType == 'backslash' ? BACKSLASH_HACK : BANG_HACK))\n    .trim();\n\n  if (lastValue[0].length === 0)\n    property.pop();\n}\n\nfunction wrapSingle(property) {\n  var _isImportant = isImportant(property);\n  if (_isImportant)\n    stripImportant(property);\n\n  var _hackType = hackType(property);\n  if (_hackType == 'star' || _hackType == 'underscore')\n    stripPrefixHack(property);\n  else if (_hackType == 'backslash' || _hackType == 'bang')\n    stripSuffixHack(property, _hackType);\n\n  var isVariable = property[0][0].indexOf('--') === 0;\n\n  return {\n    block: isVariable && property[1] && Array.isArray(property[1][0][0]),\n    components: [],\n    dirty: false,\n    hack: _hackType,\n    important: _isImportant,\n    name: property[0][0],\n    multiplex: property.length > 2 ? isMultiplex(property) : false,\n    position: 0,\n    shorthand: false,\n    unused: property.length < 2,\n    value: property.slice(1),\n    variable: isVariable\n  };\n}\n\nmodule.exports = {\n  all: wrapAll,\n  single: wrapSingle\n};\n"]}