{"version":3,"sources":["compatibility.js"],"names":[],"mappings":"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","file":"compatibility-compiled.js","sourcesContent":["var util = require('util');\n\nvar DEFAULTS = {\n  '*': {\n    colors: {\n      opacity: true // rgba / hsla\n    },\n    properties: {\n      backgroundClipMerging: false, // background-clip to shorthand\n      backgroundOriginMerging: false, // background-origin to shorthand\n      backgroundSizeMerging: false, // background-size to shorthand\n      colors: true, // any kind of color transformations, like `#ff00ff` to `#f0f` or `#fff` into `red`\n      ieBangHack: false, // !ie suffix hacks on IE<8\n      iePrefixHack: false, // underscore / asterisk prefix hacks on IE\n      ieSuffixHack: true, // \\9 suffix hacks on IE6-9\n      merging: true, // merging properties into one\n      shorterLengthUnits: false, // optimize pixel units into `pt`, `pc` or `in` units\n      spaceAfterClosingBrace: true, // 'url() no-repeat' to 'url()no-repeat'\n      urlQuotes: false, // whether to wrap content of `url()` into quotes or not\n      zeroUnits: true // 0[unit] -> 0\n    },\n    selectors: {\n      adjacentSpace: false, // div+ nav Android stock browser hack\n      ie7Hack: false, // *+html hack\n      special: /(\\-moz\\-|\\-ms\\-|\\-o\\-|\\-webkit\\-|:dir\\([a-z-]*\\)|:first(?![a-z-])|:fullscreen|:left|:read-only|:read-write|:right|:placeholder|:host|::content|\\/deep\\/|::shadow|^,)/ // special selectors which prevent merging\n    },\n    units: {\n      ch: true,\n      in: true,\n      pc: true,\n      pt: true,\n      rem: true,\n      vh: true,\n      vm: true, // vm is vmin on IE9+ see https://developer.mozilla.org/en-US/docs/Web/CSS/length\n      vmax: true,\n      vmin: true,\n      vw: true\n    }\n  },\n  'ie8': {\n    colors: {\n      opacity: false\n    },\n    properties: {\n      backgroundClipMerging: false,\n      backgroundOriginMerging: false,\n      backgroundSizeMerging: false,\n      colors: true,\n      ieBangHack: false,\n      iePrefixHack: true,\n      ieSuffixHack: true,\n      merging: false,\n      shorterLengthUnits: false,\n      spaceAfterClosingBrace: true,\n      urlQuotes: false,\n      zeroUnits: true\n    },\n    selectors: {\n      adjacentSpace: false,\n      ie7Hack: false,\n      special: /(\\-moz\\-|\\-ms\\-|\\-o\\-|\\-webkit\\-|:root|:nth|:first\\-of|:last|:only|:empty|:target|:checked|::selection|:enabled|:disabled|:not|:placeholder|:host|::content|\\/deep\\/|::shadow|^,)/\n    },\n    units: {\n      ch: false,\n      in: true,\n      pc: true,\n      pt: true,\n      rem: false,\n      vh: false,\n      vm: false,\n      vmax: false,\n      vmin: false,\n      vw: false\n    }\n  },\n  'ie7': {\n    colors: {\n      opacity: false\n    },\n    properties: {\n      backgroundClipMerging: false,\n      backgroundOriginMerging: false,\n      backgroundSizeMerging: false,\n      colors: true,\n      ieBangHack: true,\n      iePrefixHack: true,\n      ieSuffixHack: true,\n      merging: false,\n      shorterLengthUnits: false,\n      spaceAfterClosingBrace: true,\n      urlQuotes: false,\n      zeroUnits: true\n    },\n    selectors: {\n      adjacentSpace: false,\n      ie7Hack: true,\n      special: /(\\-moz\\-|\\-ms\\-|\\-o\\-|\\-webkit\\-|:focus|:before|:after|:root|:nth|:first\\-of|:last|:only|:empty|:target|:checked|::selection|:enabled|:disabled|:not|:placeholder|:host|::content|\\/deep\\/|::shadow|^,)/\n    },\n    units: {\n      ch: false,\n      in: true,\n      pc: true,\n      pt: true,\n      rem: false,\n      vh: false,\n      vm: false,\n      vmax: false,\n      vmin: false,\n      vw: false,\n    }\n  }\n};\n\nfunction Compatibility(source) {\n  this.source = source || {};\n}\n\nfunction merge(source, target) {\n  for (var key in source) {\n    var value = source[key];\n\n    if (typeof value === 'object' && !util.isRegExp(value))\n      target[key] = merge(value, target[key] || {});\n    else\n      target[key] = key in target ? target[key] : value;\n  }\n\n  return target;\n}\n\nfunction calculateSource(source) {\n  if (typeof source == 'object')\n    return source;\n\n  if (!/[,\\+\\-]/.test(source))\n    return DEFAULTS[source] || DEFAULTS['*'];\n\n  var parts = source.split(',');\n  var template = parts[0] in DEFAULTS ?\n    DEFAULTS[parts.shift()] :\n    DEFAULTS['*'];\n\n  source = {};\n\n  parts.forEach(function (part) {\n    var isAdd = part[0] == '+';\n    var key = part.substring(1).split('.');\n    var group = key[0];\n    var option = key[1];\n\n    source[group] = source[group] || {};\n    source[group][option] = isAdd;\n  });\n\n  return merge(template, source);\n}\n\nCompatibility.prototype.toOptions = function () {\n  return merge(DEFAULTS['*'], calculateSource(this.source));\n};\n\nmodule.exports = Compatibility;\n"]}