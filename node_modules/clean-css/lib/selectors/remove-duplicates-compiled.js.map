{"version":3,"sources":["remove-duplicates.js"],"names":[],"mappings":"AAAA,IAAI,gBAAgB,QAAQ,yBAAR,EAAmC,IAAvD;AACA,IAAI,qBAAqB,QAAQ,yBAAR,EAAmC,SAA5D;;AAEA,SAAS,gBAAT,CAA0B,MAA1B,EAAkC;AAChC,MAAI,UAAU,EAAd;AACA,MAAI,eAAe,EAAnB;AACA,MAAI,EAAJ,EAAQ,KAAR;AACA,MAAI,IAAJ,EAAU,MAAV;;AAEA,OAAK,IAAI,IAAI,CAAR,EAAW,IAAI,OAAO,MAA3B,EAAmC,IAAI,CAAvC,EAA0C,GAA1C,EAA+C;AAC7C,YAAQ,OAAO,CAAP,CAAR;AACA,QAAI,MAAM,CAAN,KAAY,UAAhB,EACE;;AAEF,SAAK,mBAAmB,MAAM,CAAN,CAAnB,CAAL;;AAEA,QAAI,QAAQ,EAAR,KAAe,QAAQ,EAAR,EAAY,MAAZ,IAAsB,CAAzC,EACE,aAAa,IAAb,CAAkB,EAAlB,EADF,KAGE,QAAQ,EAAR,IAAc,QAAQ,EAAR,KAAe,EAA7B;;AAEF,YAAQ,EAAR,EAAY,IAAZ,CAAiB,CAAjB;AACD;;AAED,OAAK,IAAI,CAAJ,EAAO,IAAI,aAAa,MAA7B,EAAqC,IAAI,CAAzC,EAA4C,GAA5C,EAAiD;AAC/C,SAAK,aAAa,CAAb,CAAL;AACA,aAAS,EAAT;;AAEA,SAAK,IAAI,IAAI,QAAQ,EAAR,EAAY,MAAZ,GAAqB,CAAlC,EAAqC,KAAK,CAA1C,EAA6C,GAA7C,EAAkD;AAChD,cAAQ,OAAO,QAAQ,EAAR,EAAY,CAAZ,CAAP,CAAR;AACA,aAAO,cAAc,MAAM,CAAN,CAAd,CAAP;;AAEA,UAAI,OAAO,OAAP,CAAe,IAAf,IAAuB,CAAC,CAA5B,EACE,MAAM,CAAN,IAAW,EAAX,CADF,KAGE,OAAO,IAAP,CAAY,IAAZ;AACH;AACF;AACF;;AAED,OAAO,OAAP,GAAiB,gBAAjB","file":"remove-duplicates-compiled.js","sourcesContent":["var stringifyBody = require('../stringifier/one-time').body;\nvar stringifySelectors = require('../stringifier/one-time').selectors;\n\nfunction removeDuplicates(tokens) {\n  var matched = {};\n  var moreThanOnce = [];\n  var id, token;\n  var body, bodies;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    token = tokens[i];\n    if (token[0] != 'selector')\n      continue;\n\n    id = stringifySelectors(token[1]);\n\n    if (matched[id] && matched[id].length == 1)\n      moreThanOnce.push(id);\n    else\n      matched[id] = matched[id] || [];\n\n    matched[id].push(i);\n  }\n\n  for (i = 0, l = moreThanOnce.length; i < l; i++) {\n    id = moreThanOnce[i];\n    bodies = [];\n\n    for (var j = matched[id].length - 1; j >= 0; j--) {\n      token = tokens[matched[id][j]];\n      body = stringifyBody(token[2]);\n\n      if (bodies.indexOf(body) > -1)\n        token[2] = [];\n      else\n        bodies.push(body);\n    }\n  }\n}\n\nmodule.exports = removeDuplicates;\n"]}