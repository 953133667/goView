{"version":3,"sources":["clean-up.js"],"names":[],"mappings":"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","file":"clean-up-compiled.js","sourcesContent":["function removeWhitespace(match, value) {\n  return '[' + value.replace(/ /g, '') + ']';\n}\n\nfunction selectorSorter(s1, s2) {\n  return s1[0] > s2[0] ? 1 : -1;\n}\n\nfunction whitespaceReplacements(_, p1, p2, p3) {\n  if (p1 && p2 && p3.length)\n    return p1 + p2 + ' ';\n  else if (p1 && p2)\n    return p1 + p2;\n  else\n    return p2;\n}\n\nvar CleanUp = {\n  selectors: function (selectors, removeUnsupported, adjacentSpace) {\n    var list = [];\n    var repeated = [];\n\n    for (var i = 0, l = selectors.length; i < l; i++) {\n      var selector = selectors[i];\n      var reduced = selector[0]\n        .replace(/\\s+/g, ' ')\n        .replace(/ ?, ?/g, ',')\n        .replace(/\\s*(\\\\)?([>+~])(\\s*)/g, whitespaceReplacements)\n        .trim();\n\n      if (adjacentSpace && reduced.indexOf('nav') > 0)\n        reduced = reduced.replace(/\\+nav(\\S|$)/, '+ nav$1');\n\n      if (removeUnsupported && (reduced.indexOf('*+html ') != -1 || reduced.indexOf('*:first-child+html ') != -1))\n        continue;\n\n      if (reduced.indexOf('*') > -1) {\n        reduced = reduced\n          .replace(/\\*([:#\\.\\[])/g, '$1')\n          .replace(/^(\\:first\\-child)?\\+html/, '*$1+html');\n      }\n\n      if (reduced.indexOf('[') > -1)\n        reduced = reduced.replace(/\\[([^\\]]+)\\]/g, removeWhitespace);\n\n      if (repeated.indexOf(reduced) == -1) {\n        selector[0] = reduced;\n        repeated.push(reduced);\n        list.push(selector);\n      }\n    }\n\n    return list.sort(selectorSorter);\n  },\n\n  selectorDuplicates: function (selectors) {\n    var list = [];\n    var repeated = [];\n\n    for (var i = 0, l = selectors.length; i < l; i++) {\n      var selector = selectors[i];\n\n      if (repeated.indexOf(selector[0]) == -1) {\n        repeated.push(selector[0]);\n        list.push(selector);\n      }\n    }\n\n    return list.sort(selectorSorter);\n  },\n\n  block: function (values, spaceAfterClosingBrace) {\n    values[0] = values[0]\n      .replace(/\\s+/g, ' ')\n      .replace(/(,|:|\\() /g, '$1')\n      .replace(/ \\)/g, ')');\n\n    if (!spaceAfterClosingBrace)\n      values[0] = values[0].replace(/\\) /g, ')');\n  },\n\n  atRule: function (values) {\n    values[0] = values[0]\n      .replace(/\\s+/g, ' ')\n      .trim();\n  }\n};\n\nmodule.exports = CleanUp;\n"]}